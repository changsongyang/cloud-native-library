<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超（Jimmy Song）" />

  
  
  
    
  
  <meta name="description" content="你可能参加过各种云原生、服务网格相关的 meetup，在社区里看到很多人在分享和讨论 Istio，但是对于自己是否真的需要 Istio 感到踌躇，甚至因为它的复杂性而对服务网格的前景感到怀疑。那么，在你继阅读 Istio SIG 后续" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/cloud-native-handbook/service-mesh/do-you-need-a-service-mesh/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.f105d866ef8801694106f556ad4c9d33.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/cloud-native-handbook/service-mesh/do-you-need-a-service-mesh/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/cloud-native-handbook/service-mesh/do-you-need-a-service-mesh/" />
  <meta property="og:title" content="你是否需要 Istio？ | 云原生资料库" />
  <meta property="og:description" content="你可能参加过各种云原生、服务网格相关的 meetup，在社区里看到很多人在分享和讨论 Istio，但是对于自己是否真的需要 Istio 感到踌躇，甚至因为它的复杂性而对服务网格的前景感到怀疑。那么，在你继阅读 Istio SIG 后续" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2022-05-03T00:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2022-06-03T18:59:26&#43;08:00">
  

  



  

  

  





  <title>你是否需要 Istio？ | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="f2278b4726a326bb988c2256c79108bc" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.14a0ed61c6dbd594b9c75193b25be179.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>搜索</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">云原生资料库</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">云原生资料库</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>书目列表</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/translation"><span>译文</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/event"><span>活动</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>更新</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io" target="_blank" rel="noopener"><span>Jimmy Song</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io" data-toggle="tooltip" data-placement="bottom" title="主页" target="_blank" rel="noopener" aria-label="主页">
                <i class="fas fa-home" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/rootsongjc/cloud-native-library/" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          服务网格
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      


  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
        <li class=""><a href="/cloud-native-handbook/"><i class="fas fa-book-open pr-1"></i>云原生导览</a></li>
    
      


  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
          <a class="docs-menu-lv&lt;nil&gt; docs-toc-link " href="/cloud-native-handbook/intro/"><i class="fas fa-book-reader pr-1"></i>关于云原生</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/intro/what-is-cloud-native/">什么是云原生？</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/intro/cloud-native-philosophy/">云原生的设计哲学</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/intro/define-cloud-native-app/">什么是云原生应用？</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/intro/quick-start/">云原生快速入门</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/intro/certification/"></a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
          <a class="docs-menu-lv&lt;nil&gt; docs-toc-link " href="/cloud-native-handbook/kubernetes/"><i class="fas fa-book-reader pr-1"></i>Kubernetes</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/kubernetes/what-is-kubernetes/">什么是 Kubernetes?</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/kubernetes/history/">Kubernetes 的历史</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/kubernetes/sidecar-pattern/">Sidecar 模式</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
          <a class="docs-menu-lv&lt;nil&gt; docs-toc-link " href="/cloud-native-handbook/service-mesh/"><i class="fas fa-book-reader pr-1"></i>服务网格</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/what-is-service-mesh/">什么是服务网格？</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/what-is-istio/">什么是 Istio?</a></li>



  <li class="active"><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/do-you-need-a-service-mesh/">你是否需要 Istio？</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/what-is-envoy/">什么是 Envoy？</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/service-mesh-patterns/">服务网格的部署模式</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/envoy-building-blocks/">Envoy 的构建模块</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/service-mesh/http-conneciton-manager/">HTTP 连接管理器介绍</a></li>

      
        </ul>
      
    

    
      </div>
    



  
    
    
    
    
      
    
    

    
      <div class="docs-toc-item">
          <a class="docs-menu-lv&lt;nil&gt; docs-toc-link " href="/cloud-native-handbook/community/"><i class="fas fa-book-reader pr-1"></i>社区</a>
    
      
        <ul class="nav docs-sidenav">
      


  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/community/cncf/">云原生计算基金会（CNCF）</a></li>



  <li class=""><a class="docs-menu-lv&lt;nil&gt;" href="/cloud-native-handbook/community/cnc/">云原生社区（中国）</a></li>

      
        </ul>
      
    

    
      </div>
    

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      

      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#使用-istio-无法做到完全对应用透明">使用 Istio 无法做到完全对应用透明</a></li>
    <li><a href="#istio-对非-kubernetes-环境的支持有限">Istio 对非 Kubernetes 环境的支持有限</a></li>
    <li><a href="#只有-http-协议是一等公民">只有 HTTP 协议是一等公民</a></li>
    <li><a href="#扩展-istio-的成本并不低">扩展 Istio 的成本并不低</a></li>
    <li><a href="#istio-在集群规模较大时的性能问题">Istio 在集群规模较大时的性能问题</a></li>
    <li><a href="#xds-分发没有分级发布机制">XDS 分发没有分级发布机制</a></li>
    <li><a href="#istio-组件故障时是否有退路">Istio 组件故障时是否有退路？</a></li>
    <li><a href="#isito-技术架构的成熟度还没有达到预期">Isito 技术架构的成熟度还没有达到预期</a></li>
    <li><a href="#istio-缺乏成熟的产品生态">Istio 缺乏成熟的产品生态</a></li>
    <li><a href="#istio-目前解决的问题域还很有限">Istio 目前解决的问题域还很有限</a></li>
    <li><a href="#写在最后">写在最后</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>

      
      
      <div class="subscribe-module col-12">
    <img src="/img/wechat.webp" alt="image" title="Jimmy Song的微信公众号"/>
    <p class="text-center">关注几米宋</p>
</div>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          

          <h1>你是否需要 Istio？</h1>

          <div class="article-style">
            <p>你可能参加过各种云原生、服务网格相关的 meetup，在社区里看到很多人在分享和讨论 Istio，但是对于自己是否真的需要 Istio 感到踌躇，甚至因为它的复杂性而对服务网格的前景感到怀疑。那么，在你继阅读 Istio SIG 后续文章之前，请先仔细阅读本文，审视一下自己公司的现状，看看你是否有必要使用服务网格，处于 Istio 应用的哪个阶段。</p>
<p>本文不是对应用服务网格的指导，而是根据社区里经常遇到的问题而整理。在使用 Istio 之前，请先考虑下以下因素：</p>
<ul>
<li>你的团队里有多少人？</li>
<li>你的团队是否有使用 Kubernetes、Istio 的经验？</li>
<li>你有多少微服务？</li>
<li>这些微服务使用什么语言？</li>
<li>你的运维、SRE 团队是否可以支持服务网格管理？</li>
<li>你有采用开源项目的经验吗？</li>
<li>你的服务都运行在哪些平台上？</li>
<li>你的应用已经容器化并使用 Kubernetes 管理了吗？</li>
<li>你的服务有多少是部署在虚拟机、有多少是部署到 Kubernetes 集群上，比例如何？</li>
<li>你的团队有制定转移到云原生架构的计划吗？</li>
<li>你想使用 Istio 的什么功能？</li>
<li>Istio 的稳定性是否能够满足你的需求？</li>
<li>你是否可以忍受 Istio 带来的性能损耗？</li>
</ul>
<p>Istio 作为目前最流行的 Service Mesh 技术之一，拥有活跃的社区和众多的落地案例。但如果你真的想在你的生产环境大规模落地 Isito，这看似壮观美好的冰山下，却是暗流涌动，潜藏着无数凶险。</p>
<h2 id="使用-istio-无法做到完全对应用透明">使用 Istio 无法做到完全对应用透明</h2>
<p>服务通信和治理相关的功能迁移到 Sidecar 进程中后， 应用中的 SDK 通常需要作出一些对应的改变。</p>
<p>比如 SDK 需要关闭一些功能，例如重试。一个典型的场景是，SDK 重试 m 次，Sidecar 重试 n 次，这会导致 m * n 的重试风暴，从而引发风险。</p>
<p>此外，诸如 trace header 的透传，也需要 SDK 进行升级改造。如果你的 SDK 中还有其它特殊逻辑和功能，这些可能都需要小心处理才能和 Isito Sidecar 完美配合。</p>
<h2 id="istio-对非-kubernetes-环境的支持有限">Istio 对非 Kubernetes 环境的支持有限</h2>
<p>在业务迁移至 Istio 的同时，可能并没有同步迁移至 Kubernetes，而还运行在原有 PAAS 系统之上。 这会带来一系列挑战：</p>
<ul>
<li>原有 PAAS 可能没有容器网络，Istio 的服务发现和流量劫持都可能要根据旧有基础设施进行适配才能正常工作</li>
<li>如果旧有的 PAAS 单个实例不能很好的管理多个容器（类比 Kubernetes 的 Pod 和 Container 概念），大量 Istio Sidecar 的部署和运维将是一个很大的挑战</li>
<li>缺少 Kubernetes webhook 机制，Sidecar 的注入也可能变得不那么透明，而需要耦合在业务的部署逻辑中</li>
</ul>
<h2 id="只有-http-协议是一等公民">只有 HTTP 协议是一等公民</h2>
<p>Istio 原生对 HTTP 协议提供了完善的全功能支持，但在真实的业务场景中，私有化协议却非常普遍，而 Istio 却并未提供原生支持。</p>
<p>这导致使用私有协议的一些服务可能只能被迫使用 TCP 协议来进行基本的请求路由，这会导致很多功能的缺失，这其中包括 Istio 非常强大的基于内容的消息路由，如基于 header、 path 等进行权重路由。</p>
<h2 id="扩展-istio-的成本并不低">扩展 Istio 的成本并不低</h2>
<p>虽然 Istio 的总体架构是基于高度可扩展而设计，但由于整个 Istio 系统较为复杂，如果你对 Istio 进行过真实的扩展，就会发现成本不低。</p>
<p>以扩展 Istio 支持某一种私有协议为例，首先你需要在 Istio 的 api 代码库中进行协议扩展，其次你需要修改 Istio 代码库来实现新的协议处理和下发，然后你还需要修改 xds 代码库的协议，最后你还要在 Envoy 中实现相应的 Filter 来完成协议的解析和路由等功能。</p>
<p>在这个过程中，你还可能面临上述数个复杂代码库的编译等工程挑战（如果你的研发环境不能很好的使用 Docker 或者无法访问部分国外网络的情况下）。</p>
<p>即使做完了所有的这些工作，你也可能面临这些工作无法合并回社区的情况，社区对私有协议的扩展支持度不高，这会导致你的代码和社区割裂，为后续的升级更新带来隐患。</p>
<h2 id="istio-在集群规模较大时的性能问题">Istio 在集群规模较大时的性能问题</h2>
<p>Istio 默认的工作模式下，每个 Sidecar 都会收到全集群所有服务的信息。如果你部署过 Istio 官方的 Bookinfo 示例应用，并使用 Envoy 的 config dump 接口进行观察，你会发现，仅仅几个服务，Envoy 所收到的配置信息就有将近 20w 行。</p>
<p>可以想象，在稍大一些的集群规模，Envoy 的内存开销、Istio 的 CPU 开销、XDS 的下发时效性等问题，一定会变得尤为突出。</p>
<p>Istio 这么做一是考虑这样可以开箱即用，用户不用进行过多的配置，另外在一些场景，可能也无法梳理出准确的服务之间的调用关系，因此直接给每个 Sidecar 下发了全量的服务配置，即使这个 Sidecar 只会访问其中很小一部分服务。</p>
<p>当然这个问题也有解法，你可以通过 Sidecar CRD 来显示定义服务调用关系，使 Envoy 只得到他需要的服务信息，从而大幅降低 Envoy 的资源开销，但前提是在你的业务线中能梳理出这些调用关系。</p>
<h2 id="xds-分发没有分级发布机制">XDS 分发没有分级发布机制</h2>
<p>当你对一个服务的策略配置进行变更的时候，XDS 不具备分级发布的能力，所有访问这个服务的 Envoy 都会立即收到变更后的最新配置。这在一些对变更敏感的严苛生产环境，可能是有很高风险甚至不被允许的。</p>
<p>如果你的生产环境严格要求任何变更都必须有分级发布流程，那你可能需要考虑自己实现一套这样的机制。</p>
<h2 id="istio-组件故障时是否有退路">Istio 组件故障时是否有退路？</h2>
<p>以 Istio 为代表的 Sidecar 架构的特殊性在于，Sidecar 直接承接了业务流量，而不像一些其他的基础设施那样，只是整个系统的旁路组件（比如 Kubernetes）。</p>
<p>因此在 Isito 落地初期，你必须考虑，如果 Sidecar 进程挂掉，服务怎么办？是否有退路？是否能 fallback 到直连模式？</p>
<p>在 Istio 落地过程中，是否能无损 fallback，通常决定了核心业务能否接入 Service Mesh。</p>
<h2 id="isito-技术架构的成熟度还没有达到预期">Isito 技术架构的成熟度还没有达到预期</h2>
<p>虽然 Istio 1.0 版本已经发布了很久，但是如果你关注社区每个版本的迭代，就会发现，Istio 目前架构依然处于不太稳定的状态，尤其是 1.5 版本前后的几个大版本，先后经历了去除 Mixer 组件、合并为单体架构、仅支持高版本 Kubernetes 等等重大变动，这对于已经在生产环境中使用了 Istio 的用户非常不友好，因为升级会面临各种不兼容性问题。</p>
<p>好在社区也已经意识到这一问题，2021 年社区也成立了专门的小组，重点改善 Istio 的兼容性和用户体验。</p>
<h2 id="istio-缺乏成熟的产品生态">Istio 缺乏成熟的产品生态</h2>
<p>Istio 作为一套技术方案，却并不是一套产品方案。</p>
<p>如果你在生产环境中使用，你可能还需要解决可视化界面、权限和账号系统对接、结合公司已有技术组件和产品生态等问题，仅仅通过命令行来使用，可能并不能满足你的组织对权限、审计、易用性的要求。</p>
<p>而 Isito 自带的 Kiali 功能还十分简陋，远远没有达到能在生产环境使用的程度，因此你可能需要研发基于 Isito 的上层产品。</p>
<h2 id="istio-目前解决的问题域还很有限">Istio 目前解决的问题域还很有限</h2>
<p>Istio 目前主要解决的是分布式系统之间服务调用的问题，但还有一些分布式系统的复杂语义和功能并未纳入到 Istio 的 Sidecar 运行时之中，比如消息发布和订阅、状态管理、资源绑定等等。</p>
<p>云原生应用将会朝着多 Sidecar 运行时或将更多分布式能力纳入单 Sidecar 运行时的方向继续发展，以使服务本身变得更为轻量，让应用和基础架构彻底解耦。</p>
<p>如果你的生产环境中，业务系统对接了非常多和复杂的分布式系系统中间件，Istio 目前可能并不能完全解决你的应用的云原生化诉求。</p>
<h2 id="写在最后">写在最后</h2>
<p>看到这里，你是否感到有些沮丧，而对 Isito 失去信心？</p>
<p>别担心，上面列举的这些问题，实际上并不影响 Isito 依然是目前最为流行和成功的 Service Mesh 技术选型之一。Istio 频繁的变动，一定程度上也说明它拥有一个活跃的社区，我们应当对一个新的事物报以信心，Isito 的社区也在不断听取来自终端用户的声音，朝着大家期待的方向演进。</p>
<p>同时，如果你的生产环境中的服务规模并不是很大，服务已经托管于 Kubernetes 之上，也只使用那些 Istio 原生提供的能力，那么 Istio 依然是一个值得尝试的开箱即用方案。</p>
<p>但如果你的生产环境比较复杂，技术债务较重，专有功能和策略需求较多，亦或者服务规模庞大，那么在开始使用 Istio 之前，你需要仔细权衡上述这些要素，以评估在你的系统之中引入 Istio 可能带来的复杂度和潜在成本。</p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://cloudnative.to/blog/the-facts-of-using-istio/" target="_blank" rel="noopener">在生产环境使用 Istio 前的若干考虑要素 - cloudnative.to</a></li>
</ul>

          </div>

          



          
          
          <div class="article-widget">
            
<div class="container-xl">
<div class="row post-nav">
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">上一页</div>
    <a href="/cloud-native-handbook/service-mesh/what-is-istio/" rel="next">什么是 Istio?</a>
  </div>
  
  
  
  <div class="col-6 post-nav-item">
    <div class="meta-nav">下一页</div>
    <a href="/cloud-native-handbook/service-mesh/what-is-envoy/" rel="prev">什么是 Envoy？</a>
  </div>
  
</div>
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>最近更新于 2022-06-03</p>

          



          


  
  
  

  

  
  <section id="comments" class="mb-3">
    <script src="https://giscus.app/client.js"
        data-repo="rootsongjc/cloud-native-library"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTQ2MjY2NDg="
        data-category="Announcements"
        data-category-id="DIC_kwDODMrxWM4CPL7J"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

  </section>
  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2022 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

      

    
    <script src="/js/vendor-bundle.min.53d67dc2cb1ebceb89d5e2aba2f86112.js"></script>

    
    
    
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
      

    

    
    
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    
      
      
      
      
      
      
      
    

    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":false}</script>

    
    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/zh/js/wowchemy.min.d29a6fc876b457837294a96644b02d4f.js"></script>

    
    
    
    
    
    
      
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>






</body>
</html>
