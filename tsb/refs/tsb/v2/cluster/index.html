<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="Each Kubernetes cluster managed by Service Bridge should be onboarded first before configurations can be applied to the services in the cluster. Onboarding a cluster is a two step process. First, create a cluster object under the appropriate tenant. Once a cluster object is created, its status field should provide the set of join tokens that will be used by the Service Bridge agent on the cluster to talk to Service Bridge management plane. The second step is to deploy the Service Bridge agent on the cluster with the join tokens and deploy Istio on the cluster. The following example creates a cluster named c1 under the tenant mycompany, indicating that the cluster is deployed on a network &ldquo;vpc-01&rdquo; corresponding to the AWS VPC where it resides." />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/refs/tsb/v2/cluster/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.2c25b2854625561177dfe556e1065970.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/refs/tsb/v2/cluster/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/refs/tsb/v2/cluster/" />
  <meta property="og:title" content="Clusters | 云原生资料库" />
  <meta property="og:description" content="Each Kubernetes cluster managed by Service Bridge should be onboarded first before configurations can be applied to the services in the cluster. Onboarding a cluster is a two step process. First, create a cluster object under the appropriate tenant. Once a cluster object is created, its status field should provide the set of join tokens that will be used by the Service Bridge agent on the cluster to talk to Service Bridge management plane. The second step is to deploy the Service Bridge agent on the cluster with the join tokens and deploy Istio on the cluster. The following example creates a cluster named c1 under the tenant mycompany, indicating that the cluster is deployed on a network &ldquo;vpc-01&rdquo; corresponding to the AWS VPC where it resides." /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2024-03-06T15:17:26&#43;08:00">
  

  



  

  

  





  <title>Clusters | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io/blog/" target="_blank" rel="noopener"><span>博客</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://cloudnative.to/" target="_blank" rel="noopener"><span>社区</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="首页" aria-label="首页"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          tsb
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#tetrateio-api-tsb-v2-cluster">Cluster</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-v2-cluster-installtemplate">InstallTemplate</a></li>
        <li><a href="#tetrateio-api-tsb-v2-cluster-state">State</a></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-v2-clusterstatus">ClusterStatus</a></li>
    <li><a href="#tetrateio-api-tsb-v2-locality">Locality</a></li>
    <li><a href="#tetrateio-api-tsb-v2-namespacescoping">NamespaceScoping</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-v2-service-port">Port</a></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-v2-workload">Workload</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-v2-workload-proxy">Proxy</a></li>
        <li><a href="#tetrateio-api-tsb-v2-namespacescoping-scope">Scope</a></li>
      </ul>
    </li>
  </ul>
</nav>

      

    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          
            
  <nav class="d-none d-md-flex" aria-label="breadcrumb">
    <ol class="breadcrumb">
      
  
    
  
    
  
    
  
    
  

    <li class="breadcrumb-item">
      <a href="/">
        
          首页
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/">
        
          TSB 手册
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/refs/">
        
          API
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/refs/tsb/">
        
          tsb
        
      </a>
    </li>
  

      <li class="breadcrumb-item active" aria-current="page">
        Clusters
      </li>
    </ol>
  </nav>




          

          <h1>Clusters</h1>

          <div class="article-style">
            <!-- WARNING: This page is generated. Please take a look at extensions/plugin-service-bridge-api-docs/src/files/doc/page.ejs -->
<p>Each Kubernetes cluster managed by Service Bridge should be
onboarded first before configurations can be applied to the
services in the cluster. Onboarding a cluster is a two step
process. First, create a cluster object under the appropriate
tenant. Once a cluster object is created, its status field should
provide the set of join tokens that will be used by the Service
Bridge agent on the cluster to talk to Service Bridge management
plane. The second step is to deploy the Service Bridge agent on the
cluster with the join tokens and deploy Istio on the cluster. The
following example creates a cluster named c1 under the tenant
mycompany, indicating that the cluster is deployed on a network
&ldquo;vpc-01&rdquo; corresponding to the AWS VPC where it resides.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">api.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Cluster</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">c1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l">uat-demo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tokenTtl</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1h&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l">vpc-01</span><span class="w">
</span></span></span></code></pre></div><p>Note that configuration profiles such as traffic, security and
gateway groups will flow to the Bridge agents in the cluster as
long their requested cluster exists in the Service Bridge
hierarchy.</p>
<h2 id="tetrateio-api-tsb-v2-cluster">Cluster</h2>
<p>A Kubernetes cluster managing both pods and VMs.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>tokenTtl</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Duration" target="_blank" rel="noopener">google.protobuf.Duration</a> <br/> Lifetime of the tokens. Defaults to 1hr.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>network</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The network (e.g., VPC) where this cluster is present. All
clusters within the same network will be assumed to be reachable
for the purposes of multi-cluster routing. In addition, networks
marked as reachable from one another in SystemSettings will also
be used for multi-cluster routing.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>tier1Cluster</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.BoolValue" target="_blank" rel="noopener">google.protobuf.BoolValue</a> <br/> Indicates whether this cluster is hosting a tier1 gateway or not.
Tier1 clusters cannot host other gateways or workloads. Defaults
to false if not specified.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>locality</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-locality">tetrateio.api.tsb.v2.Locality</a> <br/> Deprecated. For backward compatibility, still honoured but will be ignored
in future releases, so better not to set it. Locality of the service
endpoints will be dynamically discovered by the xcp-edge</p>
<p>Location information about the cluster which can be used for routing.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>trustDomain</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Trust domain for this cluster, used for multi-cluster routing.
It must be unique for every cluster and should match the one configured in
the local control plane. This value is optional, and will be updated by the
local control plane agents. However, it is recommended to set it, if known,
so that multi-cluster routing works without having to wait for the local
control planes to update it.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>namespaceScope</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-namespacescoping">tetrateio.api.tsb.v2.NamespaceScoping</a> <br/> Configure the default scoping of namespaces in this cluster.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>state</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-cluster-state">tetrateio.api.tsb.v2.Cluster.State</a> <br/> <em>OUTPUT_ONLY</em> <br/></p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceAccount</p>
</td>
<td>
<p><a href="../../tsb/v2/team#tetrateio-api-tsb-v2-serviceaccount">tetrateio.api.tsb.v2.ServiceAccount</a> <br/> <em>OUTPUT_ONLY</em> <br/> The service account created with permissions to manage the current cluster.
The service account is not stored and it is only returned in the <code>ClusterCreate</code> response.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>installTemplate</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-cluster-installtemplate">tetrateio.api.tsb.v2.Cluster.InstallTemplate</a> <br/> <em>OUTPUT_ONLY</em> <br/> Template to be used to install this TSB cluster in the k8s cluster</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-v2-cluster-installtemplate">InstallTemplate</h3>
<p>InstallTemplate provides templates ready to be used in the ControlPlane (cluster onboard) installation.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>message</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> can provide useful information to the user</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>helm</p>
</td>
<td>
<p><a href="../../install/helm/controlplane/v1alpha1/values#tetrateio-api-install-helm-controlplane-v1alpha1-values">tetrateio.api.install.helm.controlplane.v1alpha1.Values</a> <br/> <em>OUTPUT_ONLY</em> <br/> valid values.yaml to be used with controlplane helm chart.
This field is an alpha API, so future versions could include breaking changes.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-v2-cluster-state">State</h3>
<p>State represents the cluster info learned from the onboarded cluster</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>lastSyncTime</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#google.protobuf.Timestamp" target="_blank" rel="noopener">google.protobuf.Timestamp</a> <br/> last time xcp edge(cp) synced with central(mp) in the UTC format</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>provider</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> cluster provider. Ex: GKE, EKS, AKS</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>istioVersions</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> This shows currently running istio versions in the cluster.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>xcpVersion</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> xcp-edge version which is running at the cluster</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>tsbCpVersion</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> TSB controlplane version</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>discoveredLocality</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-locality">tetrateio.api.tsb.v2.Locality</a> <br/> Discovered locality is the locality/region of the cluster as discovered by the xcp
from the k8s endpoints</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-v2-clusterstatus">ClusterStatus</h2>
<p>The status message for a cluster resource contains the set of join
tokens that should be used by Service Bridge&rsquo;s agents on the
cluster.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>tokens</p>
</td>
<td>
<p>map&lt;<a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a>, <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a>&gt; <br/> Tokens for various agents.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-v2-locality">Locality</h2>
<p>The region the cluster resides. Used for failover based routing when
configured in the workspace or global settings.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>region</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> The geographic location of the cluster.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-v2-namespacescoping">NamespaceScoping</h2>
<p>Configure the default scoping of namespaces in this cluster.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>scope</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-namespacescoping-scope">tetrateio.api.tsb.v2.NamespaceScoping.Scope</a> <br/> Default scope for namespaces in this cluster (global, local)</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>exceptions</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Namespaces to be excluded form the default scope.
If the scope is set to global, this list will contain namespaces that are
considered local. If the scope is set to local, this list will contain
namespaces that are considered global.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-v2-service-port">Port</h3>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>number</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> A valid non-negative integer port number.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Name assigned to the port.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>kubernetesNodePort</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> Indicates the node port attached to a physical deployment on a kubernetes
cluster.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-v2-workload">Workload</h2>
<p>Info about individual workload implementing the service.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>address</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Routable address of the workload.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Instance name of the workload.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>isVm</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">bool</a> <br/> Indicates whether the workload is kubernetes endpoint or vm.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>proxy</p>
</td>
<td>
<p><a href="../../tsb/v2/cluster#tetrateio-api-tsb-v2-workload-proxy">tetrateio.api.tsb.v2.Workload.Proxy</a> <br/> Proxy details.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-v2-workload-proxy">Proxy</h3>
<p>Info about proxy attached to a workload.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>controlPlaneAddress</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Address/service of control plane entity controlling the proxy
like istiod.istio-system.svc:15012.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>envoyVersion</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Envoy version of the proxy.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>istioVersion</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Istio version of the proxy.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>status</p>
</td>
<td>
<p>map&lt;<a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a>, <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a>&gt; <br/> Sync status for each xDS component.
For example:
status[&ldquo;CDS&rdquo;] = &ldquo;SYNCED&rdquo;
XDS components are: LDS, RDS, EDS CDS and SRDS.
Refer to Envoy go-control-plane ConfigStatus for possible status values
values:
<a href="https://github.com/envoyproxy/go-control-plane/blob/main/envoy/service/status/v3/csds.pb.go" target="_blank" rel="noopener">https://github.com/envoyproxy/go-control-plane/blob/main/envoy/service/status/v3/csds.pb.go</a></p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-v2-namespacescoping-scope">Scope</h3>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Number</th>
<th class="description">Description</th>
</tr>
</thead>
<tr>
<td>
<p>GLOBAL</p>
</td>
<td>
<p>0</p>
</td>
<td>
<p>Global configures namespaces in this cluster to be considered global.
Namespaces that exist in other clusters with the same name will be
considered to be the same logical namespace.</p>
</td>
</tr>
<tr>
<td>
<p>LOCAL</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>Configures local scoping for namespaces, so that namespaces with the same
name in different clusters will not be considered the same logical
namespace.</p>
</td>
</tr>
</table>

          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/tsb/refs/tsb/v2/cluster-service/" rel="next">
    <div class="meta-nav">上一页</div>
    <p>Cluster Service</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/refs/tsb/types/v2/types/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>Common Object Types</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2024-03-06</p>

          





  

<p class="edit-page">
  <a href="https://github.com/rootsongjc/cloud-native-library//edit/master/content/tsb/refs/tsb/v2/cluster.md">
    <i class="fas fa-pen pr-2"></i>编辑本页
  </a>
</p>



          




          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2024 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.5b2c48a98fb93f10e8d01cff2874cdf3.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.a04788cdfce708339d31c0685377d64e.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.af9327db0521d4a01354bfc8b77a4324.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
