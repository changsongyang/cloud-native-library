<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="DEPRECATION: The functionality provided by the IngressGateway is now provided in Gateway object, and using it is the recommended approach. The IngressGateway resource will be removed in future releases.
IngressGateway configures a workload to act as a gateway for traffic entering the mesh. The ingress gateway also provides basic API gateway functionalities such as JWT token validation and request authorization. Gateways in privileged workspaces can route to services outside the workspace while those in unprivileged workspaces can only route to services inside the workspace.
The following example declares an ingress gateway running on pods with app: gateway labels in the ns1 namespace." />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/refs/tsb/gateway/v2/ingress-gateway/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b26eb9b802629dccab300faa82cc98c7.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/refs/tsb/gateway/v2/ingress-gateway/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/refs/tsb/gateway/v2/ingress-gateway/" />
  <meta property="og:title" content="Ingress Gateway | 云原生资料库" />
  <meta property="og:description" content="DEPRECATION: The functionality provided by the IngressGateway is now provided in Gateway object, and using it is the recommended approach. The IngressGateway resource will be removed in future releases.
IngressGateway configures a workload to act as a gateway for traffic entering the mesh. The ingress gateway also provides basic API gateway functionalities such as JWT token validation and request authorization. Gateways in privileged workspaces can route to services outside the workspace while those in unprivileged workspaces can only route to services inside the workspace.
The following example declares an ingress gateway running on pods with app: gateway labels in the ns1 namespace." /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2023-10-08T16:04:10&#43;09:00">
  

  



  

  

  





  <title>Ingress Gateway | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="edc67a0da27de3f4f2529f146ccd943a" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/blog"><span>译文</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>更新</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io" target="_blank" rel="noopener"><span>Jimmy Song</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="主站" aria-label="主站"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item d-none d-lg-inline-flex">
            <a class="nav-link" href="https://github.com/rootsongjc/cloud-native-library/" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="查看源码" aria-label="查看源码" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          API
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      



  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
          <li class="level "><a href="/tsb/"><i class="fas fa-book pr-1"></i>Tetrate Service Bridge 中文文档</a></li>
    
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3d30fe67a2f2650cf7b814847b9fc266&#34;)" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/release-notes-announcements/">TSB 1.6 发行说明</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266">
    
        <i class="fa-solid fa-angle-right" id="caret-id3d30fe67a2f2650cf7b814847b9fc266"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3d30fe67a2f2650cf7b814847b9fc266">
      



  <li class="child level "><a href="/tsb/release-notes-announcements/support-policy/">TSB 支持策略</a></li>




  <li class="child level "><a href="/tsb/release-notes-announcements/feature-status/">功能状态</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3b0baa6baef458c089cd1b065e550681&#34;)" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/">概念</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681">
    
        <i class="fa-solid fa-angle-right" id="caret-id3b0baa6baef458c089cd1b065e550681"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3b0baa6baef458c089cd1b065e550681">
      



  <li class="child level "><a href="/tsb/concepts/service-mesh/">服务网格简介</a></li>




  <li class="child level "><a href="/tsb/concepts/architecture/">TSB 架构</a></li>




  <li class="child level "><a href="/tsb/concepts/security/">安全</a></li>




  <li class="child level "><a href="/tsb/concepts/traffic-management/">流量管理</a></li>




  <li class="child level "><a href="/tsb/concepts/observability/">全局可观测性</a></li>




  <li class="child level "><a href="/tsb/concepts/configuration-dataflow/">配置的数据流</a></li>




  <li class="child level "><a href="/tsb/concepts/terminology/">术语</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id455c76a6e893f5810403789454118039&#34;)" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/operators/">TSB Operator</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039">
    
        <i class="fa-solid fa-angle-right" id="caret-id455c76a6e893f5810403789454118039"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id455c76a6e893f5810403789454118039">
      



  <li class="child level "><a href="/tsb/concepts/operators/management-plane/">管理平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/control-plane/">控制平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/data-plane/">数据平面</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id9c8d5edee8fcb5c6a4202ed0aae66c57&#34;)" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/">安装与升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57">
    
        <i class="fa-solid fa-angle-right" id="caret-id9c8d5edee8fcb5c6a4202ed0aae66c57"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id9c8d5edee8fcb5c6a4202ed0aae66c57">
      



  <li class="child level "><a href="/tsb/setup/requirements-and-download/">先决条件和下载</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd25e30387a56dbb163b60a8a6b01566a&#34;)" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/self-managed/">使用 tctl 安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a">
    
        <i class="fa-solid fa-angle-right" id="caret-idd25e30387a56dbb163b60a8a6b01566a"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd25e30387a56dbb163b60a8a6b01566a">
      



  <li class="child level "><a href="/tsb/setup/self-managed/demo-installation/">演示安装</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/management-plane-installation/">管理平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/onboarding-clusters/">加入集群</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/uninstallation/">TSB 卸载</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/upgrade/">TSB 升级</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc725c0e507058bb12e15a35d994f3d67&#34;)" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/helm/">使用 Helm 安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67">
    
        <i class="fa-solid fa-angle-right" id="caret-idc725c0e507058bb12e15a35d994f3d67"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc725c0e507058bb12e15a35d994f3d67">
      



  <li class="child level "><a href="/tsb/setup/helm/helm/">TSB Helm Chart</a></li>




  <li class="child level "><a href="/tsb/setup/helm/managementplane/">管理平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/controlplane/">控制平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/dataplane/">数据平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/upgrade/">TSB Helm 升级</a></li>




  <li class="child level "><a href="/tsb/setup/helm/uninstallation/">Helm TSB 卸载</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id24a65c33a9b493c7b9671794da2e21fc&#34;)" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/">载入工作负载</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc">
    
        <i class="fa-solid fa-angle-right" id="caret-id24a65c33a9b493c7b9671794da2e21fc"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id24a65c33a9b493c7b9671794da2e21fc">
      



  <li class="child level "><a href="/tsb/setup/workload-onboarding/onboarding-vms/">使用 tctl 将虚拟机（VM）接入 TSB 服务网格</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idf57cfc61402f3e44110dd41ca87ad66d&#34;)" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/guides/">Workload Onboarding</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d">
    
        <i class="fa-solid fa-angle-right" id="caret-idf57cfc61402f3e44110dd41ca87ad66d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idf57cfc61402f3e44110dd41ca87ad66d">
      



  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/managing/">Managing Onboarded Workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/ecs-workloads/">Onboarding AWS ECS workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/on-premise-workloads/">Onboarding on-premise workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/onboarding/">Onboarding VMs</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/overview/">Overview</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/setup/">Setting Up Workload Onboarding</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/troubleshooting/">Troubleshooting Guide</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-iddaffab814adc52c72a8fca403c941062&#34;)" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/aws/">AWS</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062">
    
        <i class="fa-solid fa-angle-right" id="caret-iddaffab814adc52c72a8fca403c941062"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="iddaffab814adc52c72a8fca403c941062">
      



  <li class="child level "><a href="/tsb/setup/aws/container-marketplace/">Install Tetrate Service Bridge from the AWS Container Marketplace</a></li>




  <li class="child level "><a href="/tsb/setup/aws/vpc/">Install Tetrate Service Bridge In AWS</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idfcce4143b4bc2fa5dc77f908a4761366&#34;)" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/certificate/">证书安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366">
    
        <i class="fa-solid fa-angle-right" id="caret-idfcce4143b4bc2fa5dc77f908a4761366"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idfcce4143b4bc2fa5dc77f908a4761366">
      



  <li class="child level "><a href="/tsb/setup/certificate/certificate-setup/">证书类型</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/certificate-requirements/">内部证书要求</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/automated-certificate-management/">自动证书管理</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/tctl-connect/">Connect to TSB with tctl</a></li>




  <li class="child level "><a href="/tsb/setup/resource-planning/">资源消耗与容量规划</a></li>




  <li class="child level "><a href="/tsb/setup/components/">TSB 组件</a></li>




  <li class="child level "><a href="/tsb/setup/firewall-information/">Firewall Information</a></li>




  <li class="child level "><a href="/tsb/setup/isolation-boundaries/">Istio 隔离边界</a></li>




  <li class="child level "><a href="/tsb/setup/remote-registry/">Repository secrets</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id062c132c14e80e34ad3ed84386661dc0&#34;)" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/upgrades/">控制平面升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0">
    
        <i class="fa-solid fa-angle-right" id="caret-id062c132c14e80e34ad3ed84386661dc0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id062c132c14e80e34ad3ed84386661dc0">
      



  <li class="child level "><a href="/tsb/setup/upgrades/non-revisioned-to-revisioned/">非版本到版本的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/revisioned-to-revisioned/">已修订版本间的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/gateway-upgrade/">网关升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/cni-upgrade/">修订的 Istio CNI 和升级</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/migrate-tctl-to-helm/">Migration from tctl to Helm</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idac10970f4e8c33d6bbce355138dde5d4&#34;)" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/quickstart/">快速入门</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4">
    
        <i class="fa-solid fa-angle-right" id="caret-idac10970f4e8c33d6bbce355138dde5d4"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idac10970f4e8c33d6bbce355138dde5d4">
      



  <li class="child level "><a href="/tsb/quickstart/introduction/">快速开始简介</a></li>




  <li class="child level "><a href="/tsb/quickstart/deploy-sample-app/">部署应用程序</a></li>




  <li class="child level "><a href="/tsb/quickstart/tenant/">创建租户</a></li>




  <li class="child level "><a href="/tsb/quickstart/workspace/">创建工作区</a></li>




  <li class="child level "><a href="/tsb/quickstart/config-groups/">创建配置组</a></li>




  <li class="child level "><a href="/tsb/quickstart/permissions/">配置权限</a></li>




  <li class="child level "><a href="/tsb/quickstart/ingress-gateway/">入口网关</a></li>




  <li class="child level "><a href="/tsb/quickstart/observability/">拓扑和指标</a></li>




  <li class="child level "><a href="/tsb/quickstart/traffic-shifting/">流量转移</a></li>




  <li class="child level "><a href="/tsb/quickstart/security/">安全</a></li>




  <li class="child level "><a href="/tsb/quickstart/apps/">创建应用程序和 API</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0ec9af575b8b763b648f8c99ff17610d&#34;)" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/">操作任务</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d">
    
        <i class="fa-solid fa-angle-right" id="caret-id0ec9af575b8b763b648f8c99ff17610d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0ec9af575b8b763b648f8c99ff17610d">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id8450b6d97b7826af020d05b3b52bbecb&#34;)" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/traffic/">流量管理和迁移</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb">
    
        <i class="fa-solid fa-angle-right" id="caret-id8450b6d97b7826af020d05b3b52bbecb"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id8450b6d97b7826af020d05b3b52bbecb">
      



  <li class="child level "><a href="/tsb/howto/traffic/splitting-service-traffic-between-k8s-vms/">Splitting Service Traffic between K8S and VMs</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/migrating-vm-monoliths/">Migrating VM Monoliths to your cluster</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/load-balance/">Client Side Load Balancing</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/external-site-https/">Send traffic to an External Host using HTTPS</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/configure-multi-port-service-route/">Configure ServiceRoute for (multi-port, multi-protocol) services</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/canary-releases/">Canary Releases</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id5753a2129f592fd5880e50dd8423acaf&#34;)" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gateway/">配置网关</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf">
    
        <i class="fa-solid fa-angle-right" id="caret-id5753a2129f592fd5880e50dd8423acaf"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id5753a2129f592fd5880e50dd8423acaf">
      



  <li class="child level "><a href="/tsb/howto/gateway/unified-gateway/">统一网关</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/service-identity-propagation/">Multicluster Access Control and Identity Propagation</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/subset-based-routing-using-igw-and-service-route/">使用 IngressGateway 和 ServiceRoute 基于子集的流量路由</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-with-eastwest-gateway/">Multi-cluster traffic failover with EastWest Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-using-tier2gw/">Multi-cluster traffic routing using Tier-2 gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-shifting/">Multi cluster traffic shifting with Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/end-user-auth-keycloak/">End User Authentication with Keycloak</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/egress-gateways/">Controlling Access to External Services</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/distributed-ingress/">Distributed Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/configure-and-route-nonhttp-traffic/">Configure and route HTTP, non-HTTP (multi-protocol) and multi-port service traffic in TSB</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/application-gateway-with-openapi-annotations/">Configuring Application Gateways Using OpenAPI Annotations</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/app-ingress/">App Ingress</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3cf5ddd3a394b71d7fe2cbfced2c0084&#34;)" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gitops/">GitOps</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084">
    
        <i class="fa-solid fa-angle-right" id="caret-id3cf5ddd3a394b71d7fe2cbfced2c0084"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3cf5ddd3a394b71d7fe2cbfced2c0084">
      



  <li class="child level "><a href="/tsb/howto/gitops/gitops/">TSB 中的 GitOps</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/flux/">Configuring Flux CD for GitOps</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/argo-rollouts/">Canary Analysis &amp; Progressive Delivery Using Argo Rollout and SkyWalking</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id75d83e78f127600ecb3d62fc4fb7258f&#34;)" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/rate-limiting/">Rate Limiting Traffic</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f">
    
        <i class="fa-solid fa-angle-right" id="caret-id75d83e78f127600ecb3d62fc4fb7258f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id75d83e78f127600ecb3d62fc4fb7258f">
      



  <li class="child level "><a href="/tsb/howto/rate-limiting/internal-rate-limiting/">Enabling the Internal Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/ingress-gateway/">Rate Limiting in Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/service-to-service/">Service to service rate limiting</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tier1-gateway/">Rate limiting in Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/external-rate-limiting/">Setting Up an External Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tls-validation/">External Rate Limiting with TLS Verification</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id7cbc5bd680a87da6558c04275045cb6d&#34;)" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/authorization/">External Authorization</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d">
    
        <i class="fa-solid fa-angle-right" id="caret-id7cbc5bd680a87da6558c04275045cb6d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id7cbc5bd680a87da6558c04275045cb6d">
      



  <li class="child level "><a href="/tsb/howto/authorization/sidecar/">Service to service authorization using external authorization</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/ingress-gateway/">Configuring External Authorization in Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tls-verification/">External Authz with TLS verification</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tier1-gateway/">External Authorization in Tier-1 Gateways</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide54efaf5f496781cf3c3ef789f3781d2&#34;)" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/wasm/">Using WASM extensions</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2">
    
        <i class="fa-solid fa-angle-right" id="caret-ide54efaf5f496781cf3c3ef789f3781d2"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ide54efaf5f496781cf3c3ef789f3781d2">
      



  <li class="child level "><a href="/tsb/howto/wasm/wasm-overview/">Overview</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-extension/">TSB configuration</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-try/">Example</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/howto/waf/">Using WAF Capabilities</a></li>




  <li class="child level "><a href="/tsb/howto/hpa-using-skywalking/">HPA using SkyWalking</a></li>




  <li class="child level "><a href="/tsb/howto/service-accounts/">Leveraging TSB service accounts</a></li>




  <li class="child level "><a href="/tsb/howto/security-domains/">Creating Security Domains</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1e39d08ed50e978f0b3e95104b86a45b&#34;)" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/operations/">运维指南</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b">
    
        <i class="fa-solid fa-angle-right" id="caret-id1e39d08ed50e978f0b3e95104b86a45b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1e39d08ed50e978f0b3e95104b86a45b">
      



  <li class="child level "><a href="/tsb/operations/telemetry/alerting-guidelines/">Alerting Guidelines</a></li>




  <li class="child level "><a href="/tsb/operations/users/oidc-azure/">Azure AD as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/postgresql/">Backup and restore PostgreSQL</a></li>




  <li class="child level "><a href="/tsb/operations/users/admin-password/">Change The Administrator Password</a></li>




  <li class="child level "><a href="/tsb/operations/features/enable-config-protection/">Config Protection</a></li>




  <li class="child level "><a href="/tsb/operations/configuration-promotion/">Configuration Promotion</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-cluster-external-addresses/">Configure cluster external addresses</a></li>




  <li class="child level "><a href="/tsb/operations/configure-log-levels/">Configure Log Levels</a></li>




  <li class="child level "><a href="/tsb/operations/multiple-iam-keys/">Configure multiple IAM token validation keys</a></li>




  <li class="child level "><a href="/tsb/operations/kube-customization/">Customizing TSB Kubernetes Components</a></li>




  <li class="child level "><a href="/tsb/operations/features/edge-dns-resolution/">DNS Resolution at Edge</a></li>




  <li class="child level "><a href="/tsb/operations/vault/elasticsearch/">Elasticsearch Credentials</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/elasticsearch-role/">Elasticsearch privileges</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/wipe-elastic/">Elasticsearch wipe procedure</a></li>




  <li class="child level "><a href="/tsb/operations/features/gateway-deletion-webhook/">Gateway Deletion Hold Webhook</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-gitops/">GitOps</a></li>




  <li class="child level "><a href="/tsb/operations/graceful-connection-drain/">Graceful Connection Drain of istio-proxy</a></li>




  <li class="child level "><a href="/tsb/operations/vault/istiod-ca/">Istio CA</a></li>




  <li class="child level "><a href="/tsb/operations/features/istio-cni/">Istio CNI</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/key-metrics/">Key Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/users/configuring-ldap/">LDAP as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/lower-istio-resources/">Lower Istio Resource Consumption</a></li>




  <li class="child level "><a href="/tsb/operations/migrate-organization/">Move Data To A New Organization</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/new-relic/">New Relic integration</a></li>




  <li class="child level "><a href="/tsb/operations/vault/postgresql/">PostgreSQL Credentials</a></li>




  <li class="child level "><a href="/tsb/operations/users/roles-and-permissions/">Roles and Permissions</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/red-metrics/">Sidecar RED Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/features/streaming-log/">Streaming Service Logs</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/telemetry-architecture/">Telemetry Architecture</a></li>




  <li class="child level "><a href="/tsb/operations/features/tier1-in-app-cluster/">Tier1 Gateway in an App Cluster</a></li>




  <li class="child level "><a href="/tsb/operations/users/user-synchronization/">User Synchronization</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1545fcd4f1609551da975e2c615ad00b&#34;)" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/troubleshooting/">问题排查</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b">
    
        <i class="fa-solid fa-angle-right" id="caret-id1545fcd4f1609551da975e2c615ad00b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1545fcd4f1609551da975e2c615ad00b">
      



  <li class="child level "><a href="/tsb/troubleshooting/troubleshooting/">Basic troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/cluster-onboarding/">Cluster onboarding troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/configuration-status/">Configuration status troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/identify-underperforming-services/">Identify Underperforming Services</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/gateway-troubleshooting/">Ingress Gateway troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/maximum-header-size-exceed/">Maximum Header Size Exceed</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/multiple-transfer-encoding-chunked/">Multiple Transfer Encoding Chunked</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/tsb-ui-metrics/">UI Metrics Troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/debug-container/">Using The Debug Container</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0a05687586ea2ab4204a2561c9f624d0&#34;)" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/reference/">参考</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0">
    
        <i class="fa-solid fa-angle-right" id="caret-id0a05687586ea2ab4204a2561c9f624d0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0a05687586ea2ab4204a2561c9f624d0">
      



  <li class="child level "><a href="/tsb/reference/k8s-api/tsb-crds-gen/"></a></li>




  <li class="child level "><a href="/tsb/reference/cli/">Getting Started</a></li>




  <li class="child level "><a href="/tsb/reference/grpc-api/guide/">gRPC API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/samples/httpbin/">Installing httpbin</a></li>




  <li class="child level "><a href="/tsb/reference/samples/opa/">Installing Open Policy Agent</a></li>




  <li class="child level "><a href="/tsb/reference/samples/sleep-service/">Installing sleep</a></li>




  <li class="child level "><a href="/tsb/reference/rest-api/guide/">REST API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/tctl/">tctl</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/apply/">tctl apply</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/collect/">tctl collect</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/completion/">tctl completion</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/config/">tctl config</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/delete/">tctl delete</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/edit/">tctl edit</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/experimental/">tctl experimental</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/get/">tctl get</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/install/">tctl install</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/login/">tctl login</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/ui/">tctl ui</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/validate/">tctl validate</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/version/">tctl version</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/whoami/">tctl whoami</a></li>




  <li class="child level "><a href="/tsb/reference/k8s-api/guide/">TSB CRD Reference</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/workload-entry-annotations/">WorkloadEntry Annotations</a></li>




  <li class="child level "><a href="/tsb/reference/yaml-api/guide/">YAML API Guide</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide176d22749d73536e461f4fe09cdb7ae&#34;)" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/refs/">API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae">
    
    <i class="fa-solid fa-angle-down" id="caret-ide176d22749d73536e461f4fe09cdb7ae"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="ide176d22749d73536e461f4fe09cdb7ae">
      



  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/access-bindings/">Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/agent-configuration/">Agent Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/api/">API</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/api-access-bindings/">API Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application/">Application</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/application-access-bindings/">Application Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application-service/">Application Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/approvals-service/">Approvals Service</a></li>




  <li class="child level "><a href="/tsb/refs/audit/v1/audit/">Audit</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/auth/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/aws/v1alpha1/aws/">AWS Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/aws/v1alpha1/aws/">AWS Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster-service/">Cluster Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster/">Clusters</a></li>




  <li class="child level "><a href="/tsb/refs/install/common/common-config/">Common Configuration Objects</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/types/v2/types/">Common Object Types</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/condition/">Condition</a></li>




  <li class="child level "><a href="/tsb/refs/install/controlplane/v1alpha1/spec/">Control Plane</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/namespaced-name/">Core types</a></li>




  <li class="child level "><a href="/tsb/refs/install/dataplane/v1alpha1/spec/">Data Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/eastwest-gateway/">East/West Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/egress-gateway/">Egress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway/">Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/gateway-access-bindings/">Gateway Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-common/">Gateway Common Configuration Messages</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-group/">Gateway Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-service/">Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/hostinfo/">Host Info</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oauth-service/">IAM (OAuth)</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oidc-service/">IAM (OIDC)</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/info/">Info</a></li>




  <li class="child level active"><a href="/tsb/refs/tsb/gateway/v2/ingress-gateway/">Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/common/v1alpha1/common/">install/helm/common/v1alpha1/common.proto</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/controlplane/v1alpha1/values/">install/helm/controlplane/v1alpha1/values.proto</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/istio-gateway-direct/">Istio Direct Mode Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/istio-security-direct/">Istio Direct Mode Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/istio-traffic-direct/">Istio Direct Mode Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/istio-internal-access-bindings/">Istio Internal Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-istiointernal-direct/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istiointernal-service/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-internal-group/">Istio internal Group</a></li>




  <li class="child level "><a href="/tsb/refs/istio.io/api/operator/v1alpha1/operator/">IstioOperator Options</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/jwt/v1alpha1/jwt/">JWT Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/jwt/v1alpha1/jwt/">JWT Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/jwt-issuer/">JWT Issuer</a></li>




  <li class="child level "><a href="/tsb/refs/install/kubernetes/k8s/">Kubernetes</a></li>




  <li class="child level "><a href="/tsb/refs/install/managementplane/v1alpha1/spec/">Management Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric/">Metric</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric-service/">Metric Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/onboarding-configuration/">Onboarding Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/v1alpha1/policy/">Onboarding Policy</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/openapi-extensions/">OpenAPI Extensions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization/">Organization</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/organization-access-bindings/">Organization Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-setting/">Organization Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-service/">Organizations Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/permissions/">Permissions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/permissions-service/">Permissions Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/binding/">Policy Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/policy-service/">Policy Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/service/">Registered Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role/">Role</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role-service/">Role Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/security-access-bindings/">Security Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-group/">Security Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-service/">Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-setting/">Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/lookup-service/">Service Registry Lookup Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/service-route/">Service Route</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/service-security-setting/">Service Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/registration-service/">Servive Registry Registration Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source/">Source</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status/">Status</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status-service/">Status Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team/">Teams and Users</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team-service/">Teams Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source-service/">Telemetry Source Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant/">Tenant</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/tenant-access-bindings/">Tenant Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-service/">Tenant Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-setting/">Tenant Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/tier1-gateway/">Tier1 Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/traffic-access-bindings/">Traffic Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-group/">Traffic Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-service/">Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-setting/">Traffic Setting</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/config/v1alpha1/transport-security/">Transport layer security config</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/waf-settings/">WAF Settings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-extension/">WASM Extension</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-service/">WasmExtension Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/runtime/v1alpha1/registration/">Workload Auto Registration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/workload-configuration/">Workload Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/v1alpha1/identity/">Workload Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/registration/">Workload Registration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace/">Workspace</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/workspace-access-bindings/">Workspace Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-service/">Workspace Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-setting/">Workspace Setting</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd067b9f805c069b82516c7d6bafcc0b1&#34;)" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/knowledge-base/">知识库和 FAQ</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1">
    
        <i class="fa-solid fa-angle-right" id="caret-idd067b9f805c069b82516c7d6bafcc0b1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd067b9f805c069b82516c7d6bafcc0b1">
      



  <li class="child level "><a href="/tsb/knowledge-base/gitops/">Service Mesh and GitOps</a></li>




  <li class="child level "><a href="/tsb/knowledge-base/faq/">TSB 常见问题解答</a></li>

      
        </ul>
      
    

    
      </div>
    

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#tetrateio-api-tsb-gateway-v2-httprouting">HttpRouting</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-httprule">HttpRule</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-httpserver">HttpServer</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-ingressgateway">IngressGateway</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-route">Route</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-tcpserver">TCPServer</a></li>
    <li><a href="#tetrateio-api-tsb-gateway-v2-tlspassthroughserver">TLSPassthroughServer</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-12 mt-1">
    <img src="/img/wechat.webp" alt="image" title="Jimmy Song的微信公众号"/>
    <p class="text-center pt-1">扫码联系站长</p>
    
    
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4029167986768912"
     crossorigin="anonymous"></script>
     <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4029167986768912"
       data-ad-slot="6856371908"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
    <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>Ingress Gateway</h1>

          <div class="article-style">
            <!-- WARNING: This page is generated. Please take a look at extensions/plugin-service-bridge-api-docs/src/files/doc/page.ejs -->
<p>DEPRECATION: The functionality provided by the <code>IngressGateway</code> is now provided in <code>Gateway</code> object, and
using it is the recommended approach. The <code>IngressGateway</code> resource will be removed in future releases.</p>
<p><code>IngressGateway</code> configures a workload to act as a gateway for
traffic entering the mesh. The ingress gateway also provides basic
API gateway functionalities such as JWT token validation
and request authorization. Gateways in privileged
workspaces can route to services outside the workspace while those
in unprivileged workspaces can only route to services inside the
workspace.</p>
<p>The following example declares an ingress gateway running on pods
with <code>app: gateway</code> labels in the <code>ns1</code> namespace. The gateway
exposes a host <code>bookinfo.com</code> on https port 9443 and http port 9090.
The port 9090 is configured to receive plaintext traffic and send a
redirect to the https port 9443 (site-wide HTTP -&gt; HTTPS redirection).
At port 9443, TLS is terminated using the certificates in the Kubernetes
secret <code>bookinfo-certs</code>. Clients are authenticated using JWT
tokens, whose keys are obtained from the OIDC provider <code>www.googleapis.com</code>.
The request is then authorized by an the user&rsquo;s authorization engine
hosted at <code>https://company.com/authz</code> before being forwarded to
the <code>productpage</code> service in the backend.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">gateway.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IngressGateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workloadSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">ns1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo-plaintext</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9090</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">routing</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">redirect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">authority</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">redirectCode</span><span class="p">:</span><span class="w"> </span><span class="m">301</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l">https</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l">SIMPLE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo-certs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">authentication</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">jwt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">issuer</span><span class="p">:</span><span class="w"> </span><span class="l">https://accounts.google.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">jwksUri</span><span class="p">:</span><span class="w"> </span><span class="l">https://www.googleapis.com/oauth2/v3/certs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">issuer</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;auth.mycompany.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">jwksUri</span><span class="p">:</span><span class="w"> </span><span class="l">https://auth.mycompany.com/oauth2/jwks</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">authorization</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">external</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">https://company.com/authz</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">includeRequestHeaders</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">Authorization</span><span class="w"> </span><span class="c"># forwards the header to the authorization service.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">routing</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">route</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/productpage.ns1.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rateLimiting</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">settings</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># Ratelimit at 10 requests/hour for clients with a remote address of 1.2.3.4 </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">dimensions</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">remoteAddress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="m">1.2.3.4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">limit</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">requestsPerUnit</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l">HOUR</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># Ratelimit at 50 requests/minute for every unique value in the user-agent header</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">dimensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">header</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">user-agent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">limit</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">requestsPerUnit</span><span class="p">:</span><span class="w"> </span><span class="m">50</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l">MINUTE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># Ratelimit at 100 requests/second for every unique client remote address</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="c"># with the HTTP requests having a GET method and the path prefix of /productpage</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">dimensions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">remoteAddress</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;*&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">header</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;:path&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l">/productpage</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">header</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;:method&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">exact</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;GET&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">limit</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">requestsPerUnit</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">unit</span><span class="p">:</span><span class="w"> </span><span class="l">SECOND</span><span class="w">
</span></span></span></code></pre></div><p>If the <code>productpage.ns1</code> service on Kubernetes has a <code>ServiceRoute</code>
with multiple subsets and weights, the traffic will be split across
the subsets accordingly.</p>
<p>The following example illustrates defining non-HTTP servers (based
on TCP) with TLS termination. Here, kafka.myorg.internal uses non-HTTP
protocol and listens on port 9000. The clients have to connect with TLS
with the SNI <code>kafka.myorg.internal</code>. The TLS is terminated at the gateway
and the traffic is routed to <code>kafka.infra.svc.cluster.local:8000</code>.</p>
<p>If subsets are defined in the <code>ServiceRoute</code> referencing
<code>kafka.infra.svc.cluster.local</code> service, then it is also considered
while routing.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">gateway.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IngressGateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workloadSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">ns1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">kafka-gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">kafka.myorg.internal</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l">SIMPLE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l">kafka-cred</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">route</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">kafka.infra.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8000</span><span class="w">
</span></span></span></code></pre></div><p>The following example customizes the <code>Extensions</code> to enable
the execution of the specified WasmExtensions list and details
custom properties for the execution of each extension.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">gateway.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IngressGateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workloadSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">ns1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">extension</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">fqn</span><span class="p">:</span><span class="w"> </span><span class="l">hello-world</span><span class="w"> </span><span class="c"># fqn of imported extensions in TSB</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">routing</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">route</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/productpage.ns1.svc.cluster.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">`IngressGateway` also allows you to apply ModSecurity/Coraza compatible Web</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">Application Firewall rules to traffic passing through the gateway.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">```yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">gateway.xcp.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IngressGateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">waf-gw</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">ns1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">waf-gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">waf</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">Include @recommended-conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">SecResponseBodyAccess Off</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">Include @owasp_crs/*.conf</span><span class="w">
</span></span></span></code></pre></div><h2 id="tetrateio-api-tsb-gateway-v2-httprouting">HttpRouting</h2>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>corsPolicy</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-corspolicy">tetrateio.api.tsb.gateway.v2.CorsPolicy</a> <br/> Cross origin resource request policy settings for all routes.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>rules</p>
</td>
<td>
<p>List of <a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-httprule">tetrateio.api.tsb.gateway.v2.HttpRule</a> <br/> <em>REQUIRED</em> <br/> HTTP routes.</p>
</td>
<td>
<p>repeated = {<br/>  min_items: <code>1</code><br/>}<br/></p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-httprule">HttpRule</h2>
<p>A single HTTP rule.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>match</p>
</td>
<td>
<p>List of <a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-httpmatchcondition">tetrateio.api.tsb.gateway.v2.HttpMatchCondition</a> <br/> One or more match conditions (OR-ed).</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>modify</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-httpmodifyaction">tetrateio.api.tsb.gateway.v2.HttpModifyAction</a> <br/> One or more mutations to be performed before forwarding. Includes typical modifications to be
done on a single request like URL rewrite, host rewrite, headers to add/remove/append.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>route</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-route">tetrateio.api.tsb.gateway.v2.Route</a> <em><sup><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank">oneof</a> route_or_redirect</sup></em> <br/> Forward the request to the specified destination(s). One of route or redirect must be specified.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>redirect</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-redirect">tetrateio.api.tsb.gateway.v2.Redirect</a> <em><sup><a href="https://developers.google.com/protocol-buffers/docs/proto3#oneof" target="_blank">oneof</a> route_or_redirect</sup></em> <br/> Redirect the request to a different host or URL or both. One of route or redirect must be specified.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-httpserver">HttpServer</h2>
<p>An HTTP server exposed in an ingress gateway.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> A name assigned to the server. The name will be visible in the generated metrics. The name must be
unique across all servers in a gateway.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> The port where the server is exposed. Two servers with different protocols (HTTP and HTTPS) should not
share the same port. Note that port 15443 is reserved for internal use.</p>
</td>
<td>
<p>uint32 = {<br/>  not_in: <code>0,15443</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>hostname</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Hostname with which the service can be expected to be accessed by clients.
<strong>NOTE:</strong> The hostname must be unique across all gateways in the cluster in order for multicluster routing to work.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>tls</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-servertlssettings">tetrateio.api.tsb.gateway.v2.ServerTLSSettings</a> <br/> TLS certificate info. If omitted, the gateway will expose a plain text HTTP server.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>authentication</p>
</td>
<td>
<p><a href="../../../tsb/auth/v2/auth#tetrateio-api-tsb-auth-v2-authentication">tetrateio.api.tsb.auth.v2.Authentication</a> <br/> Configuration to authenticate clients.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>authorization</p>
</td>
<td>
<p><a href="../../../tsb/auth/v2/auth#tetrateio-api-tsb-auth-v2-authorization">tetrateio.api.tsb.auth.v2.Authorization</a> <br/> Configuration to authorize a request.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>routing</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-httprouting">tetrateio.api.tsb.gateway.v2.HttpRouting</a> <br/> <em>REQUIRED</em> <br/> Routing rules associated with HTTP traffic to this service.</p>
</td>
<td>
<p>message = {<br/>  required: <code>true</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>rateLimiting</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-ratelimiting">tetrateio.api.tsb.gateway.v2.RateLimiting</a> <br/> Configuration for rate limiting requests. This configuration is namespaced to a particular HttpServer</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-ingressgateway">IngressGateway</h2>
<p><code>IngressGateway</code> configures a workload to act as an ingress gateway into the mesh.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>workloadSelector</p>
</td>
<td>
<p><a href="../../../tsb/types/v2/types#tetrateio-api-tsb-types-v2-workloadselector">tetrateio.api.tsb.types.v2.WorkloadSelector</a> <br/> <em>REQUIRED</em> <br/> Specify the gateway workloads (pod labels and Kubernetes
namespace) under the gateway group that should be configured with
this gateway. There can be only one gateway for a workload selector in a namespace.</p>
</td>
<td>
<p>message = {<br/>  required: <code>true</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>http</p>
</td>
<td>
<p>List of <a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-httpserver">tetrateio.api.tsb.gateway.v2.HttpServer</a> <br/> One or more HTTP or HTTPS servers exposed by the gateway. The
server exposes configuration for TLS termination, request
authentication/authorization, HTTP routing, etc.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>tlsPassthrough</p>
</td>
<td>
<p>List of <a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-tlspassthroughserver">tetrateio.api.tsb.gateway.v2.TLSPassthroughServer</a> <br/> One or more TLS servers exposed by the gateway. The server
does not terminate TLS and exposes config for SNI based routing.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>tcp</p>
</td>
<td>
<p>List of <a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-tcpserver">tetrateio.api.tsb.gateway.v2.TCPServer</a> <br/> One or more non-HTTP and non-passthrough servers which use TCP
based protocols. This server also exposes configuration for terminating TLS</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>extension</p>
</td>
<td>
<p>List of <a href="../../../tsb/types/v2/types#tetrateio-api-tsb-types-v2-wasmextensionattachment">tetrateio.api.tsb.types.v2.WasmExtensionAttachment</a> <br/> Extensions specifies all the WasmExtensions assigned to this IngressGateway
with the specific configuration for each extension. This custom configuration
will override the one configured globally to the extension.
Each extension has a global configuration including enablement and priority
that will condition the execution of the assigned extensions.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>waf</p>
</td>
<td>
<p><a href="../../../tsb/security/v2/waf_settings#tetrateio-api-tsb-security-v2-wafsettings">tetrateio.api.tsb.security.v2.WAFSettings</a> <br/> WAF settings to be enabled for traffic passing through the HttpServer.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>configGenerationMetadata</p>
</td>
<td>
<p><a href="../../../tsb/types/v2/types#tetrateio-api-tsb-types-v2-configgenerationmetadata">tetrateio.api.tsb.types.v2.ConfigGenerationMetadata</a> <br/> Metadata values that will be add into the Istio generated configurations.
When using YAML APIs like<code>tctl</code> or <code>gitops</code>, put them into the <code>metadata.labels</code> or
<code>metadata.annotations</code> instead.
This field is only necessary when using gRPC APIs directly.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-route">Route</h2>
<p>One or more destinations in a local/remote cluster for the given request.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>host</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> The destination service in <code>&lt;namespace&gt;/&lt;fqdn&gt;</code> format for
<code>IngressGateway</code> resources. For <code>Tier1Gateway</code> resources, the
destination must be in <code>&lt;clusterName&gt;/&lt;namespace&gt;/&lt;fqdn&gt;</code> format,
where cluster name corresponds to a cluster name created in the
management plane. The <code>fqdn</code> must be the fully qualified name of
the destination service in a cluster.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> The port on the service to forward the request to. Omit only if
the destination service has only one port. When used for routing
from Tier1 gateways, the port specified here will be used only if
the Tier1 gateway is doing TLS passthrough.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-tcpserver">TCPServer</h2>
<p>A TCP server exposed in an ingress gateway. A TCP server may be used for any TCP based protocol.
This is also used for the special case of a non-HTTP protocol requiring TLS termination at the gateway</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> A name assigned to the server. The name will be visible in the generated metrics. The name must be
unique across all HTTP, TLS passthrough and TCP servers in a gateway.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> The port where the server is exposed. Two servers with different protocols can share the same port
only when both of them use TLS (either terminated at the gateway or pass-through)</p>
</td>
<td>
<p>uint32 = {<br/>  not_in: <code>0,15443</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>hostname</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Hostname to identify the service. When TLS is configured, clients have to use this as
the Server Name Indication (SNI) for the TLS connection. When TLS is not configured (opaque TCP),
this is used to identify the service traffic for defining routing configs. Usually, this is
configured as the DNS name of the service. For instance, if clients access a zookeeper cluster
as <code>zk-1.myorg.internal</code> then the hostname could be specified as <code>zk-1.myorg.internal</code>. This
also helps easier identification in the configs.</p>
<p>This is also used in multicluster routing. In the previous example, clients within the mesh
can also use <code>zk-1.myorg.internal</code> to access this service (provided authorization policy allows it)</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>tls</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/gateway_common#tetrateio-api-tsb-gateway-v2-servertlssettings">tetrateio.api.tsb.gateway.v2.ServerTLSSettings</a> <br/> TLS certificate info to terminate the TLS connection</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>route</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-route">tetrateio.api.tsb.gateway.v2.Route</a> <br/> Forward the connection to the specified destination.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-gateway-v2-tlspassthroughserver">TLSPassthroughServer</h2>
<p>A TLS server exposed in an ingress gateway. For TLS servers the gateways don&rsquo;t terminate
connections and use SNI based routing.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> A name assigned to the server. The name will be visible in the generated metrics. The name must be
unique across all HTTP, TCP and TLS servers in a gateway.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>port</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> The port where the server is exposed. Two servers with different protocols (HTTP and HTTPS) should not
share the same port. Note that port 15443 is reserved for internal use.</p>
</td>
<td>
<p>uint32 = {<br/>  not_in: <code>0,15443</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>hostname</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Hostname with which the service can be expected to be accessed by clients.
Routing will be done based on SNI matches for this hostname.
<strong>NOTE:</strong> The hostname must be unique across all gateways in the cluster in order for multicluster routing to work.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>route</p>
</td>
<td>
<p><a href="../../../tsb/gateway/v2/ingress_gateway#tetrateio-api-tsb-gateway-v2-route">tetrateio.api.tsb.gateway.v2.Route</a> <br/> <em>REQUIRED</em> <br/> Forward the connection to the specified destination.</p>
</td>
<td>
<p>message = {<br/>  required: <code>true</code><br/>}<br/></p>
</td>
</tr>
</table>

          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/tsb/refs/tsb/v2/info/" rel="next">
    <div class="meta-nav">上一页</div>
    <p>Info</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/refs/install/helm/common/v1alpha1/common/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>install/helm/common/v1alpha1/common.proto</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2023-10-08</p>

          



          


  
  
  

  

  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2023 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.46271ef31da3f018e9cd1b59300aa265.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.24983018b0e5661cd5fe1822254286ea.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
