<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="Services in the registry represent logically a service that can be running in different compute platforms and different locations. The same service could be running on different Kubernetes clusters at the same time, on VMS, etc. A service in the registry represents an aggregated and logical view for all those individual services, and provides high-level features such as aggregated metrics.
Port Port exposed by a service. Registration RPC will complete the instances field by assigning the physical services FQNs.
Field Description Validation Rule number
uint32 REQUIRED A valid non-negative integer port number.
uint32 = { lte: 65535 gte: 1}" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/refs/tsb/registry/v2/service/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.2c25b2854625561177dfe556e1065970.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/refs/tsb/registry/v2/service/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/refs/tsb/registry/v2/service/" />
  <meta property="og:title" content="Registered Service | 云原生资料库" />
  <meta property="og:description" content="Services in the registry represent logically a service that can be running in different compute platforms and different locations. The same service could be running on different Kubernetes clusters at the same time, on VMS, etc. A service in the registry represents an aggregated and logical view for all those individual services, and provides high-level features such as aggregated metrics.
Port Port exposed by a service. Registration RPC will complete the instances field by assigning the physical services FQNs.
Field Description Validation Rule number
uint32 REQUIRED A valid non-negative integer port number.
uint32 = { lte: 65535 gte: 1}" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2024-03-06T15:17:26&#43;08:00">
  

  



  

  

  





  <title>Registered Service | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io/blog/" target="_blank" rel="noopener"><span>博客</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://cloudnative.to/" target="_blank" rel="noopener"><span>社区</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="首页" aria-label="首页"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          tsb
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#tetrateio-api-tsb-registry-v2-port">Port</a></li>
    <li><a href="#tetrateio-api-tsb-registry-v2-service">Service</a>
      <ul>
        <li><a href="#tetrateio-api-tsb-registry-v2-service-metricconfig">MetricConfig</a></li>
        <li><a href="#tetrateio-api-tsb-registry-v2-service-servicedeployment">ServiceDeployment</a></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-registry-v2-subset">Subset</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#tetrateio-api-tsb-registry-v2-servicetype">ServiceType</a></li>
    <li><a href="#tetrateio-api-tsb-registry-v2-state">State</a></li>
  </ul>
</nav>

      

    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          
            
  <nav class="d-none d-md-flex" aria-label="breadcrumb">
    <ol class="breadcrumb">
      
  
    
  
    
  
    
  
    
  

    <li class="breadcrumb-item">
      <a href="/">
        
          首页
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/">
        
          TSB 手册
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/refs/">
        
          API
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/refs/tsb/">
        
          tsb
        
      </a>
    </li>
  

      <li class="breadcrumb-item active" aria-current="page">
        Registered Service
      </li>
    </ol>
  </nav>




          

          <h1>Registered Service</h1>

          <div class="article-style">
            <!-- WARNING: This page is generated. Please take a look at extensions/plugin-service-bridge-api-docs/src/files/doc/page.ejs -->
<p>Services in the registry represent logically a service that can be running in different compute
platforms and different locations. The same service could be running on different Kubernetes
clusters at the same time, on VMS, etc.
A service in the registry represents an aggregated and logical view for all those individual
services, and provides high-level features such as aggregated metrics.</p>
<h2 id="tetrateio-api-tsb-registry-v2-port">Port</h2>
<p>Port exposed by a service.
Registration RPC will complete the instances field by assigning the physical services FQNs.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>number</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">uint32</a> <br/> <em>REQUIRED</em> <br/> A valid non-negative integer port number.</p>
</td>
<td>
<p>uint32 = {<br/>  lte: <code>65535</code><br/>  gte: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> Name assigned to the port.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceDeployments</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> The list of FQNs of the instances that expose this port</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-registry-v2-service">Service</h2>
<p>A service in the registry that represents an aggregated and logical view for all those individual
services, and provides high-level features such as aggregated metrics.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>fqn</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> Fully-qualified name of the resource. This field is read-only.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>displayName</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> User friendly name for the resource.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>etag</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The etag for the resource. This field is automatically computed and must be sent
on every update to the resource to prevent concurrent modifications.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>description</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> A description of the resource.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>shortName</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>REQUIRED</em> <br/> Short name for the service, used to uniquely identify it within the organization.</p>
</td>
<td>
<p>string = {<br/>  min_len: <code>1</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>hostnames</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The hostnames by which this service is accessed. Can correspond to the hostname of
an internal service or that ones of a virtual host on a gateway.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>ports</p>
</td>
<td>
<p>List of <a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-port">tetrateio.api.tsb.registry.v2.Port</a> <br/> The set of ports on which this service is exposed.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>subsets</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> Deprecated. Use subset_deployments instead.
Subset denotes a specific version of a service. By default the &lsquo;version&rsquo;
label is used to designate subsets of a workload.
Known subsets for the service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceType</p>
</td>
<td>
<p><a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-servicetype">tetrateio.api.tsb.registry.v2.ServiceType</a> <br/> <em>REQUIRED</em> <br/> Internal/external/load balancer service.</p>
</td>
<td>
<p>enum = {<br/>  defined_only: <code>true</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>externalAddresses</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> For kubernetes services of type load balancer, this field contains the list of lb hostnames or
IPs assigned to the service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>state</p>
</td>
<td>
<p><a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-state">tetrateio.api.tsb.registry.v2.State</a> <br/> <em>REQUIRED</em> <br/> State of the service (registered/observed/controlled)</p>
</td>
<td>
<p>enum = {<br/>  defined_only: <code>true</code><br/>}<br/></p>
</td>
</tr>
<tr>
<td>
<p>metrics</p>
</td>
<td>
<p>List of <a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-service-metricconfig">tetrateio.api.tsb.registry.v2.Service.MetricConfig</a> <br/> <em>OUTPUT_ONLY</em> <br/> Services may expose different metrics.
For example, a regular service may expose the usual red metrics for incoming requests.
Services running in multiple clusters, may provide different aggregation levels, such as
aggregation by cluster, by subset, etc.
This list provides a complete list of all the aggregation keys that are available for this
particular service.
For example, a service that has instances in multiple clusters could provide the following
metrics:</p>
<ul>
<li>global:        <em>|productpage|bookinfo|</em>|*</li>
<li>v1:            v1|productpage|bookinfo|<em>|</em></li>
<li>v1 (cluster1): v1|productpage|bookinfo|cluster1|*</li>
</ul>
<p>This is only available for Observed and Controlled services.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceDeployments</p>
</td>
<td>
<p>List of <a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-service-servicedeployment">tetrateio.api.tsb.registry.v2.Service.ServiceDeployment</a> <br/> <em>OUTPUT_ONLY</em> <br/> List of the existing deployments for this service.
This is only available for internal and load balancer services and correspond to physical services
in the onboarded clusters.
This field is read-only.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>subsetDeployments</p>
</td>
<td>
<p>List of <a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-subset">tetrateio.api.tsb.registry.v2.Subset</a> <br/> <em>OUTPUT_ONLY</em> <br/> Subset denotes a specific version of a service. By default the &lsquo;version&rsquo;
label is used to designate subsets of a workload.
Known subsets for the service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>canonicalName</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The canonical name of the service defined by user</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>spiffeIds</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> List of SPIFFE identities used by the workloads of the service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-registry-v2-service-metricconfig">MetricConfig</h3>
<p>Configuration for metric aggregation</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> A user friendly name for this metric.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>description</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> A helpful description of what this metric represents.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>aggregationKey</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> An aggregation key that can be queried to get metrics for this service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>type</p>
</td>
<td>
<p><a href="../../../tsb/registry/v2/service#tetrateio-api-tsb-registry-v2-service-metricconfig-metrictype">tetrateio.api.tsb.registry.v2.Service.MetricConfig.MetricType</a> <br/> Type of the metric (single_instance/aggregated).</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceDeployment</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The FQN of the service deployment related with this metric. Will be empty for group metrics.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>parentMetric</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> The name of the metric config that aggregates this one in a higher level.
For example, for a subset in a cluster metric, this field has the name of the metric of the same subset
across the clusters</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h3 id="tetrateio-api-tsb-registry-v2-service-servicedeployment">ServiceDeployment</h3>
<p>ServiceDeployment represents the physical service in a cluster.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>fqn</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> Fully-qualified name of the instance. This field is read-only.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>source</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> Source of the instance. This field is read-only.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-registry-v2-subset">Subset</h2>
<p>Subset exposed by a service.
Registration RPC will complete the instances field by assigning the physical services FQNs.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th class="description">Description</th>
<th>Validation Rule</th>
</tr>
</thead>
<tr>
<td>
<p>name</p>
</td>
<td>
<p><a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> A valid subset name of a service.</p>
</td>
<td>
<p>–</p>
</td>
</tr>
<tr>
<td>
<p>serviceDeployments</p>
</td>
<td>
<p>List of <a href="https://developers.google.com/protocol-buffers/docs/proto3#scalar" target="_blank" rel="noopener">string</a> <br/> <em>OUTPUT_ONLY</em> <br/> The list of FQNs of the service deployments that expose this subset</p>
</td>
<td>
<p>–</p>
</td>
</tr>
</table>
<h4 id="tetrateio-api-tsb-registry-v2-service-metricconfig-metrictype">MetricType</h4>
<p>MetricType denotes the relation of a metrics with a physical service instance.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Number</th>
<th class="description">Description</th>
</tr>
</thead>
<tr>
<td>
<p>INVALID</p>
</td>
<td>
<p>0</p>
</td>
<td>
</td>
</tr>
<tr>
<td>
<p>SINGLE_INSTANCE</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>A single instance metric config belongs to an specific physical service instance.</p>
</td>
</tr>
<tr>
<td>
<p>SUBSET</p>
</td>
<td>
<p>2</p>
</td>
<td>
<p>A subset metric config represents subsets across clusters or hostnames across clusters.</p>
</td>
</tr>
<tr>
<td>
<p>GLOBAL</p>
</td>
<td>
<p>3</p>
</td>
<td>
<p>A global metric config represents all the physical services.</p>
</td>
</tr>
<tr>
<td>
<p>ENDPOINT</p>
</td>
<td>
<p>4</p>
</td>
<td>
<p>An endpoint metric config represents an endpoint across clusters.</p>
</td>
</tr>
<tr>
<td>
<p>ENDPOINT_INSTANCE</p>
</td>
<td>
<p>5</p>
</td>
<td>
<p>An endpoint instance metric config represents an endpoint in a specific cluster.</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-registry-v2-servicetype">ServiceType</h2>
<p>ServiceType denotes the exposition of a service in the mesh.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Number</th>
<th class="description">Description</th>
</tr>
</thead>
<tr>
<td>
<p>INVALID_TYPE</p>
</td>
<td>
<p>0</p>
</td>
<td>
</td>
</tr>
<tr>
<td>
<p>INTERNAL</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>A regular service that is not directly exposed to the outside world.</p>
</td>
</tr>
<tr>
<td>
<p>LOADBALANCER</p>
</td>
<td>
<p>2</p>
</td>
<td>
<p>A load balancer service running only the proxy as the workload.</p>
</td>
</tr>
<tr>
<td>
<p>MESH_EXTERNAL</p>
</td>
<td>
<p>3</p>
</td>
<td>
<p>A mesh external service.</p>
</td>
</tr>
</table>
<h2 id="tetrateio-api-tsb-registry-v2-state">State</h2>
<p>State denotes how deep is the knowledge of a service by the mesh. Meaning that if a service can be controlled,
observed or none of these.</p>
<div class="generated-table"></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Number</th>
<th class="description">Description</th>
</tr>
</thead>
<tr>
<td>
<p>INVALID_STATE</p>
</td>
<td>
<p>0</p>
</td>
<td>
</td>
</tr>
<tr>
<td>
<p>EXTERNAL</p>
</td>
<td>
<p>1</p>
</td>
<td>
<p>An external service is a service that is known, but that cannot be observed (we can't get metrics for it)
and cannot be controlled.</p>
</td>
</tr>
<tr>
<td>
<p>OBSERVED</p>
</td>
<td>
<p>2</p>
</td>
<td>
<p>An observed service is a known service that we can have metrics for. For example, a service running the
Skywalking agents.</p>
</td>
</tr>
<tr>
<td>
<p>CONTROLLED</p>
</td>
<td>
<p>3</p>
</td>
<td>
<p>A controlled service is a service that is part of the mesh and has a proxy we can configure.</p>
</td>
</tr>
</table>

          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/tsb/refs/tsb/rbac/v2/policy-service/" rel="next">
    <div class="meta-nav">上一页</div>
    <p>Policy Service</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/refs/tsb/rbac/v2/role/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>Role</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2024-03-06</p>

          





  

<p class="edit-page">
  <a href="https://github.com/rootsongjc/cloud-native-library//edit/master/content/tsb/refs/tsb/registry/v2/service.md">
    <i class="fas fa-pen pr-2"></i>编辑本页
  </a>
</p>



          




          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2024 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.5b2c48a98fb93f10e8d01cff2874cdf3.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.a04788cdfce708339d31c0685377d64e.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.af9327db0521d4a01354bfc8b77a4324.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
