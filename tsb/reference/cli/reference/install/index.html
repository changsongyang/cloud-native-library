<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="Generates install manifests and applies it to a cluster
Options
-h, --help help for install Options inherited from parent commands
-c, --config string Path to the config file to use. Can also be specified via TCTL_CONFIG env variable. This flag takes precedence over the env variable. --debug Print debug messages for all requests and responses --disable-tctl-version-warn If set, disable the outdated tctl version warning. Can also be specified via TCTL_DISABLE_VERSION_WARN env variable. -p, --profile string Use specific profile (default &#34;default&#34;) tctl install cluster-certs Generate cluster certs for securely communicating with the management plane
tctl install cluster-certs [flags] Examples
# Retrieve cluster certs tctl install cluster-certs --cluster &lt;cluster-name&gt;&#34; Options" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/reference/cli/reference/install/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.2c25b2854625561177dfe556e1065970.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hud79519197c2c386463324871b321d647_6772_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/reference/cli/reference/install/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/reference/cli/reference/install/" />
  <meta property="og:title" content="tctl install | 云原生资料库" />
  <meta property="og:description" content="Generates install manifests and applies it to a cluster
Options
-h, --help help for install Options inherited from parent commands
-c, --config string Path to the config file to use. Can also be specified via TCTL_CONFIG env variable. This flag takes precedence over the env variable. --debug Print debug messages for all requests and responses --disable-tctl-version-warn If set, disable the outdated tctl version warning. Can also be specified via TCTL_DISABLE_VERSION_WARN env variable. -p, --profile string Use specific profile (default &#34;default&#34;) tctl install cluster-certs Generate cluster certs for securely communicating with the management plane
tctl install cluster-certs [flags] Examples
# Retrieve cluster certs tctl install cluster-certs --cluster &lt;cluster-name&gt;&#34; Options" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2024-03-06T15:17:26&#43;08:00">
  

  



  

  

  





  <title>tctl install | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io/blog/" target="_blank" rel="noopener"><span>博客</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://cloudnative.to/" target="_blank" rel="noopener"><span>社区</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="首页" aria-label="首页"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          CLI
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      
  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#tctl-install-cluster-certs">tctl install cluster-certs</a></li>
    <li><a href="#tctl-install-cluster-service-account">tctl install cluster-service-account</a></li>
    <li><a href="#tctl-install-demo">tctl install demo</a></li>
    <li><a href="#tctl-install-image-sync">tctl install image-sync</a></li>
    <li><a href="#tctl-install-manifest">tctl install manifest</a></li>
    <li><a href="#tctl-install-manifest-cluster-operators">tctl install manifest cluster-operators</a></li>
    <li><a href="#tctl-install-manifest-control-plane-secrets">tctl install manifest control-plane-secrets</a></li>
    <li><a href="#tctl-install-manifest-management-plane-operator">tctl install manifest management-plane-operator</a></li>
    <li><a href="#tctl-install-manifest-management-plane-secrets">tctl install manifest management-plane-secrets</a></li>
  </ul>
</nav>

      

    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          
            
  <nav class="d-none d-md-flex" aria-label="breadcrumb">
    <ol class="breadcrumb">
      
  
    
  
    
  
    
  
    
  

    <li class="breadcrumb-item">
      <a href="/">
        
          首页
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/">
        
          TSB 手册
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/reference/">
        
          参考
        
      </a>
    </li>
  

    <li class="breadcrumb-item">
      <a href="/tsb/reference/cli/">
        
          CLI
        
      </a>
    </li>
  

      <li class="breadcrumb-item active" aria-current="page">
        tctl install
      </li>
    </ol>
  </nav>




          

          <h1>tctl install</h1>

          <div class="article-style">
            <p>Generates install manifests and applies it to a cluster</p>
<p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help   help for install
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-cluster-certs">tctl install cluster-certs</h2>
<p>Generate cluster certs for securely communicating with the management plane</p>
<pre tabindex="0"><code>tctl install cluster-certs [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Retrieve cluster certs
tctl install cluster-certs --cluster &lt;cluster-name&gt;&#34;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --cluster string           The name of the cluster to generate certs for.
  -x, --context string           The kube context for the management plane cluster.
  -n, --controlplane string      The namespace in the cluster that the control plane is installed in. (default &#34;istio-system&#34;)
  -h, --help                     help for cluster-certs
  -k, --kubeconfig string        The kubeconfig file for the management plane cluster. Must be able to manage secrets and cert-manager custom resources.
  -m, --managementplane string   The namespace that the management plane is installed in. (default &#34;tsb&#34;)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-cluster-service-account">tctl install cluster-service-account</h2>
<p>Generate a cluster service account key for securely communicating with the management plane</p>
<pre tabindex="0"><code>tctl install cluster-service-account [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Create a cluster service account key
tctl install cluster-service-account --cluster &lt;cluster-name&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --cluster string   The name of the cluster to generate certs for.
      --create-cluster   Create a cluster object in Service Bridge if it doesn&#39;t exist (default true)
  -h, --help             help for cluster-service-account
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-demo">tctl install demo</h2>
<p>Install a batteries-included Service Bridge into a single Kubernetes cluster.</p>
<p><strong>Synopsis</strong></p>
<p>Install a batteries-included Service Bridge into a single Kubernetes cluster.</p>
<p>The CLI will be automatically preconfigured to connect to the installed Service Bridge as an Administrator.
The configuration will be saved in a profile named after the configured Kubernetes context, and the Bridge
connection configuration and the user configuration will be named after the Kubernetes cluster where Service
Bridge has been installed.</p>
<p>The Kubernetes context to deploy to is read from the environment&rsquo;s configured kubeconfig. See
<a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener">https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/</a> for more information on
kubeconfig.</p>
<pre tabindex="0"><code>tctl install demo [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install demo --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --admin-password string    The password for the superuser. By default a secure password will be auto-generated.
      --cluster string           The name of the demo cluster. (default &#34;demo&#34;)
  -h, --help                     help for demo
  -o, --org string               The organization to configure (default &#34;tetrate&#34;)
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --timeout duration         Timeout to login to the management plane. (default 30s)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-image-sync">tctl install image-sync</h2>
<p>Copy images from Tetrate&rsquo;s registry to another registry</p>
<pre tabindex="0"><code>tctl install image-sync [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Sync latest images
tctl install image-sync --username &lt;username&gt; --apikey &lt;apikey&gt; --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>      --accept-eula         Accept the EULA. This should be used in CI/CD pipelines where users have already read and accepted the EULA.
  -k, --apikey string       Tetrate Container Registry API Key [required]. Can also be
                            specified via stdin or TCTL_IMAGE_SYNC_APIKEY env variable. This flag
                            takes precedence over the env variable.
      --apikey-stdin        Tetrate Container Registry API Key specified from stdin.
                            Can also be specified via flag or TCTL_IMAGE_SYNC_APIKEY env variable. This takes precedence over
                            the flag and env variable.
      --create-repository   If set to false, disable the creation of the ECR repository if it doesn&#39;t exists. (default true)
  -h, --help                help for image-sync
      --just-print          If set, the image list will be printed to stdout, but images will not be synchronized
      --parallel            If set, synchronize images in parallel. Set --parallel=false to synchronize images serially (default true)
      --raw                 DEPRECATED, WILL BE REMOVED IN 1.7. If set, in conjunction with just-print, the output will only contain the image list (default true)
  -r, --registry string     The user-provided registry where images are pushed [required]
      --show-eula           Show the EULA.
      --skip-demo-images    If set to true, don&#39;t download demo images like Postgres.
      --skip-optional       If set to true, don&#39;t download optional third-party images like (kubegres or kube-rbac-proxy).
  -u, --username string     Tetrate Container Registry username [required]. Can also be
                            specified via TCTL_IMAGE_SYNC_USERNAME env variable. This flag
                            takes precedence over the env variable.
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest">tctl install manifest</h2>
<p>Output the Kubernetes manifests for installing Service Bridge to stdout</p>
<p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help   help for manifest
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-cluster-operators">tctl install manifest cluster-operators</h2>
<p>Output the Kubernetes manifests for installing the cluster operators (control plane and data plane) to stdout.</p>
<pre tabindex="0"><code>tctl install manifest cluster-operators [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install manifest cluster-operators --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -n, --controlplane string      The namespace to deploy the control plane and its operator into. (default &#34;istio-system&#34;)
  -d, --dataplane string         The namespace to deploy the data plane and its operator into. (default &#34;istio-gateway&#34;)
      --exclude-controlplane     Don&#39;t render the control plane operator.
      --exclude-dataplane        Don&#39;t render the data plane operator.
  -h, --help                     help for cluster-operators
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-control-plane-secrets">tctl install manifest control-plane-secrets</h2>
<p>Output the Kubernetes manifests for installing the control plane to stdout, including the relevant secrets.</p>
<p><strong>Synopsis</strong></p>
<p>This command provides an easy way to generate correctly formatted secrets for installing the control plane. It should be run as part of installation or upgrade of Service Bridge to ensure the correct secret format for the new version.</p>
<p>Manifests are printed to stdout so that they can be committed to source control or applied directly to a Kubernetes cluster depending on deployment preference.</p>
<p>It automatically generates tokens for the control plane to communicate with the management plane. Therefore, you must be logged into the management plane with the correct permissions to create the tokens. This token generation is safe to run multiple times and does not revoke previously created tokens.</p>
<pre tabindex="0"><code>tctl install manifest control-plane-secrets [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Output secrets with required flags
tctl install manifest control-plane-secrets \
	--cluster-service-account &#34;$(cat cluster-service-account-key.jwk)&#34; \
	--cluster demo

# Output secrets with default values for required flags
tctl install manifest control-plane-secrets -y

# Load overlay custom resource from flag
tctl install manifest control-plane -y -f control-cr.yaml

# Load overlay custom resource from stdin
cat control-cr.yaml | tctl install manifest control-plane -y -f-

# Apply directly to Kubernetes
tctl install manifest control-plane-secrets -y | kubectl apply -f-
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -y, --allow-defaults                           Use default values for required fields that aren&#39;t provided. DO NOT USE IN PRODUCTION
      --cluster string                           The name of the cluster on which this control plane will be installed [required]. This is what Service Bridge will refer to the cluster as. (default &#34;default&#34;)
      --cluster-service-account string           The cluster service account key JWK used to authenticate with the management plane
      --controlplane string                      The namespace of the control plane (default &#34;istio-system&#34;)
      --create-cluster                           Create a cluster object in Service Bridge if it doesn&#39;t exist (default true)
      --elastic-ca-certificate string            The CA certificate to validate Elasticsearch connections when Elasticsearch is configured to present a self-signed certificate.
      --elastic-password string                  The password Service Bridge will use to communicate with Elasticsearch.
      --elastic-username string                  The username Service Bridge will use to communicate with Elasticsearch.
  -f, --file string                              The custom resource file describing the control plane.
  -h, --help                                     help for control-plane-secrets
      --management-plane-ca-certificate string   The CA certificate to validate TSB management plane APIs if the management plane is configured to present a self-signed certificate.
      --redis-password string                    Password for Redis which is used as the backend for the rate limit server in the control plane
      --redis-tls                                Enable TLS between the rate limit Redis client and server.
      --redis-tls-ca-cert string                 The CA certificate to validate the TLS connection between the rate limit Redis client and server.
      --redis-tls-client-cert string             The client certificate to be used when establishing a mTLS connection between the rate limit Redis client and server.
      --redis-tls-client-key string              The client key to be used when establishing a mTLS connection between the rate limit Redis client and server.
      --xcp-central-ca-bundle string             The CA bundle to validate the certificates presented by XCP Central.
      --xcp-certs string                         The kubernetes secret yaml string for the cluster cert used to securely communicate with the management plane. Can be generated from &#34;tctl install cluster-certs&#34;.
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-management-plane-operator">tctl install manifest management-plane-operator</h2>
<p>Output the Kubernetes manifests for installing the management plane operator to stdout.</p>
<pre tabindex="0"><code>tctl install manifest management-plane-operator [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
tctl install manifest management-plane-operator --registry &lt;registry-location&gt;
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -h, --help                     help for management-plane-operator
  -m, --managementplane string   The namespace to deploy the management plane and its operator into. (default &#34;tsb&#34;)
  -r, --registry string          The docker registry with the service bridge images [required]
      --set stringArray          set values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
      --set-file stringArray     set values from respective files specified via the command line (can specify multiple or separate values with commas: key1=path1,key2=path2)
      --set-string stringArray   set STRING values on the command line (can specify multiple or separate values with commas: key1=val1,key2=val2)
  -f, --values strings           specify values in a YAML file or a URL (can specify multiple)
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre><h2 id="tctl-install-manifest-management-plane-secrets">tctl install manifest management-plane-secrets</h2>
<p>Output the Kubernetes manifests for installing the management plane to stdout, including the relevant secrets.</p>
<p><strong>Synopsis</strong></p>
<p>This command provides an easy way to generate correctly formatted secrets for installing the management plane. It should be run as part of installation or upgrade of Service Bridge to ensure the correct secret format for the new version.</p>
<p>Manifests are printed to stdout so that they can be committed to source control or applied directly to a Kubernetes cluster depending on deployment preference.</p>
<p>If certificates are not passed to the command, it will automatically generate self-signed certficates using the hostname and organization you provide. If hostname and organization are also not passed, you can opt for self signed certs through ManagementPlane CR.
It is not recommended to use self-signed certificates in production.</p>
<pre tabindex="0"><code>tctl install manifest management-plane-secrets [flags]
</code></pre><p><strong>Examples</strong></p>
<pre tabindex="0"><code>
# Output secrets for all required flags
tctl install manifest management-plane-secrets \
    --elastic-password tsb-elastic-password \
    --elastic-username tsb \
    --ldap-bind-dn 
</code></pre><p><strong>Options</strong></p>
<pre tabindex="0"><code>  -y, --allow-defaults                        Use default values for required fields that aren&#39;t provided. DO NOT USE IN PRODUCTION.
      --elastic-ca-certificate string         The CA certificate to validate Elasticsearch connections when Elasticsearch is configured to present a self-signed certificate
      --elastic-password string               The password Service Bridge will use to communicate with Elasticsearch [required] (default &#34;tsb-elastic-password&#34;)
      --elastic-username string               The username Service Bridge will use to communicate with Elasticsearch [required] (default &#34;tsb&#34;)
  -f, --file string                           The custom resource file describing the management plane
  -h, --help                                  help for management-plane-secrets
      --ldap-bind-dn string                   The DN of the user Service Bridge will use to connect to the LDAP server (default &#34;cn=admin,dc=tetrate,dc=io&#34;)
      --ldap-bind-password string             The password Service Bridge will use to connect to the LDAP server (default &#34;admin&#34;)
      --ldap-ca-certificate string            The CA certificate to validate LDAP connections when LDAP is configured to present a self-signed certificate
      --managementplane string                The namespace to deploy the management plane and secrets into (default &#34;tsb&#34;)
      --oidc-client-secret string             The client secret used to connect to the OIDC server
      --oidc-device-client-secret string      The client secret used for device auth with the OIDC server
      --postgres-ca-certificate string        The CA certificate to validate Postgres connections when Postgres is configured to present a self-signed certificate
      --postgres-client-certificate string    The client certificate that Service Bridge needs to provide to Postgres when Postgres is configured to mutually authenticate
      --postgres-client-key string            The client private key that Service Bridge needs to sign requests to Postgres with when Postgres is configured to mutually authenticate
      --postgres-password string              The password Service Bridge will use to communicate with Postgres [required] (default &#34;tsb-postgres-password&#34;)
      --postgres-username string              The username Service Bridge will use to communicate with Postgres [required] (default &#34;tsb&#34;)
      --teamsync-azure-client-secret string   The client secret used to connect to Azure AD to synchronize users and groups
      --tsb-admin-password string             The Service Bridge admin password [required]
      --tsb-certs-secret                      Automatically install management plane tsb-certs for secure communication with control planes. This is an alternate to setting self-signed cert issuer in the ManagementPlane CR, so set this to false if ManagementPlane CR is configured for self signed certs (default true)
      --tsb-server-certificate string         The certificate for the Service Bridge API server to present [required]
      --tsb-server-key string                 The private key for the Service Bridge API server to sign requests with [required]
      --tsb-tls-hostname string               A comma-separated list of hostnames and IPs for self-signed certificate generation if Service Bridge server certificate/key pair is not provided (default &#34;demo.tsb.tetrate.io&#34;)
      --tsb-tls-org string                    The organization for self-signed certificate generation if Service Bridge server certificate/key pair is not provided (default &#34;tetrate&#34;)
      --xcp-certs                             Automatically install management plane certs for secure communication with control planes. Assumes cert-manager is installed in the management plane cluster
</code></pre><p><strong>Options inherited from parent commands</strong></p>
<pre tabindex="0"><code>  -c, --config string               Path to the config file to use. Can also be
                                    specified via TCTL_CONFIG env variable. This flag
                                    takes precedence over the env variable.
      --debug                       Print debug messages for all requests and responses
      --disable-tctl-version-warn   If set, disable the outdated tctl version warning. Can also be
                                    specified via TCTL_DISABLE_VERSION_WARN env variable.
  -p, --profile string              Use specific profile (default &#34;default&#34;)
</code></pre>
          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/tsb/reference/cli/reference/get/" rel="next">
    <div class="meta-nav">上一页</div>
    <p>tctl get</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/reference/cli/reference/login/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>tctl login</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2024-03-06</p>

          





  

<p class="edit-page">
  <a href="https://github.com/rootsongjc/cloud-native-library//edit/master/content/tsb/reference/cli/reference/install.md">
    <i class="fas fa-pen pr-2"></i>编辑本页
  </a>
</p>



          




          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2024 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.5b2c48a98fb93f10e8d01cff2874cdf3.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.a04788cdfce708339d31c0685377d64e.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.af9327db0521d4a01354bfc8b77a4324.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
