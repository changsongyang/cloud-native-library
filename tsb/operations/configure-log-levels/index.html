<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="This document describes how to adjust log levels for the different components in TSB, including platform components, Envoy sidecars and ingress gateways at runtime, as well as the procedure to view the logs.
Before you get started make sure:
✓ You have installed and configured TSB properly.
✓ You have installed and configured kubectl to access the application cluster.
For the example commands we assume that you have some applications deployed in a helloworld namespace.
:::warning TSB Components Produce Lots of Logs Be careful enabling debug logging across all of TSB&rsquo;s scopes for extended periods of time - TSB components produces a lot of logs!" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/operations/configure-log-levels/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b26eb9b802629dccab300faa82cc98c7.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/operations/configure-log-levels/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/operations/configure-log-levels/" />
  <meta property="og:title" content="Configure Log Levels | 云原生资料库" />
  <meta property="og:description" content="This document describes how to adjust log levels for the different components in TSB, including platform components, Envoy sidecars and ingress gateways at runtime, as well as the procedure to view the logs.
Before you get started make sure:
✓ You have installed and configured TSB properly.
✓ You have installed and configured kubectl to access the application cluster.
For the example commands we assume that you have some applications deployed in a helloworld namespace.
:::warning TSB Components Produce Lots of Logs Be careful enabling debug logging across all of TSB&rsquo;s scopes for extended periods of time - TSB components produces a lot of logs!" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2023-11-14T21:02:13&#43;08:00">
  

  



  

  

  





  <title>Configure Log Levels | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="ec93b24b8dcf758ca22fde37e29be5c4" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io/blog/" target="_blank" rel="noopener"><span>原创</span></a>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/blog"><span>译文</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>更新</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io" target="_blank" rel="noopener"><span>Jimmy Song</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="主站" aria-label="主站"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item d-none d-lg-inline-flex">
            <a class="nav-link" href="https://github.com/rootsongjc/cloud-native-library/" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="查看源码" aria-label="查看源码" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          运维指南
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      



  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
          <li class="level "><a href="/tsb/"><i class="fas fa-book pr-1"></i>Tetrate Service Bridge 手册</a></li>
    
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3d30fe67a2f2650cf7b814847b9fc266&#34;)" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/release-notes-announcements/">TSB 1.6 发行说明</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266">
    
        <i class="fa-solid fa-angle-right" id="caret-id3d30fe67a2f2650cf7b814847b9fc266"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3d30fe67a2f2650cf7b814847b9fc266">
      



  <li class="child level "><a href="/tsb/release-notes-announcements/support-policy/">TSB 支持策略</a></li>




  <li class="child level "><a href="/tsb/release-notes-announcements/feature-status/">功能状态</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3b0baa6baef458c089cd1b065e550681&#34;)" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/">概念</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681">
    
        <i class="fa-solid fa-angle-right" id="caret-id3b0baa6baef458c089cd1b065e550681"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3b0baa6baef458c089cd1b065e550681">
      



  <li class="child level "><a href="/tsb/concepts/service-mesh/">服务网格简介</a></li>




  <li class="child level "><a href="/tsb/concepts/architecture/">TSB 架构</a></li>




  <li class="child level "><a href="/tsb/concepts/security/">安全</a></li>




  <li class="child level "><a href="/tsb/concepts/traffic-management/">流量管理</a></li>




  <li class="child level "><a href="/tsb/concepts/observability/">全局可观测性</a></li>




  <li class="child level "><a href="/tsb/concepts/configuration-dataflow/">配置的数据流</a></li>




  <li class="child level "><a href="/tsb/concepts/terminology/">术语</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id455c76a6e893f5810403789454118039&#34;)" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/operators/">TSB Operator</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039">
    
        <i class="fa-solid fa-angle-right" id="caret-id455c76a6e893f5810403789454118039"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id455c76a6e893f5810403789454118039">
      



  <li class="child level "><a href="/tsb/concepts/operators/management-plane/">管理平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/control-plane/">控制平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/data-plane/">数据平面</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id9c8d5edee8fcb5c6a4202ed0aae66c57&#34;)" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/">安装与升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57">
    
        <i class="fa-solid fa-angle-right" id="caret-id9c8d5edee8fcb5c6a4202ed0aae66c57"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id9c8d5edee8fcb5c6a4202ed0aae66c57">
      



  <li class="child level "><a href="/tsb/setup/requirements-and-download/">先决条件和下载</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd25e30387a56dbb163b60a8a6b01566a&#34;)" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/self-managed/">使用 tctl 安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a">
    
        <i class="fa-solid fa-angle-right" id="caret-idd25e30387a56dbb163b60a8a6b01566a"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd25e30387a56dbb163b60a8a6b01566a">
      



  <li class="child level "><a href="/tsb/setup/self-managed/demo-installation/">演示安装</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/management-plane-installation/">管理平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/onboarding-clusters/">加入集群</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/uninstallation/">TSB 卸载</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/upgrade/">TSB 升级</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc725c0e507058bb12e15a35d994f3d67&#34;)" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/helm/">使用 Helm 安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67">
    
        <i class="fa-solid fa-angle-right" id="caret-idc725c0e507058bb12e15a35d994f3d67"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc725c0e507058bb12e15a35d994f3d67">
      



  <li class="child level "><a href="/tsb/setup/helm/helm/">TSB Helm Chart</a></li>




  <li class="child level "><a href="/tsb/setup/helm/managementplane/">管理平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/controlplane/">控制平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/dataplane/">数据平面安装</a></li>




  <li class="child level "><a href="/tsb/setup/helm/upgrade/">TSB Helm 升级</a></li>




  <li class="child level "><a href="/tsb/setup/helm/uninstallation/">Helm TSB 卸载</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id24a65c33a9b493c7b9671794da2e21fc&#34;)" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/">载入工作负载</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc">
    
        <i class="fa-solid fa-angle-right" id="caret-id24a65c33a9b493c7b9671794da2e21fc"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id24a65c33a9b493c7b9671794da2e21fc">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idf57cfc61402f3e44110dd41ca87ad66d&#34;)" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/guides/">工作负载上线</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d">
    
        <i class="fa-solid fa-angle-right" id="caret-idf57cfc61402f3e44110dd41ca87ad66d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idf57cfc61402f3e44110dd41ca87ad66d">
      



  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/overview/">概览</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/setup/">设置工作负载上线</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/onboarding/">载入虚拟机</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/managing/">管理已登记的工作负载</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/troubleshooting/">故障排除指南</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/on-premise-workloads/">在本地载入工作负载</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/ecs-workloads/">载入 AWS ECS 工作负载</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/workload-onboarding/onboarding-vms/">使用 tctl 将虚拟机（VM）接入 TSB 服务网格</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-iddaffab814adc52c72a8fca403c941062&#34;)" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/aws/">AWS</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062">
    
        <i class="fa-solid fa-angle-right" id="caret-iddaffab814adc52c72a8fca403c941062"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="iddaffab814adc52c72a8fca403c941062">
      



  <li class="child level "><a href="/tsb/setup/aws/container-marketplace/">Install Tetrate Service Bridge from the AWS Container Marketplace</a></li>




  <li class="child level "><a href="/tsb/setup/aws/vpc/">Install Tetrate Service Bridge In AWS</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idfcce4143b4bc2fa5dc77f908a4761366&#34;)" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/certificate/">证书安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366">
    
        <i class="fa-solid fa-angle-right" id="caret-idfcce4143b4bc2fa5dc77f908a4761366"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idfcce4143b4bc2fa5dc77f908a4761366">
      



  <li class="child level "><a href="/tsb/setup/certificate/certificate-setup/">证书类型</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/certificate-requirements/">内部证书要求</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/automated-certificate-management/">自动证书管理</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/tctl-connect/">使用 tctl 连接到 TSB</a></li>




  <li class="child level "><a href="/tsb/setup/resource-planning/">资源消耗与容量规划</a></li>




  <li class="child level "><a href="/tsb/setup/components/">TSB 组件</a></li>




  <li class="child level "><a href="/tsb/setup/firewall-information/">防火墙信息</a></li>




  <li class="child level "><a href="/tsb/setup/isolation-boundaries/">Istio 隔离边界</a></li>




  <li class="child level "><a href="/tsb/setup/remote-registry/">仓库机密</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id062c132c14e80e34ad3ed84386661dc0&#34;)" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/upgrades/">控制平面升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0">
    
        <i class="fa-solid fa-angle-right" id="caret-id062c132c14e80e34ad3ed84386661dc0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id062c132c14e80e34ad3ed84386661dc0">
      



  <li class="child level "><a href="/tsb/setup/upgrades/non-revisioned-to-revisioned/">非版本到版本的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/revisioned-to-revisioned/">已修订版本间的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/gateway-upgrade/">网关升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/cni-upgrade/">修订的 Istio CNI 和升级</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/migrate-tctl-to-helm/">从 tctl 迁移到 Helm</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idac10970f4e8c33d6bbce355138dde5d4&#34;)" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/quickstart/">快速入门</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4">
    
        <i class="fa-solid fa-angle-right" id="caret-idac10970f4e8c33d6bbce355138dde5d4"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idac10970f4e8c33d6bbce355138dde5d4">
      



  <li class="child level "><a href="/tsb/quickstart/introduction/">快速开始简介</a></li>




  <li class="child level "><a href="/tsb/quickstart/deploy-sample-app/">部署应用程序</a></li>




  <li class="child level "><a href="/tsb/quickstart/tenant/">创建租户</a></li>




  <li class="child level "><a href="/tsb/quickstart/workspace/">创建工作区</a></li>




  <li class="child level "><a href="/tsb/quickstart/config-groups/">创建配置组</a></li>




  <li class="child level "><a href="/tsb/quickstart/permissions/">配置权限</a></li>




  <li class="child level "><a href="/tsb/quickstart/ingress-gateway/">入口网关</a></li>




  <li class="child level "><a href="/tsb/quickstart/observability/">拓扑和指标</a></li>




  <li class="child level "><a href="/tsb/quickstart/traffic-shifting/">流量转移</a></li>




  <li class="child level "><a href="/tsb/quickstart/security/">安全</a></li>




  <li class="child level "><a href="/tsb/quickstart/apps/">创建应用程序和 API</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0ec9af575b8b763b648f8c99ff17610d&#34;)" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/">操作任务</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d">
    
        <i class="fa-solid fa-angle-right" id="caret-id0ec9af575b8b763b648f8c99ff17610d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0ec9af575b8b763b648f8c99ff17610d">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id8450b6d97b7826af020d05b3b52bbecb&#34;)" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/traffic/">流量管理和迁移</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb">
    
        <i class="fa-solid fa-angle-right" id="caret-id8450b6d97b7826af020d05b3b52bbecb"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id8450b6d97b7826af020d05b3b52bbecb">
      



  <li class="child level "><a href="/tsb/howto/traffic/splitting-service-traffic-between-k8s-vms/">Splitting Service Traffic between K8S and VMs</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/migrating-vm-monoliths/">Migrating VM Monoliths to your cluster</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/load-balance/">Client Side Load Balancing</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/external-site-https/">Send traffic to an External Host using HTTPS</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/configure-multi-port-service-route/">Configure ServiceRoute for (multi-port, multi-protocol) services</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/canary-releases/">Canary Releases</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id5753a2129f592fd5880e50dd8423acaf&#34;)" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gateway/">配置网关</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf">
    
        <i class="fa-solid fa-angle-right" id="caret-id5753a2129f592fd5880e50dd8423acaf"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id5753a2129f592fd5880e50dd8423acaf">
      



  <li class="child level "><a href="/tsb/howto/gateway/unified-gateway/">统一网关</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/service-identity-propagation/">Multicluster Access Control and Identity Propagation</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/subset-based-routing-using-igw-and-service-route/">使用 IngressGateway 和 ServiceRoute 基于子集的流量路由</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-with-eastwest-gateway/">Multi-cluster traffic failover with EastWest Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/shared-ingress/">共享入口网关</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-using-tier2gw/">Multi-cluster traffic routing using Tier-2 gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-shifting/">Multi cluster traffic shifting with Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/end-user-auth-keycloak/">End User Authentication with Keycloak</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/egress-gateways/">Controlling Access to External Services</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/distributed-ingress/">Distributed Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/configure-and-route-nonhttp-traffic/">Configure and route HTTP, non-HTTP (multi-protocol) and multi-port service traffic in TSB</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/application-gateway-with-openapi-annotations/">Configuring Application Gateways Using OpenAPI Annotations</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/app-ingress/">App Ingress</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3cf5ddd3a394b71d7fe2cbfced2c0084&#34;)" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gitops/">GitOps</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084">
    
        <i class="fa-solid fa-angle-right" id="caret-id3cf5ddd3a394b71d7fe2cbfced2c0084"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3cf5ddd3a394b71d7fe2cbfced2c0084">
      



  <li class="child level "><a href="/tsb/howto/gitops/gitops/">TSB 中的 GitOps</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/flux/">Configuring Flux CD for GitOps</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/argo-rollouts/">Canary Analysis &amp; Progressive Delivery Using Argo Rollout and SkyWalking</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id75d83e78f127600ecb3d62fc4fb7258f&#34;)" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/rate-limiting/">Rate Limiting Traffic</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f">
    
        <i class="fa-solid fa-angle-right" id="caret-id75d83e78f127600ecb3d62fc4fb7258f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id75d83e78f127600ecb3d62fc4fb7258f">
      



  <li class="child level "><a href="/tsb/howto/rate-limiting/internal-rate-limiting/">Enabling the Internal Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/ingress-gateway/">Rate Limiting in Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/service-to-service/">Service to service rate limiting</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tier1-gateway/">Rate limiting in Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/external-rate-limiting/">Setting Up an External Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tls-validation/">External Rate Limiting with TLS Verification</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id7cbc5bd680a87da6558c04275045cb6d&#34;)" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/authorization/">External Authorization</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d">
    
        <i class="fa-solid fa-angle-right" id="caret-id7cbc5bd680a87da6558c04275045cb6d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id7cbc5bd680a87da6558c04275045cb6d">
      



  <li class="child level "><a href="/tsb/howto/authorization/sidecar/">Service to service authorization using external authorization</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/ingress-gateway/">Configuring External Authorization in Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tls-verification/">External Authz with TLS verification</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tier1-gateway/">External Authorization in Tier-1 Gateways</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide54efaf5f496781cf3c3ef789f3781d2&#34;)" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/wasm/">Using WASM extensions</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2">
    
        <i class="fa-solid fa-angle-right" id="caret-ide54efaf5f496781cf3c3ef789f3781d2"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ide54efaf5f496781cf3c3ef789f3781d2">
      



  <li class="child level "><a href="/tsb/howto/wasm/wasm-overview/">Overview</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-extension/">TSB configuration</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-try/">Example</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/howto/waf/">Using WAF Capabilities</a></li>




  <li class="child level "><a href="/tsb/howto/hpa-using-skywalking/">HPA using SkyWalking</a></li>




  <li class="child level "><a href="/tsb/howto/service-accounts/">Leveraging TSB service accounts</a></li>




  <li class="child level "><a href="/tsb/howto/security-domains/">Creating Security Domains</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1e39d08ed50e978f0b3e95104b86a45b&#34;)" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/operations/">运维指南</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b">
    
    <i class="fa-solid fa-angle-down" id="caret-id1e39d08ed50e978f0b3e95104b86a45b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id1e39d08ed50e978f0b3e95104b86a45b">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id8e92565e3b3366d8d23e9eb1b389016f&#34;)" href="#id8e92565e3b3366d8d23e9eb1b389016f" aria-expanded="false" aria-controls="id8e92565e3b3366d8d23e9eb1b389016f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/operations/features/">特性</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id8e92565e3b3366d8d23e9eb1b389016f" aria-expanded="false" aria-controls="id8e92565e3b3366d8d23e9eb1b389016f">
    
        <i class="fa-solid fa-angle-right" id="caret-id8e92565e3b3366d8d23e9eb1b389016f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id8e92565e3b3366d8d23e9eb1b389016f">
      



  <li class="child level "><a href="/tsb/operations/features/tier1-in-app-cluster/">在应用集群中启用 Tier1 网关</a></li>




  <li class="child level "><a href="/tsb/operations/features/streaming-log/">流式服务日志</a></li>




  <li class="child level "><a href="/tsb/operations/features/istio-cni/">Istio CNI</a></li>




  <li class="child level "><a href="/tsb/operations/features/gateway-deletion-webhook/">网关删除保持 Webhook</a></li>




  <li class="child level "><a href="/tsb/operations/features/enable-config-protection/">配置保护</a></li>




  <li class="child level "><a href="/tsb/operations/features/edge-dns-resolution/">Edge 处的 DNS 解析</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-gitops/">GitOps</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-cluster-external-addresses/">配置集群外部地址</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc9514e2e2be8039598cdd4fe247adb97&#34;)" href="#idc9514e2e2be8039598cdd4fe247adb97" aria-expanded="false" aria-controls="idc9514e2e2be8039598cdd4fe247adb97" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/operations/vault/">Vault 客户端集成</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc9514e2e2be8039598cdd4fe247adb97" aria-expanded="false" aria-controls="idc9514e2e2be8039598cdd4fe247adb97">
    
        <i class="fa-solid fa-angle-right" id="caret-idc9514e2e2be8039598cdd4fe247adb97"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc9514e2e2be8039598cdd4fe247adb97">
      



  <li class="child level "><a href="/tsb/operations/vault/elasticsearch/">Elasticsearch Credentials</a></li>




  <li class="child level "><a href="/tsb/operations/vault/istiod-ca/">Istio CA</a></li>




  <li class="child level "><a href="/tsb/operations/vault/postgresql/">PostgreSQL Credentials</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/operations/configuration-promotion/">配置推广</a></li>




  <li class="child level "><a href="/tsb/operations/graceful-connection-drain/">优雅关闭 istio-proxy 连接</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/alerting-guidelines/">Alerting Guidelines</a></li>




  <li class="child level "><a href="/tsb/operations/users/oidc-azure/">Azure AD as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/postgresql/">Backup and restore PostgreSQL</a></li>




  <li class="child level "><a href="/tsb/operations/users/admin-password/">Change The Administrator Password</a></li>




  <li class="child level active"><a href="/tsb/operations/configure-log-levels/">Configure Log Levels</a></li>




  <li class="child level "><a href="/tsb/operations/multiple-iam-keys/">Configure multiple IAM token validation keys</a></li>




  <li class="child level "><a href="/tsb/operations/kube-customization/">Customizing TSB Kubernetes Components</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/elasticsearch-role/">Elasticsearch privileges</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/wipe-elastic/">Elasticsearch wipe procedure</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/key-metrics/">Key Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/users/configuring-ldap/">LDAP as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/lower-istio-resources/">Lower Istio Resource Consumption</a></li>




  <li class="child level "><a href="/tsb/operations/migrate-organization/">Move Data To A New Organization</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/new-relic/">New Relic integration</a></li>




  <li class="child level "><a href="/tsb/operations/users/roles-and-permissions/">Roles and Permissions</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/red-metrics/">Sidecar RED Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/telemetry-architecture/">Telemetry Architecture</a></li>




  <li class="child level "><a href="/tsb/operations/users/user-synchronization/">User Synchronization</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id20d5fd76edff340345114758359dd3fb&#34;)" href="#id20d5fd76edff340345114758359dd3fb" aria-expanded="false" aria-controls="id20d5fd76edff340345114758359dd3fb" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/design-guides/">设计指南</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id20d5fd76edff340345114758359dd3fb" aria-expanded="false" aria-controls="id20d5fd76edff340345114758359dd3fb">
    
        <i class="fa-solid fa-angle-right" id="caret-id20d5fd76edff340345114758359dd3fb"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id20d5fd76edff340345114758359dd3fb">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id2311754ff8972ff35f5ecae2fe6baead&#34;)" href="#id2311754ff8972ff35f5ecae2fe6baead" aria-expanded="false" aria-controls="id2311754ff8972ff35f5ecae2fe6baead" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/design-guides/ha-dr-mp/">理解高可用性</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id2311754ff8972ff35f5ecae2fe6baead" aria-expanded="false" aria-controls="id2311754ff8972ff35f5ecae2fe6baead">
    
        <i class="fa-solid fa-angle-right" id="caret-id2311754ff8972ff35f5ecae2fe6baead"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id2311754ff8972ff35f5ecae2fe6baead">
      



  <li class="child level "><a href="/tsb/design-guides/ha-dr-mp/scenarios/">Failure Scenarios</a></li>




  <li class="child level "><a href="/tsb/design-guides/ha-dr-mp/dr-managementplane/">Management Plane DR</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id2a4d15a553985243ee2991f8bb74ac7b&#34;)" href="#id2a4d15a553985243ee2991f8bb74ac7b" aria-expanded="false" aria-controls="id2a4d15a553985243ee2991f8bb74ac7b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/design-guides/app-onboarding/">应用上线最佳实践</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id2a4d15a553985243ee2991f8bb74ac7b" aria-expanded="false" aria-controls="id2a4d15a553985243ee2991f8bb74ac7b">
    
        <i class="fa-solid fa-angle-right" id="caret-id2a4d15a553985243ee2991f8bb74ac7b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id2a4d15a553985243ee2991f8bb74ac7b">
      



  <li class="child level "><a href="/tsb/design-guides/app-onboarding/prepare/">集群准备</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/deploy-service/">部署服务和配置网关规则</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/monitor/">监控指标</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/cross-cluster/">集群间的流量</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/security/">扩展安全策略</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/high-availability/">跨集群实现高可用性</a></li>




  <li class="child level "><a href="/tsb/design-guides/app-onboarding/gateway-security/">针对服务配置额外的安全措施</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ida33f82b1159fe68c03133adba91d18ab&#34;)" href="#ida33f82b1159fe68c03133adba91d18ab" aria-expanded="false" aria-controls="ida33f82b1159fe68c03133adba91d18ab" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/design-guides/ha-multicluster/">使用 Edge Gateway 实现高可用集群</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ida33f82b1159fe68c03133adba91d18ab" aria-expanded="false" aria-controls="ida33f82b1159fe68c03133adba91d18ab">
    
        <i class="fa-solid fa-angle-right" id="caret-ida33f82b1159fe68c03133adba91d18ab"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ida33f82b1159fe68c03133adba91d18ab">
      



  <li class="child level "><a href="/tsb/design-guides/ha-multicluster/demo-1/">Demonstration Environment</a></li>




  <li class="child level "><a href="/tsb/design-guides/ha-multicluster/edge-failover/">Edge Gateway Failover</a></li>




  <li class="child level "><a href="/tsb/design-guides/ha-multicluster/demo-2/">Extended Demo Environment</a></li>




  <li class="child level "><a href="/tsb/design-guides/ha-multicluster/operations/">Operating and Testing</a></li>




  <li class="child level "><a href="/tsb/design-guides/ha-multicluster/cluster-failover/">Workload Cluster Failover</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1545fcd4f1609551da975e2c615ad00b&#34;)" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/troubleshooting/">问题排查</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b">
    
        <i class="fa-solid fa-angle-right" id="caret-id1545fcd4f1609551da975e2c615ad00b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1545fcd4f1609551da975e2c615ad00b">
      



  <li class="child level "><a href="/tsb/troubleshooting/troubleshooting/">基本故障排除</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/gateway-troubleshooting/">Ingress Gateway 故障排除</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/configuration-status/">配置状态故障排除</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/cluster-onboarding/">Cluster onboarding troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/identify-underperforming-services/">Identify Underperforming Services</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/maximum-header-size-exceed/">Maximum Header Size Exceed</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/multiple-transfer-encoding-chunked/">Multiple Transfer Encoding Chunked</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/tsb-ui-metrics/">UI Metrics Troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/debug-container/">Using The Debug Container</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide176d22749d73536e461f4fe09cdb7ae&#34;)" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/refs/">API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae">
    
        <i class="fa-solid fa-angle-right" id="caret-ide176d22749d73536e461f4fe09cdb7ae"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ide176d22749d73536e461f4fe09cdb7ae">
      



  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/access-bindings/">Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/agent-configuration/">Agent Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/api/">API</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/api-access-bindings/">API Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application/">Application</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/application-access-bindings/">Application Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application-service/">Application Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/approvals-service/">Approvals Service</a></li>




  <li class="child level "><a href="/tsb/refs/audit/v1/audit/">Audit</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/auth/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/aws/v1alpha1/aws/">AWS Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/aws/v1alpha1/aws/">AWS Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster-service/">Cluster Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster/">Clusters</a></li>




  <li class="child level "><a href="/tsb/refs/install/common/common-config/">Common Configuration Objects</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/types/v2/types/">Common Object Types</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/condition/">Condition</a></li>




  <li class="child level "><a href="/tsb/refs/install/controlplane/v1alpha1/spec/">Control Plane</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/namespaced-name/">Core types</a></li>




  <li class="child level "><a href="/tsb/refs/install/dataplane/v1alpha1/spec/">Data Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/eastwest-gateway/">East/West Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/egress-gateway/">Egress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway/">Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/gateway-access-bindings/">Gateway Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-common/">Gateway Common Configuration Messages</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-group/">Gateway Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-service/">Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/hostinfo/">Host Info</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oauth-service/">IAM (OAuth)</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oidc-service/">IAM (OIDC)</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/info/">Info</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/ingress-gateway/">Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/common/v1alpha1/common/">install/helm/common/v1alpha1/common.proto</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/controlplane/v1alpha1/values/">install/helm/controlplane/v1alpha1/values.proto</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/istio-gateway-direct/">Istio Direct Mode Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/istio-security-direct/">Istio Direct Mode Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/istio-traffic-direct/">Istio Direct Mode Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/istio-internal-access-bindings/">Istio Internal Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-istiointernal-direct/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istiointernal-service/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-internal-group/">Istio internal Group</a></li>




  <li class="child level "><a href="/tsb/refs/istio.io/api/operator/v1alpha1/operator/">IstioOperator Options</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/jwt/v1alpha1/jwt/">JWT Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/jwt/v1alpha1/jwt/">JWT Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/jwt-issuer/">JWT Issuer</a></li>




  <li class="child level "><a href="/tsb/refs/install/kubernetes/k8s/">Kubernetes</a></li>




  <li class="child level "><a href="/tsb/refs/install/managementplane/v1alpha1/spec/">Management Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric/">Metric</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric-service/">Metric Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/onboarding-configuration/">Onboarding Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/v1alpha1/policy/">Onboarding Policy</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/openapi-extensions/">OpenAPI Extensions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization/">Organization</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/organization-access-bindings/">Organization Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-setting/">Organization Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-service/">Organizations Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/permissions/">Permissions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/permissions-service/">Permissions Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/binding/">Policy Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/policy-service/">Policy Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/service/">Registered Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role/">Role</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role-service/">Role Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/security-access-bindings/">Security Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-group/">Security Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-service/">Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-setting/">Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/lookup-service/">Service Registry Lookup Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/service-route/">Service Route</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/service-security-setting/">Service Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/registration-service/">Servive Registry Registration Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source/">Source</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status/">Status</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status-service/">Status Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team/">Teams and Users</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team-service/">Teams Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source-service/">Telemetry Source Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant/">Tenant</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/tenant-access-bindings/">Tenant Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-service/">Tenant Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-setting/">Tenant Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/tier1-gateway/">Tier1 Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/traffic-access-bindings/">Traffic Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-group/">Traffic Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-service/">Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-setting/">Traffic Setting</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/config/v1alpha1/transport-security/">Transport layer security config</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/waf-settings/">WAF Settings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-extension/">WASM Extension</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-service/">WasmExtension Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/runtime/v1alpha1/registration/">Workload Auto Registration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/workload-configuration/">Workload Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/v1alpha1/identity/">Workload Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/registration/">Workload Registration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace/">Workspace</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/workspace-access-bindings/">Workspace Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-service/">Workspace Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-setting/">Workspace Setting</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0a05687586ea2ab4204a2561c9f624d0&#34;)" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/reference/">参考</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0">
    
        <i class="fa-solid fa-angle-right" id="caret-id0a05687586ea2ab4204a2561c9f624d0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0a05687586ea2ab4204a2561c9f624d0">
      



  <li class="child level "><a href="/tsb/reference/k8s-api/tsb-crds-gen/"></a></li>




  <li class="child level "><a href="/tsb/reference/cli/">Getting Started</a></li>




  <li class="child level "><a href="/tsb/reference/grpc-api/guide/">gRPC API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/samples/httpbin/">Installing httpbin</a></li>




  <li class="child level "><a href="/tsb/reference/samples/opa/">Installing Open Policy Agent</a></li>




  <li class="child level "><a href="/tsb/reference/samples/sleep-service/">Installing sleep</a></li>




  <li class="child level "><a href="/tsb/reference/rest-api/guide/">REST API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/tctl/">tctl</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/apply/">tctl apply</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/collect/">tctl collect</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/completion/">tctl completion</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/config/">tctl config</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/delete/">tctl delete</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/edit/">tctl edit</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/experimental/">tctl experimental</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/get/">tctl get</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/install/">tctl install</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/login/">tctl login</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/ui/">tctl ui</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/validate/">tctl validate</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/version/">tctl version</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/whoami/">tctl whoami</a></li>




  <li class="child level "><a href="/tsb/reference/k8s-api/guide/">TSB CRD Reference</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/workload-entry-annotations/">WorkloadEntry Annotations</a></li>




  <li class="child level "><a href="/tsb/reference/yaml-api/guide/">YAML API Guide</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd067b9f805c069b82516c7d6bafcc0b1&#34;)" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/knowledge-base/">知识库和 FAQ</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1">
    
        <i class="fa-solid fa-angle-right" id="caret-idd067b9f805c069b82516c7d6bafcc0b1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd067b9f805c069b82516c7d6bafcc0b1">
      



  <li class="child level "><a href="/tsb/knowledge-base/gitops/">Service Mesh and GitOps</a></li>




  <li class="child level "><a href="/tsb/knowledge-base/faq/">TSB 常见问题解答</a></li>

      
        </ul>
      
    

    
      </div>
    

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#list-the-available-components">List the available components</a></li>
    <li><a href="#tsb-platform-components-management-and-control-planes">TSB platform components (management and control planes)</a>
      <ul>
        <li><a href="#change-a-single-logger">Change a single logger</a></li>
        <li><a href="#change-multiple-loggers">Change multiple loggers</a></li>
        <li><a href="#change-all-loggers-at-once">Change all loggers at once</a></li>
        <li><a href="#change-loggers-using-the-operator">Change loggers using the operator</a></li>
        <li><a href="#configure-loggers-using-install-apis">Configure loggers using Install APIs</a></li>
      </ul>
    </li>
    <li><a href="#configure-log-levels-for-ingress-gateways">Configure log levels for ingress gateways</a></li>
    <li><a href="#using-istioctl-to-configure-log-levels-of-the-data-plane">Using <code>istioctl</code> to configure log levels of the data plane</a></li>
    <li><a href="#configure-log-levels-for-application-sidecars">Configure log levels for application sidecars</a>
      <ul>
        <li><a href="#verify-the-deployed-application-pods">Verify the deployed application pods</a></li>
        <li><a href="#adjust-the-log-level">Adjust the log level</a></li>
        <li><a href="#resetting-the-log-levels">Resetting the log levels</a></li>
      </ul>
    </li>
    <li><a href="#using-configuration-to-change-log-levels">Using configuration to change log levels</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-12 mt-1">
    <img src="/img/wechat.webp" alt="image" title="Jimmy Song的微信公众号"/>
    <p class="text-center pt-1">扫码联系站长</p>
    
    
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4029167986768912"
     crossorigin="anonymous"></script>
     <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4029167986768912"
       data-ad-slot="6856371908"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
    <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>Configure Log Levels</h1>

          <div class="article-style">
            <p>This document describes how to adjust log levels for the different components in TSB, including platform components, Envoy sidecars and ingress gateways at runtime, as well as the procedure to view the logs.</p>
<p>Before you get started make sure:</p>
<p>✓ You have installed and configured TSB properly.<br />
✓ You have installed and configured <code>kubectl</code> to access the application cluster.</p>
<p>For the example commands we assume that you have some applications deployed in a <code>helloworld</code> namespace.</p>
<p>:::warning TSB Components Produce Lots of Logs
Be careful enabling debug logging across all of TSB&rsquo;s scopes for extended periods of time - TSB components produces a lot of logs! You may be faced with large log ingestion bills due to automatic log ingestion combined with turning up log levels across TSB or Sidecars.
:::</p>
<h2 id="list-the-available-components">List the available components</h2>
<p>In order to change each components&rsquo; log level you will need to know which components are available. For that, there is utility command in <code>tctl</code> that will leverage the current <code>kubectl</code> connection information
(context) and list the available components in that cluster.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl experimental debug list-components 
</span></span><span class="line"><span class="cl">PLANE         COMPONENT                 DEPLOYMENTS                           
</span></span><span class="line"><span class="cl">management    ldap                      ldap                                     
</span></span><span class="line"><span class="cl">management    mpc                       mpc                                      
</span></span><span class="line"><span class="cl">management    xcp                       central, xcp-operator-central            
</span></span><span class="line"><span class="cl">management    frontenvoy                envoy                                    
</span></span><span class="line"><span class="cl">management    iamserver                 iam                                      
</span></span><span class="line"><span class="cl">management    apiserver                 tsb                                      
</span></span><span class="line"><span class="cl">management    tsb-operator              tsb-operator-management-plane            
</span></span><span class="line"><span class="cl">management    web-ui                    web                                      
</span></span><span class="line"><span class="cl">management    zipkin                    zipkin                                   
</span></span><span class="line"><span class="cl">management    oap                       oap                                      
</span></span><span class="line"><span class="cl">management    collector                 otel-collector                           
</span></span><span class="line"><span class="cl">management    postgres                  postgres                                 
</span></span><span class="line"><span class="cl">control       istio                     istio-operator                           
</span></span><span class="line"><span class="cl">control       hpaadapter                istio-system-custom-metrics-apiserver    
</span></span><span class="line"><span class="cl">control       oap                       oap-deployment                           
</span></span><span class="line"><span class="cl">control       onboarding                onboarding-operator                      
</span></span><span class="line"><span class="cl">control       collector                 otel-collector                           
</span></span><span class="line"><span class="cl">control       tsb-operator              tsb-operator-control-plane               
</span></span><span class="line"><span class="cl">control       zipkin                    zipkin                                   
</span></span><span class="line"><span class="cl">control       xcp                       edge, xcp-operator-edge                  
</span></span><span class="line"><span class="cl">data          operator                  istio-operator                           
</span></span><span class="line"><span class="cl">data          tsb-operator              tsb-operator-data-plane                  
</span></span><span class="line"><span class="cl">data          bookinfo-gateway          bookinfo/bookinfo-gateway                
</span></span><span class="line"><span class="cl">data          helloworld-tls-gateway    helloworld-tls/helloworld-tls-gateway    
</span></span><span class="line"><span class="cl">data          helloworld-gateway        helloworld/helloworld-gateway            
</span></span><span class="line"><span class="cl">data          httpbin-gateway           httpbin/httpbin-gateway                  
</span></span><span class="line"><span class="cl">data          tier1                     tier1/tier1
</span></span></code></pre></div><p>As seen in the output above, this command will list all available components in the cluster and sort them by plane (management, control or data plane). It will also show the Kubernetes deployments that build up every
component. The <code>PLANE</code> and <code>COMPONENT</code> columns in the output is what will need to be used with the command to set the log level below. For instance, to change the <code>mpc</code> component log level, you will need to refer to it
with <code>management/mpc</code>.</p>
<h2 id="tsb-platform-components-management-and-control-planes">TSB platform components (management and control planes)</h2>
<p>TSB components are able to adjust the log levels for the different existing loggers at runtime without restarting the pod. For that, a new command in <code>tctl</code> CLI has been added.</p>
<p>In order to check the available loggers for a component and check the current levels, run the command without any flag.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl experimental debug log-level management/iamserver
</span></span><span class="line"><span class="cl">Configuring the logging levels:
</span></span><span class="line"><span class="cl">    POST /logging?level<span class="o">=</span>value	  -&gt; Configures all levels globally
</span></span><span class="line"><span class="cl">    POST /logging?logger<span class="o">=</span>value	  -&gt; Configures the logging level <span class="k">for</span> <span class="s1">&#39;logger&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Current logging levels:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">admin                info    Administration server logs
</span></span><span class="line"><span class="cl">auth                 info    Authentication messages server
</span></span><span class="line"><span class="cl">config               info    Messages from the config system
</span></span><span class="line"><span class="cl">credentials/basic    info    Credentials parsing provider <span class="k">for</span> basic http
</span></span><span class="line"><span class="cl">credentials/jwt      info    Credentials parsing provider <span class="k">for</span> JWT bearer
</span></span><span class="line"><span class="cl">default              info    Unscoped logging messages.
</span></span><span class="line"><span class="cl">dynadsn              info    Messages from dynamic db conn pool
</span></span><span class="line"><span class="cl">envoy-filter         info    Envoy filter messages
</span></span><span class="line"><span class="cl">exchange             info    Messages from token exchange
</span></span><span class="line"><span class="cl">grpc                 info    Messages from the gRPC layer
</span></span><span class="line"><span class="cl">health               info    Messages from health check service
</span></span><span class="line"><span class="cl">iam-server           info    Messages from the RunGroup handler
</span></span><span class="line"><span class="cl">iam/http             info    Messages from http-server
</span></span><span class="line"><span class="cl">jwt                  info    Messages from the LDAP provider
</span></span><span class="line"><span class="cl">keyvalue/tx          info    Messages from the transaction system
</span></span><span class="line"><span class="cl">ldap                 info    LDAP integration messages
</span></span><span class="line"><span class="cl"><span class="nb">local</span>                info    Messages from the <span class="nb">local</span> authentication provider
</span></span><span class="line"><span class="cl">migrations           info    Database migration messages
</span></span><span class="line"><span class="cl">oauth                info    Messages from the Server Extensions
</span></span><span class="line"><span class="cl">oauth2               info    OAuth2 messages
</span></span><span class="line"><span class="cl">oidc                 info    Messages from the OIDC provider
</span></span><span class="line"><span class="cl">root                 info    Messages from the root credentials package
</span></span><span class="line"><span class="cl">server               info    Messages from service main
</span></span></code></pre></div><p>In the output above, the leftmost column shows the logger name, the middle column shows the current log level configured for that given logger, and the last column shows a brief description of the kind of messages that logger shows.</p>
<p>In order to change the log levels, there are multiple ways to accomplish that, with different combinations of the <code>level</code> flag.</p>
<h3 id="change-a-single-logger">Change a single logger</h3>
<p>Changing a single logger is possible by providing a logger name followed by a colon (<code>:</code>), followed by the desired level. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl experimental debug log-level management/iamserver --level ldap:debug
</span></span><span class="line"><span class="cl">Configuring the logging levels:
</span></span><span class="line"><span class="cl">    POST /logging?level<span class="o">=</span>value	  -&gt; Configures all levels globally
</span></span><span class="line"><span class="cl">    POST /logging?logger<span class="o">=</span>value	  -&gt; Configures the logging level <span class="k">for</span> <span class="s1">&#39;logger&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Current logging levels:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">admin                info     Administration server logs
</span></span><span class="line"><span class="cl">auth                 info     Authentication messages server
</span></span><span class="line"><span class="cl">config               info     Messages from the config system
</span></span><span class="line"><span class="cl">credentials/basic    info     Credentials parsing provider <span class="k">for</span> basic http
</span></span><span class="line"><span class="cl">credentials/jwt      info     Credentials parsing provider <span class="k">for</span> JWT bearer
</span></span><span class="line"><span class="cl">default              info     Unscoped logging messages.
</span></span><span class="line"><span class="cl">dynadsn              info     Messages from dynamic db conn pool
</span></span><span class="line"><span class="cl">envoy-filter         info     Envoy filter messages
</span></span><span class="line"><span class="cl">exchange             info     Messages from token exchange
</span></span><span class="line"><span class="cl">grpc                 info     Messages from the gRPC layer
</span></span><span class="line"><span class="cl">health               info     Messages from health check service
</span></span><span class="line"><span class="cl">iam-server           info     Messages from the RunGroup handler
</span></span><span class="line"><span class="cl">iam/http             info     Messages from http-server
</span></span><span class="line"><span class="cl">jwt                  info     Messages from the LDAP provider
</span></span><span class="line"><span class="cl">keyvalue/tx          info     Messages from the transaction system
</span></span><span class="line"><span class="cl">ldap                 debug    LDAP integration messages
</span></span><span class="line"><span class="cl"><span class="nb">local</span>                info     Messages from the <span class="nb">local</span> authentication provider
</span></span><span class="line"><span class="cl">migrations           info     Database migration messages
</span></span><span class="line"><span class="cl">oauth                info     Messages from the Server Extensions
</span></span><span class="line"><span class="cl">oauth2               info     OAuth2 messages
</span></span><span class="line"><span class="cl">oidc                 info     Messages from the OIDC provider
</span></span><span class="line"><span class="cl">root                 info     Messages from the root credentials package
</span></span><span class="line"><span class="cl">server               info     Messages from service main
</span></span></code></pre></div><p>You can see by the output received that the <code>ldap</code> logger has changed its level to <code>debug</code>, raising its verbosity level.</p>
<h3 id="change-multiple-loggers">Change multiple loggers</h3>
<p>Changing multiple loggers at once is possible by providing a comma (<code>,</code>) separated list of logger name and level pairs. Items within a pair are separated by a colon (<code>:</code>). For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl experimental debug log-level management/iamserver --level jwt:error,auth:warn,health:error
</span></span><span class="line"><span class="cl">Configuring the logging levels:
</span></span><span class="line"><span class="cl">    POST /logging?level<span class="o">=</span>value	  -&gt; Configures all levels globally
</span></span><span class="line"><span class="cl">    POST /logging?logger<span class="o">=</span>value	  -&gt; Configures the logging level <span class="k">for</span> <span class="s1">&#39;logger&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Current logging levels:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">admin                info     Administration server logs
</span></span><span class="line"><span class="cl">auth                 warn     Authentication messages server
</span></span><span class="line"><span class="cl">config               info     Messages from the config system
</span></span><span class="line"><span class="cl">credentials/basic    info     Credentials parsing provider <span class="k">for</span> basic http
</span></span><span class="line"><span class="cl">credentials/jwt      info     Credentials parsing provider <span class="k">for</span> JWT bearer
</span></span><span class="line"><span class="cl">default              info     Unscoped logging messages.
</span></span><span class="line"><span class="cl">dynadsn              info     Messages from dynamic db conn pool
</span></span><span class="line"><span class="cl">envoy-filter         info     Envoy filter messages
</span></span><span class="line"><span class="cl">exchange             info     Messages from token exchange
</span></span><span class="line"><span class="cl">grpc                 info     Messages from the gRPC layer
</span></span><span class="line"><span class="cl">health               error    Messages from health check service
</span></span><span class="line"><span class="cl">iam-server           info     Messages from the RunGroup handler
</span></span><span class="line"><span class="cl">iam/http             info     Messages from http-server
</span></span><span class="line"><span class="cl">jwt                  error    Messages from the LDAP provider
</span></span><span class="line"><span class="cl">keyvalue/tx          info     Messages from the transaction system
</span></span><span class="line"><span class="cl">ldap                 debug    LDAP integration messages
</span></span><span class="line"><span class="cl"><span class="nb">local</span>                info     Messages from the <span class="nb">local</span> authentication provider
</span></span><span class="line"><span class="cl">migrations           info     Database migration messages
</span></span><span class="line"><span class="cl">oauth                info     Messages from the Server Extensions
</span></span><span class="line"><span class="cl">oauth2               info     OAuth2 messages
</span></span><span class="line"><span class="cl">oidc                 info     Messages from the OIDC provider
</span></span><span class="line"><span class="cl">root                 info     Messages from the root credentials package
</span></span><span class="line"><span class="cl">server               info     Messages from service main
</span></span></code></pre></div><p>You can see how only the selected loggers have changed to the specified levels.</p>
<h3 id="change-all-loggers-at-once">Change all loggers at once</h3>
<p>You can also change all loggers at once to a given level by just providing the level name, for instance:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl experimental debug log-level management/iamserver --level info
</span></span><span class="line"><span class="cl">Configuring the logging levels:
</span></span><span class="line"><span class="cl">    POST /logging?level<span class="o">=</span>value	  -&gt; Configures all levels globally
</span></span><span class="line"><span class="cl">    POST /logging?logger<span class="o">=</span>value	  -&gt; Configures the logging level <span class="k">for</span> <span class="s1">&#39;logger&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Current logging levels:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">admin                info    Administration server logs
</span></span><span class="line"><span class="cl">auth                 info    Authentication messages server
</span></span><span class="line"><span class="cl">config               info    Messages from the config system
</span></span><span class="line"><span class="cl">credentials/basic    info    Credentials parsing provider <span class="k">for</span> basic http
</span></span><span class="line"><span class="cl">credentials/jwt      info    Credentials parsing provider <span class="k">for</span> JWT bearer
</span></span><span class="line"><span class="cl">default              info    Unscoped logging messages.
</span></span><span class="line"><span class="cl">dynadsn              info    Messages from dynamic db conn pool
</span></span><span class="line"><span class="cl">envoy-filter         info    Envoy filter messages
</span></span><span class="line"><span class="cl">exchange             info    Messages from token exchange
</span></span><span class="line"><span class="cl">grpc                 info    Messages from the gRPC layer
</span></span><span class="line"><span class="cl">health               info    Messages from health check service
</span></span><span class="line"><span class="cl">iam-server           info    Messages from the RunGroup handler
</span></span><span class="line"><span class="cl">iam/http             info    Messages from http-server
</span></span><span class="line"><span class="cl">jwt                  info    Messages from the LDAP provider
</span></span><span class="line"><span class="cl">keyvalue/tx          info    Messages from the transaction system
</span></span><span class="line"><span class="cl">ldap                 info    LDAP integration messages
</span></span><span class="line"><span class="cl"><span class="nb">local</span>                info    Messages from the <span class="nb">local</span> authentication provider
</span></span><span class="line"><span class="cl">migrations           info    Database migration messages
</span></span><span class="line"><span class="cl">oauth                info    Messages from the Server Extensions
</span></span><span class="line"><span class="cl">oauth2               info    OAuth2 messages
</span></span><span class="line"><span class="cl">oidc                 info    Messages from the OIDC provider
</span></span><span class="line"><span class="cl">root                 info    Messages from the root credentials package
</span></span><span class="line"><span class="cl">server               info    Messages from service main
</span></span></code></pre></div><p>All of the loggers have been changed to the <code>info</code> level with a single command.</p>
<h3 id="change-loggers-using-the-operator">Change loggers using the operator</h3>
<p>All the management and control planes components can be also configured by using the MP/CP CRs. For example, to modify the <code>xcp-operator-edge</code>, you can modify the CP CR to use the following configuration:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">components</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">xcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">kubeSpec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">overlays</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">apps/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">xcp-operator-edge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">patches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.template.spec.containers.[name:xcp-operator].args[-1]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span>--<span class="l">log_output_level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.template.spec.containers.[name:xcp-operator].args[-1]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">all:error</span><span class="w">
</span></span></span></code></pre></div><p>Bear in mind that there are components which are deployed by another operator, like <code>edge</code> in the control plane. In order to modify these components, you will need to do an overlay of the operator like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">components</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">xcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">kubeSpec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">overlays</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">apps/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">xcp-operator-edge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">patches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.template.spec.containers.[name:xcp-operator].args[-1]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span>--<span class="l">log_output_level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.template.spec.containers.[name:xcp-operator].args[-1]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">all:error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># Add the overlay for edge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">install.xcp.tetrate.io/v1alpha1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">EdgeXcp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">edge-xcp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">patches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.components.edgeServer.kubeSpec.overlays</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">edge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">patches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.template.spec.containers.[name:edge].args[all:info]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">all:error</span><span class="w">
</span></span></span></code></pre></div><p>The same happens if you want to modify <code>istiod</code> or all the gateways from the istio operator, you will need to do an overlay from the <code>istio-operator</code> which is the component that deploys <code>istiod</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">components</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">istio</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">kubeSpec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">overlays</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">install.istio.io/v1alpha1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IstioOperator</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tsb-istiocontrolplane</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">patches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.values.global.proxy.logLevel</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">warn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">spec.values.global.logging.level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l">default:warn</span><span class="w">
</span></span></span></code></pre></div><p>Above examples will work for all the components deployed by the management or control plane operators, but if you want to modify the loggers for the operators itself, you will need to manually edit the operator deployment. For example, let&rsquo;s change the loggers for the control plane operator deployment:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl edit deployment tsb-operator-control-plane -n istio-system
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">control-plane</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- --<span class="l">deployment-name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">tsb-operator-control-plane</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># Add below the changes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- --<span class="l">log-output-level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">default:info,tsboperator/kubernetes:error</span><span class="w">
</span></span></span></code></pre></div><h3 id="configure-loggers-using-install-apis">Configure loggers using Install APIs</h3>
<p>Most of the components are provided with knobs to choose the log level for a particular component. This can be done using Install APIs CRs like MP or CP. Following are the examples:
For example in CP CR:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl edit deployment tsb-operator-control-plane -n istio-system
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">components</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">xcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">logLevels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">all</span><span class="p">:</span><span class="w"> </span><span class="l">error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">oap</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">logLevel</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">istio</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">logLevels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">all</span><span class="p">:</span><span class="w"> </span><span class="l">trace</span><span class="w">
</span></span></span></code></pre></div><p>Moreover default log level can also be set for all the components. Since there could be different log levels for different components, the default log level will only be rendered for components that uses the particular log level.
For example in CP CR:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">defaultLogLevel</span><span class="p">:</span><span class="w"> </span><span class="l">info</span><span class="w">
</span></span></span></code></pre></div><p>Similarly, this could be done for MP as well.</p>
<p>Take a look at different components and log levels supported by the components in the MP and CP CRs:</p>
<p><a href="../refs/install/controlplane/v1alpha1/spec">Control Plane Install API Reference Docs</a>.<br/>
<a href="../refs/install/managementplane/v1alpha1/spec">ManagementPlane Plane Install API Reference Docs</a>.</p>
<h2 id="configure-log-levels-for-ingress-gateways">Configure log levels for ingress gateways</h2>
<p>In order to change the gateways log levels, the same procedure described above can be used. Note that the <code>list-components</code> command output also includes the gateways deployed in the current cluster under the <code>data</code> plane.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl experimental debug list-components  <span class="p">|</span> egrep ^data
</span></span><span class="line"><span class="cl">data          tsb-operator              tsb-operator-data-plane                  
</span></span><span class="line"><span class="cl">data          operator                  istio-operator                           
</span></span><span class="line"><span class="cl">data          bookinfo-gateway          bookinfo/bookinfo-gateway                
</span></span><span class="line"><span class="cl">data          helloworld-tls-gateway    helloworld-tls/helloworld-tls-gateway    
</span></span><span class="line"><span class="cl">data          helloworld-gateway        helloworld/helloworld-gateway            
</span></span><span class="line"><span class="cl">data          httpbin-gateway           httpbin/httpbin-gateway                  
</span></span><span class="line"><span class="cl">data          tier1                     tier1/tier1
</span></span></code></pre></div><p>The procedure to change the log level for a gateway will be the same as for the rest of the components. For instance, to verify the <code>bookinfo-gateway</code> log levels, the following command can be run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl experimental debug log-level data/bookinfo-gateway
</span></span><span class="line"><span class="cl">active loggers:
</span></span><span class="line"><span class="cl">  admin: trace
</span></span><span class="line"><span class="cl">  aws: trace
</span></span><span class="line"><span class="cl">  assert: trace
</span></span><span class="line"><span class="cl">  backtrace: trace
</span></span><span class="line"><span class="cl">  cache_filter: trace
</span></span><span class="line"><span class="cl">  client: trace
</span></span><span class="line"><span class="cl">  config: trace
</span></span><span class="line"><span class="cl">  connection: trace
</span></span><span class="line"><span class="cl">  conn_handler: trace
</span></span><span class="line"><span class="cl">  decompression: trace
</span></span><span class="line"><span class="cl">  dubbo: trace
</span></span><span class="line"><span class="cl">  envoy_bug: trace
</span></span><span class="line"><span class="cl">  ext_authz: trace
</span></span><span class="line"><span class="cl">  rocketmq: trace
</span></span><span class="line"><span class="cl">  file: trace
</span></span><span class="line"><span class="cl">  filter: trace
</span></span><span class="line"><span class="cl">  forward_proxy: trace
</span></span><span class="line"><span class="cl">  grpc: trace
</span></span><span class="line"><span class="cl">  hc: trace
</span></span><span class="line"><span class="cl">  health_checker: trace
</span></span><span class="line"><span class="cl">  http: trace
</span></span><span class="line"><span class="cl">  http2: trace
</span></span><span class="line"><span class="cl">  hystrix: trace
</span></span><span class="line"><span class="cl">  init: trace
</span></span><span class="line"><span class="cl">  io: trace
</span></span><span class="line"><span class="cl">  jwt: trace
</span></span><span class="line"><span class="cl">  kafka: trace
</span></span><span class="line"><span class="cl">  lua: trace
</span></span><span class="line"><span class="cl">  main: trace
</span></span><span class="line"><span class="cl">  matcher: trace
</span></span><span class="line"><span class="cl">  misc: trace
</span></span><span class="line"><span class="cl">  mongo: trace
</span></span><span class="line"><span class="cl">  quic: trace
</span></span><span class="line"><span class="cl">  quic_stream: trace
</span></span><span class="line"><span class="cl">  pool: trace
</span></span><span class="line"><span class="cl">  rbac: trace
</span></span><span class="line"><span class="cl">  redis: trace
</span></span><span class="line"><span class="cl">  router: trace
</span></span><span class="line"><span class="cl">  runtime: trace
</span></span><span class="line"><span class="cl">  stats: trace
</span></span><span class="line"><span class="cl">  secret: trace
</span></span><span class="line"><span class="cl">  tap: trace
</span></span><span class="line"><span class="cl">  testing: trace
</span></span><span class="line"><span class="cl">  thrift: trace
</span></span><span class="line"><span class="cl">  tracing: trace
</span></span><span class="line"><span class="cl">  upstream: trace
</span></span><span class="line"><span class="cl">  udp: trace
</span></span><span class="line"><span class="cl">  wasm: trace
</span></span></code></pre></div><p>And the log levels can be adjusted using the same procedure, for instance to turn all logger to <code>info</code> level, the following command can be used:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl experimental debug log-level data/bookinfo-gateway --level info
</span></span><span class="line"><span class="cl">active loggers:
</span></span><span class="line"><span class="cl">  admin: info
</span></span><span class="line"><span class="cl">  aws: info
</span></span><span class="line"><span class="cl">  assert: info
</span></span><span class="line"><span class="cl">  backtrace: info
</span></span><span class="line"><span class="cl">  cache_filter: info
</span></span><span class="line"><span class="cl">  client: info
</span></span><span class="line"><span class="cl">  config: info
</span></span><span class="line"><span class="cl">  connection: info
</span></span><span class="line"><span class="cl">  conn_handler: info
</span></span><span class="line"><span class="cl">  decompression: info
</span></span><span class="line"><span class="cl">  dubbo: info
</span></span><span class="line"><span class="cl">  envoy_bug: info
</span></span><span class="line"><span class="cl">  ext_authz: info
</span></span><span class="line"><span class="cl">  rocketmq: info
</span></span><span class="line"><span class="cl">  file: info
</span></span><span class="line"><span class="cl">  filter: info
</span></span><span class="line"><span class="cl">  forward_proxy: info
</span></span><span class="line"><span class="cl">  grpc: info
</span></span><span class="line"><span class="cl">  hc: info
</span></span><span class="line"><span class="cl">  health_checker: info
</span></span><span class="line"><span class="cl">  http: info
</span></span><span class="line"><span class="cl">  http2: info
</span></span><span class="line"><span class="cl">  hystrix: info
</span></span><span class="line"><span class="cl">  init: info
</span></span><span class="line"><span class="cl">  io: info
</span></span><span class="line"><span class="cl">  jwt: info
</span></span><span class="line"><span class="cl">  kafka: info
</span></span><span class="line"><span class="cl">  lua: info
</span></span><span class="line"><span class="cl">  main: info
</span></span><span class="line"><span class="cl">  matcher: info
</span></span><span class="line"><span class="cl">  misc: info
</span></span><span class="line"><span class="cl">  mongo: info
</span></span><span class="line"><span class="cl">  quic: info
</span></span><span class="line"><span class="cl">  quic_stream: info
</span></span><span class="line"><span class="cl">  pool: info
</span></span><span class="line"><span class="cl">  rbac: info
</span></span><span class="line"><span class="cl">  redis: info
</span></span><span class="line"><span class="cl">  router: info
</span></span><span class="line"><span class="cl">  runtime: info
</span></span><span class="line"><span class="cl">  stats: info
</span></span><span class="line"><span class="cl">  secret: info
</span></span><span class="line"><span class="cl">  tap: info
</span></span><span class="line"><span class="cl">  testing: info
</span></span><span class="line"><span class="cl">  thrift: info
</span></span><span class="line"><span class="cl">  tracing: info
</span></span><span class="line"><span class="cl">  upstream: info
</span></span><span class="line"><span class="cl">  udp: info
</span></span><span class="line"><span class="cl">  wasm: info
</span></span></code></pre></div><p>This will adjust the log levels to all replica pods of the gateway deployment.</p>
<h2 id="using-istioctl-to-configure-log-levels-of-the-data-plane">Using <code>istioctl</code> to configure log levels of the data plane</h2>
<p>Services that have been deployed in the service mesh can have their logging controlled dynamically. There are a few ways to change these levels, but the easiest is using the <a href="https://istio.io/latest/docs/reference/commands/istioctl/#istioctl-proxy-config-log" target="_blank" rel="noopener"><code>istioctl proxy-config log</code></a> command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">istioctl proxy-config log &lt;pod-name<span class="o">[</span>.namespace<span class="o">]</span>&gt; --level &lt;arguments&gt;
</span></span></code></pre></div><p>The <code>arguments</code> can be in either of the following forms: <code>level=&lt;name&gt;</code> or <code>&lt;logger&gt;=&lt;name&gt;</code>.</p>
<p>When using the <code>level=&lt;name&gt;</code> form, all applicable components are set to the log level specified by <code>name</code>. When using the <code>&lt;logger&gt;=&lt;name&gt;</code> form, the log level on the particular logger specified by the <code>logger</code> is changed. Finally, you can list many loggers in a single command, like <code>&lt;logger1&gt;=&lt;name1&gt;,&lt;logger2&gt;=&lt;name2&gt;,&lt;logger3&gt;=&lt;name3&gt;</code>.</p>
<p>The following names are allowed: <code>none</code>, <code>default</code>, <code>debug</code>, <code>info</code>, <code>warn</code>, or <code>error</code></p>
<p>For details on the different log levels and loggers available, please refer to the documentation of <a href="https://istio.io/latest/docs/reference/commands/istioctl/#istioctl-proxy-config-log" target="_blank" rel="noopener"><code>istioctl proxy-config log</code></a></p>
<p>:::note You can view log levels directly with kubectl too!</p>
<p>Services that have been deployed in the service mesh will contain the <code>pilot-agent</code> command in the sidecar container. It&rsquo;s primary responsibility is to bootstrap the Envoy proxy, but it can also be used to configure logging levels at runtime among other things.</p>
<p>The <code>pilot-agent</code> command may be invoked to update the logging level through <code>kubectl</code> in the following way:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl <span class="nb">exec</span> &lt;pod-name&gt; -c istio-proxy -- <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  pilot-agent request POST <span class="s1">&#39;logging?&lt;arguments&gt;&#39;</span>
</span></span></code></pre></div><p><code>pod-name</code> refers to the target Kubernetes pod. Notice we are using <code>-c istio-proxy</code> option to explicitly specify that we are executing the <code>pilot-agent</code> command in the sidecar of the service that is deployed in <code>pod-name</code>
:::</p>
<h2 id="configure-log-levels-for-application-sidecars">Configure log levels for application sidecars</h2>
<h3 id="verify-the-deployed-application-pods">Verify the deployed application pods</h3>
<p>Verify that <code>istio-proxy</code> sidecars are properly deployed:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl get pods -n helloworld -o <span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&#34;{.items[*].spec.containers[*].name}&#34;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  tr -s <span class="s1">&#39;[[:space:]]&#39;</span> <span class="s1">&#39;\n&#39;</span> <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  sort <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  uniq -c <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  grep istio-proxy
</span></span></code></pre></div><p>This should print a text resembling the following output:</p>
<pre tabindex="0"><code>  2 istio-proxy
</code></pre><h3 id="adjust-the-log-level">Adjust the log level</h3>
<p>For this example we assume that the following applications have already been deployed and onboarded into TSB:</p>
<pre tabindex="0"><code>NAME                             READY   STATUS    RESTARTS   AGE
helloworld-v1-776f57d5f6-2h8dq   2/2     Running   0          5h49m
helloworld-v2-54df5f84b-v2wv6    2/2     Running   0          5h49m
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">istioctl proxy-config log helloworld-v1-776f57d5f6-2h8d --level debug
</span></span></code></pre></div><p>:::warning
It is recommended that you do NOT turn on <code>debug</code> log level for production workloads or workloads for high volume traffic systems. They may print excessive information that could overwhelm your application(s), or at the very least cost you a lot of money in log ingestion fees!
:::</p>
<p>Once the above command takes effect, you will be able to view the debug logs from the sidecars using <code>kubectl</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl logs -f helloworld-v1-776f57d5f6-2h8dq -c istio-proxy
</span></span></code></pre></div><p>If you would like to apply the same change to the log level to other sidecars on your application, you will have to repeat the process for each pod that you are interested in.</p>
<p>:::note Changing Log Levels with Kubectl
The <code>istio-proxy</code> sidecar in the application pod contains the <code>pilot-agent</code> command.</p>
<p>Run the following command via <code>kubectl</code> on the sidecar to configure the log level:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl -n helloworld <span class="nb">exec</span> helloworld-v1-776f57d5f6-2h8dq -c istio-proxy -- <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  pilot-agent request POST <span class="s1">&#39;logging?level=debug&#39;</span>
</span></span></code></pre></div><p>:::</p>
<h3 id="resetting-the-log-levels">Resetting the log levels</h3>
<p>Once you are done inspecting the logs, always make sure to adjust the log level back again. This will also have to be done for each of the sidecars whose log levels you have adjusted.</p>
<p><code>istioctl</code> has a shortcut for this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">istioctl proxy-config log helloworld-v1-776f57d5f6-2h8dq --reset
</span></span></code></pre></div><p>:::note Reset shortcut not available for <code>kubectl</code>
Unfortunately there&rsquo;s not a shortcut for resetting the log levels via <code>kubectl</code>. You need to <code>kubectl exec</code> a command that restores all of the logs you changed using a list of log scopes and levels, like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl -n helloworld <span class="nb">exec</span> helloworld-v1-776f57d5f6-2h8dq -c istio-proxy -- <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  pilot-agent request POST <span class="s1">&#39;logging?h2=debug,http=info,grpc=error&#39;</span>
</span></span></code></pre></div><p>:::</p>
<h2 id="using-configuration-to-change-log-levels">Using configuration to change log levels</h2>
<p>The <code>tctl</code> command line utility includes another way to configure the log levels, which is using a file containing the actual configuration objects used to configure traffic flows. For instance, for
a given <code>IngressGateway</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">gateway.tsb.tetrate.io/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">IngressGateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ingress-bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">g1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workspace</span><span class="p">:</span><span class="w"> </span><span class="l">w1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l">mycompany</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">organization</span><span class="p">:</span><span class="w"> </span><span class="l">myorg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workloadSelector</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">ns1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">gateway</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">9443</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l">SIMPLE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l">bookinfo-certs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">routing</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">route</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">ns1/productpage.ns1.svc.cluster.local</span><span class="w">
</span></span></span></code></pre></div><p>The <code>tctl</code> command would adjust log levels for the pods matching the <code>workloadSelector</code>, plus those pods that service the destination service <code>productpage.ns1.svc.cluster.local</code>. This also works when using
direct mode inspecting the equivalent objects (<code>Gateway</code>, <code>VirtualService</code>, etc.). This is useful to troubleshoot data path for ingress or east/west traffic, where you can leverage the <code>tctl get all</code> command output
to configure the appropriate pods that are in the data path for a request to a given hostname.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl get all --fqdn bookinfo.com &gt; /tmp/bookinfo-config.yaml
</span></span><span class="line"><span class="cl">tctl experimental debug log-levels -f /tmp/bookinfo-config.yaml --level<span class="o">=</span>trace
</span></span></code></pre></div><p>The above commands for instance, would query TSB and get all the config objects that refer the hostname <code>bookinfo.com</code>, saving them to the file <code>/tmp/bookinfo-config.yaml</code>. The second command would then
configure the log level to <code>trace</code> for all pods in the data path for the <code>bookinfo.com</code> host name. Once troubleshooting has finished, you can revert back the log level to more reasonable values.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tctl experimental debug log-levels -f /tmp/bookinfo-config.yaml --level<span class="o">=</span>info
</span></span></code></pre></div><p>:::note Multi-cluster
The commands to adjust log levels use the currently configured <code>kubectl</code> config file and context, while your configuration might expand multiple clusters. For instance, you could have in the same file the Tier1 and
Tier2 configuration. <code>tctl</code> will display which pods matched and ask for confirmation before proceeding. If you need to use multiple clusters, you will need to run the command once while targeting each cluster with
<code>kubectl</code>.
:::</p>

          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/tsb/operations/users/admin-password/" rel="next">
    <div class="meta-nav">上一页</div>
    <p>Change The Administrator Password</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/operations/multiple-iam-keys/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>Configure multiple IAM token validation keys</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2023-11-14</p>

          



          


  
  
  

  

  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2023 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.46271ef31da3f018e9cd1b59300aa265.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.24983018b0e5661cd5fe1822254286ea.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
