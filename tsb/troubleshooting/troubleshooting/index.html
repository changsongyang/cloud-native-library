<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
    <meta name="google-site-verification" content="google69a5cccb61297807" />
    <meta name="baidu-site-verification" content="cqmZHEleVh" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="宋净超" />

  
  
  
    
  
  <meta name="description" content="This document explains some possible ways to do basic troubleshooting in TSB in order to find misconfiguration issues for a given route or common causes for 50x errors.
System architecture In this document the following system architecture with Tier1-Tier2 setup:
There are two different clusters, training-mp which contains the management plane and a control plane configured as tier1, and training-cp which is configured as tier2 and contains bookinfo and httpbin applications.
Tier1 Gateway troubleshooting When a 50x error is detected it is important to understand the error message, as it will point us to different sources.
For example, suppose you issued an HTTP request using curl to one of the services controlled by TSB, and you observe an error like the following:" />

  
  <link rel="alternate" hreflang="zh" href="https://lib.jimmysong.io/tsb/troubleshooting/troubleshooting/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.b26eb9b802629dccab300faa82cc98c7.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-MP490FS739"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', "G-MP490FS739");
</script>


  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2a4b7f65b1839466beaa48d633aa60c1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0f7d075e895d6f5f1f5fdbc1e33dc138_10087_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://lib.jimmysong.io/tsb/troubleshooting/troubleshooting/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@jimmysongio" />
    <meta property="twitter:creator" content="@jimmysongio" />
  
  <meta property="og:site_name" content="云原生资料库" />
  <meta property="og:url" content="https://lib.jimmysong.io/tsb/troubleshooting/troubleshooting/" />
  <meta property="og:title" content="Basic troubleshooting | 云原生资料库" />
  <meta property="og:description" content="This document explains some possible ways to do basic troubleshooting in TSB in order to find misconfiguration issues for a given route or common causes for 50x errors.
System architecture In this document the following system architecture with Tier1-Tier2 setup:
There are two different clusters, training-mp which contains the management plane and a control plane configured as tier1, and training-cp which is configured as tier2 and contains bookinfo and httpbin applications.
Tier1 Gateway troubleshooting When a 50x error is detected it is important to understand the error message, as it will point us to different sources.
For example, suppose you issued an HTTP request using curl to one of the services controlled by TSB, and you observe an error like the following:" /><meta property="og:image" content="https://lib.jimmysong.io/media/sharing.png" />
    <meta property="twitter:image" content="https://lib.jimmysong.io/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2023-08-09T12:00:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2023-08-28T18:30:35&#43;08:00">
  

  



  

  

  





  <title>Basic troubleshooting | 云原生资料库</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="9ea4ce3dcea117f13c25645b593ebf37" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生资料库"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#books"><span>图书</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>教程</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/kubernetes-handbook"><span>Kubernetes 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/istio-fundamentals-zh"><span>Istio 基础教程</span></a>
              
                <a class="dropdown-item" href="https://academy.tetrate.io/courses/envoy-fundamentals-zh"><span>Envoy 基础教程</span></a>
              
            </div>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/blog"><span>译文</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>更新</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://jimmysong.io" target="_blank" rel="noopener"><span>Jimmy Song</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://jimmysong.io/contact/" data-toggle="tooltip" data-placement="bottom" title="联系" target="_blank" rel="noopener" aria-label="联系">
                <i class="fab fa-weixin" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://twitter.com/jimmysongio" data-toggle="tooltip" data-placement="bottom" title="关注" target="_blank" rel="noopener" aria-label="关注">
                <i class="fab fa-twitter" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        <li class="nav-item">
            <a class="nav-link" href="https://jimmysong.io" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="主站" aria-label="主站"><i class="fas fa-home" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item d-none d-lg-inline-flex">
            <a class="nav-link" href="https://github.com/rootsongjc/cloud-native-library/" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="查看源码" aria-label="查看源码" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    




<div class="container-xl docs">
  <div class="row flex-xl-nowrap">
    <div class="docs-sidebar">
      <form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <div class="d-flex">
      <span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">
        
          问题排查
        
      </span>
      <span><i class="fas fa-chevron-down"></i></span>
    </div>
  </button>

  
  <button class="form-control sidebar-search js-search d-none d-md-flex">
    <i class="fas fa-search pr-2"></i>
    <span class="sidebar-search-text">搜索...</span>
    <span class="sidebar-search-shortcut">/</span>
  </button>
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  
  
  
  

  
  
    

    
      

      



  
    
    
    
    
      
    
    

    
      <ul class="nav docs-sidenav">
          <li class="level "><a href="/tsb/"><i class="fas fa-book pr-1"></i>Tetrate Service Bridge 中文文档</a></li>
    
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3d30fe67a2f2650cf7b814847b9fc266&#34;)" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/release-notes-announcements/">TSB 1.6 发行说明</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3d30fe67a2f2650cf7b814847b9fc266" aria-expanded="false" aria-controls="id3d30fe67a2f2650cf7b814847b9fc266">
    
        <i class="fa-solid fa-angle-right" id="caret-id3d30fe67a2f2650cf7b814847b9fc266"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3d30fe67a2f2650cf7b814847b9fc266">
      



  <li class="child level "><a href="/tsb/release-notes-announcements/support-policy/">TSB 支持策略</a></li>




  <li class="child level "><a href="/tsb/release-notes-announcements/feature-status/">功能状态</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3b0baa6baef458c089cd1b065e550681&#34;)" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/">概念</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3b0baa6baef458c089cd1b065e550681" aria-expanded="false" aria-controls="id3b0baa6baef458c089cd1b065e550681">
    
        <i class="fa-solid fa-angle-right" id="caret-id3b0baa6baef458c089cd1b065e550681"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3b0baa6baef458c089cd1b065e550681">
      



  <li class="child level "><a href="/tsb/concepts/service-mesh/">服务网格简介</a></li>




  <li class="child level "><a href="/tsb/concepts/architecture/">TSB 架构</a></li>




  <li class="child level "><a href="/tsb/concepts/security/">安全</a></li>




  <li class="child level "><a href="/tsb/concepts/traffic-management/">流量管理</a></li>




  <li class="child level "><a href="/tsb/concepts/observability/">全局可观测性</a></li>




  <li class="child level "><a href="/tsb/concepts/configuration-dataflow/">配置的数据流</a></li>




  <li class="child level "><a href="/tsb/concepts/terminology/">术语</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id455c76a6e893f5810403789454118039&#34;)" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/concepts/operators/">TSB Operator</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id455c76a6e893f5810403789454118039" aria-expanded="false" aria-controls="id455c76a6e893f5810403789454118039">
    
        <i class="fa-solid fa-angle-right" id="caret-id455c76a6e893f5810403789454118039"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id455c76a6e893f5810403789454118039">
      



  <li class="child level "><a href="/tsb/concepts/operators/management-plane/">管理平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/control-plane/">控制平面</a></li>




  <li class="child level "><a href="/tsb/concepts/operators/data-plane/">数据平面</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id9c8d5edee8fcb5c6a4202ed0aae66c57&#34;)" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/">安装与升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id9c8d5edee8fcb5c6a4202ed0aae66c57" aria-expanded="false" aria-controls="id9c8d5edee8fcb5c6a4202ed0aae66c57">
    
        <i class="fa-solid fa-angle-right" id="caret-id9c8d5edee8fcb5c6a4202ed0aae66c57"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id9c8d5edee8fcb5c6a4202ed0aae66c57">
      



  <li class="child level "><a href="/tsb/setup/requirements-and-download/">先决条件和下载</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd25e30387a56dbb163b60a8a6b01566a&#34;)" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/self-managed/">使用 tctl 安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd25e30387a56dbb163b60a8a6b01566a" aria-expanded="false" aria-controls="idd25e30387a56dbb163b60a8a6b01566a">
    
        <i class="fa-solid fa-angle-right" id="caret-idd25e30387a56dbb163b60a8a6b01566a"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd25e30387a56dbb163b60a8a6b01566a">
      



  <li class="child level "><a href="/tsb/setup/self-managed/demo-installation/">演示安装</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/management-plane-installation/">Management Plane Installation</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/onboarding-clusters/">Onboarding Clusters</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/uninstallation/">TSB Uninstallation</a></li>




  <li class="child level "><a href="/tsb/setup/self-managed/upgrade/">TSB Upgrade</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idc725c0e507058bb12e15a35d994f3d67&#34;)" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/helm/">Install with Helm</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idc725c0e507058bb12e15a35d994f3d67" aria-expanded="false" aria-controls="idc725c0e507058bb12e15a35d994f3d67">
    
        <i class="fa-solid fa-angle-right" id="caret-idc725c0e507058bb12e15a35d994f3d67"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idc725c0e507058bb12e15a35d994f3d67">
      



  <li class="child level "><a href="/tsb/setup/helm/controlplane/">Control Plane Installation</a></li>




  <li class="child level "><a href="/tsb/setup/helm/dataplane/">Data Plane Installation</a></li>




  <li class="child level "><a href="/tsb/setup/helm/uninstallation/">Helm TSB Uninstallation</a></li>




  <li class="child level "><a href="/tsb/setup/helm/managementplane/">Management Plane Installation</a></li>




  <li class="child level "><a href="/tsb/setup/helm/helm/">TSB Helm Charts</a></li>




  <li class="child level "><a href="/tsb/setup/helm/upgrade/">TSB Helm Upgrade</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id24a65c33a9b493c7b9671794da2e21fc&#34;)" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/">载入工作负载</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id24a65c33a9b493c7b9671794da2e21fc" aria-expanded="false" aria-controls="id24a65c33a9b493c7b9671794da2e21fc">
    
        <i class="fa-solid fa-angle-right" id="caret-id24a65c33a9b493c7b9671794da2e21fc"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id24a65c33a9b493c7b9671794da2e21fc">
      



  <li class="child level "><a href="/tsb/setup/workload-onboarding/onboarding-vms/">Onboarding VMs with tctl</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idf57cfc61402f3e44110dd41ca87ad66d&#34;)" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/workload-onboarding/guides/">Workload Onboarding</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idf57cfc61402f3e44110dd41ca87ad66d" aria-expanded="false" aria-controls="idf57cfc61402f3e44110dd41ca87ad66d">
    
        <i class="fa-solid fa-angle-right" id="caret-idf57cfc61402f3e44110dd41ca87ad66d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idf57cfc61402f3e44110dd41ca87ad66d">
      



  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/managing/">Managing Onboarded Workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/ecs-workloads/">Onboarding AWS ECS workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/on-premise-workloads/">Onboarding on-premise workloads</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/onboarding/">Onboarding VMs</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/overview/">Overview</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/setup/">Setting Up Workload Onboarding</a></li>




  <li class="child level "><a href="/tsb/setup/workload-onboarding/guides/troubleshooting/">Troubleshooting Guide</a></li>

      
        </ul>
      
    

    
      </div>
    

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-iddaffab814adc52c72a8fca403c941062&#34;)" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/aws/">AWS</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#iddaffab814adc52c72a8fca403c941062" aria-expanded="false" aria-controls="iddaffab814adc52c72a8fca403c941062">
    
        <i class="fa-solid fa-angle-right" id="caret-iddaffab814adc52c72a8fca403c941062"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="iddaffab814adc52c72a8fca403c941062">
      



  <li class="child level "><a href="/tsb/setup/aws/container-marketplace/">Install Tetrate Service Bridge from the AWS Container Marketplace</a></li>




  <li class="child level "><a href="/tsb/setup/aws/vpc/">Install Tetrate Service Bridge In AWS</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idfcce4143b4bc2fa5dc77f908a4761366&#34;)" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/certificate/">证书安装</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idfcce4143b4bc2fa5dc77f908a4761366" aria-expanded="false" aria-controls="idfcce4143b4bc2fa5dc77f908a4761366">
    
        <i class="fa-solid fa-angle-right" id="caret-idfcce4143b4bc2fa5dc77f908a4761366"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idfcce4143b4bc2fa5dc77f908a4761366">
      



  <li class="child level "><a href="/tsb/setup/certificate/automated-certificate-management/">Automated Certificate Management</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/certificate-requirements/">Internal Certificates Requirements</a></li>




  <li class="child level "><a href="/tsb/setup/certificate/certificate-setup/">Types of Certificates</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/tctl-connect/">Connect to TSB with tctl</a></li>




  <li class="child level "><a href="/tsb/setup/resource-planning/">Resource Consumption and Capacity Planning</a></li>




  <li class="child level "><a href="/tsb/setup/components/">TSB Components</a></li>




  <li class="child level "><a href="/tsb/setup/firewall-information/">Firewall Information</a></li>




  <li class="child level "><a href="/tsb/setup/isolation-boundaries/">Istio 隔离边界</a></li>




  <li class="child level "><a href="/tsb/setup/remote-registry/">Repository secrets</a></li>




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id062c132c14e80e34ad3ed84386661dc0&#34;)" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/setup/upgrades/">控制平面升级</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id062c132c14e80e34ad3ed84386661dc0" aria-expanded="false" aria-controls="id062c132c14e80e34ad3ed84386661dc0">
    
        <i class="fa-solid fa-angle-right" id="caret-id062c132c14e80e34ad3ed84386661dc0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id062c132c14e80e34ad3ed84386661dc0">
      



  <li class="child level "><a href="/tsb/setup/upgrades/non-revisioned-to-revisioned/">非版本到版本的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/revisioned-to-revisioned/">已修订版本间的升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/gateway-upgrade/">网关升级</a></li>




  <li class="child level "><a href="/tsb/setup/upgrades/cni-upgrade/">修订的 Istio CNI 和升级</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/setup/migrate-tctl-to-helm/">Migration from tctl to Helm</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idac10970f4e8c33d6bbce355138dde5d4&#34;)" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/quickstart/">快速入门</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idac10970f4e8c33d6bbce355138dde5d4" aria-expanded="false" aria-controls="idac10970f4e8c33d6bbce355138dde5d4">
    
        <i class="fa-solid fa-angle-right" id="caret-idac10970f4e8c33d6bbce355138dde5d4"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idac10970f4e8c33d6bbce355138dde5d4">
      



  <li class="child level "><a href="/tsb/quickstart/introduction/">快速开始简介</a></li>




  <li class="child level "><a href="/tsb/quickstart/deploy-sample-app/">部署应用程序</a></li>




  <li class="child level "><a href="/tsb/quickstart/tenant/">创建租户</a></li>




  <li class="child level "><a href="/tsb/quickstart/workspace/">创建工作区</a></li>




  <li class="child level "><a href="/tsb/quickstart/config-groups/">创建配置组</a></li>




  <li class="child level "><a href="/tsb/quickstart/permissions/">配置权限</a></li>




  <li class="child level "><a href="/tsb/quickstart/ingress-gateway/">入口网关</a></li>




  <li class="child level "><a href="/tsb/quickstart/observability/">拓扑和指标</a></li>




  <li class="child level "><a href="/tsb/quickstart/traffic-shifting/">流量转移</a></li>




  <li class="child level "><a href="/tsb/quickstart/security/">安全</a></li>




  <li class="child level "><a href="/tsb/quickstart/apps/">创建应用程序和 API</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0ec9af575b8b763b648f8c99ff17610d&#34;)" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/">操作任务</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0ec9af575b8b763b648f8c99ff17610d" aria-expanded="false" aria-controls="id0ec9af575b8b763b648f8c99ff17610d">
    
        <i class="fa-solid fa-angle-right" id="caret-id0ec9af575b8b763b648f8c99ff17610d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0ec9af575b8b763b648f8c99ff17610d">
      



  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id8450b6d97b7826af020d05b3b52bbecb&#34;)" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/traffic/">流量管理和迁移</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id8450b6d97b7826af020d05b3b52bbecb" aria-expanded="false" aria-controls="id8450b6d97b7826af020d05b3b52bbecb">
    
        <i class="fa-solid fa-angle-right" id="caret-id8450b6d97b7826af020d05b3b52bbecb"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id8450b6d97b7826af020d05b3b52bbecb">
      



  <li class="child level "><a href="/tsb/howto/traffic/splitting-service-traffic-between-k8s-vms/">Splitting Service Traffic between K8S and VMs</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/migrating-vm-monoliths/">Migrating VM Monoliths to your cluster</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/load-balance/">Client Side Load Balancing</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/external-site-https/">Send traffic to an External Host using HTTPS</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/configure-multi-port-service-route/">Configure ServiceRoute for (multi-port, multi-protocol) services</a></li>




  <li class="child level "><a href="/tsb/howto/traffic/canary-releases/">Canary Releases</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id5753a2129f592fd5880e50dd8423acaf&#34;)" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gateway/">配置网关</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id5753a2129f592fd5880e50dd8423acaf" aria-expanded="false" aria-controls="id5753a2129f592fd5880e50dd8423acaf">
    
        <i class="fa-solid fa-angle-right" id="caret-id5753a2129f592fd5880e50dd8423acaf"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id5753a2129f592fd5880e50dd8423acaf">
      



  <li class="child level "><a href="/tsb/howto/gateway/unified-gateway/">统一网关</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/service-identity-propagation/">Multicluster Access Control and Identity Propagation</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/subset-based-routing-using-igw-and-service-route/">使用 IngressGateway 和 ServiceRoute 基于子集的流量路由</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-with-eastwest-gateway/">Multi-cluster traffic failover with EastWest Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-routing-using-tier2gw/">Multi-cluster traffic routing using Tier-2 gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/multi-cluster-traffic-shifting/">Multi cluster traffic shifting with Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/end-user-auth-keycloak/">End User Authentication with Keycloak</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/egress-gateways/">Controlling Access to External Services</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/distributed-ingress/">Distributed Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/configure-and-route-nonhttp-traffic/">Configure and route HTTP, non-HTTP (multi-protocol) and multi-port service traffic in TSB</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/application-gateway-with-openapi-annotations/">Configuring Application Gateways Using OpenAPI Annotations</a></li>




  <li class="child level "><a href="/tsb/howto/gateway/app-ingress/">App Ingress</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id3cf5ddd3a394b71d7fe2cbfced2c0084&#34;)" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/gitops/">Using GitOps</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id3cf5ddd3a394b71d7fe2cbfced2c0084" aria-expanded="false" aria-controls="id3cf5ddd3a394b71d7fe2cbfced2c0084">
    
        <i class="fa-solid fa-angle-right" id="caret-id3cf5ddd3a394b71d7fe2cbfced2c0084"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id3cf5ddd3a394b71d7fe2cbfced2c0084">
      



  <li class="child level "><a href="/tsb/howto/gitops/gitops/">How it works</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/flux/">Configuring Flux CD for GitOps</a></li>




  <li class="child level "><a href="/tsb/howto/gitops/argo-rollouts/">Canary Analysis &amp; Progressive Delivery Using Argo Rollout and SkyWalking</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id75d83e78f127600ecb3d62fc4fb7258f&#34;)" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/rate-limiting/">Rate Limiting Traffic</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id75d83e78f127600ecb3d62fc4fb7258f" aria-expanded="false" aria-controls="id75d83e78f127600ecb3d62fc4fb7258f">
    
        <i class="fa-solid fa-angle-right" id="caret-id75d83e78f127600ecb3d62fc4fb7258f"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id75d83e78f127600ecb3d62fc4fb7258f">
      



  <li class="child level "><a href="/tsb/howto/rate-limiting/internal-rate-limiting/">Enabling the Internal Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/ingress-gateway/">Rate Limiting in Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/service-to-service/">Service to service rate limiting</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tier1-gateway/">Rate limiting in Tier-1 Gateway</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/external-rate-limiting/">Setting Up an External Rate Limiting Server</a></li>




  <li class="child level "><a href="/tsb/howto/rate-limiting/tls-validation/">External Rate Limiting with TLS Verification</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id7cbc5bd680a87da6558c04275045cb6d&#34;)" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/authorization/">External Authorization</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id7cbc5bd680a87da6558c04275045cb6d" aria-expanded="false" aria-controls="id7cbc5bd680a87da6558c04275045cb6d">
    
        <i class="fa-solid fa-angle-right" id="caret-id7cbc5bd680a87da6558c04275045cb6d"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id7cbc5bd680a87da6558c04275045cb6d">
      



  <li class="child level "><a href="/tsb/howto/authorization/sidecar/">Service to service authorization using external authorization</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/ingress-gateway/">Configuring External Authorization in Ingress Gateways</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tls-verification/">External Authz with TLS verification</a></li>




  <li class="child level "><a href="/tsb/howto/authorization/tier1-gateway/">External Authorization in Tier-1 Gateways</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide54efaf5f496781cf3c3ef789f3781d2&#34;)" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/howto/wasm/">Using WASM extensions</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide54efaf5f496781cf3c3ef789f3781d2" aria-expanded="false" aria-controls="ide54efaf5f496781cf3c3ef789f3781d2">
    
        <i class="fa-solid fa-angle-right" id="caret-ide54efaf5f496781cf3c3ef789f3781d2"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ide54efaf5f496781cf3c3ef789f3781d2">
      



  <li class="child level "><a href="/tsb/howto/wasm/wasm-overview/">Overview</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-extension/">TSB configuration</a></li>




  <li class="child level "><a href="/tsb/howto/wasm/wasm-try/">Example</a></li>

      
        </ul>
      
    

    
      </div>
    




  <li class="child level "><a href="/tsb/howto/waf/">Using WAF Capabilities</a></li>




  <li class="child level "><a href="/tsb/howto/hpa-using-skywalking/">HPA using SkyWalking</a></li>




  <li class="child level "><a href="/tsb/howto/service-accounts/">Leveraging TSB service accounts</a></li>




  <li class="child level "><a href="/tsb/howto/security-domains/">Creating Security Domains</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1e39d08ed50e978f0b3e95104b86a45b&#34;)" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/operations/">运维指南</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1e39d08ed50e978f0b3e95104b86a45b" aria-expanded="false" aria-controls="id1e39d08ed50e978f0b3e95104b86a45b">
    
        <i class="fa-solid fa-angle-right" id="caret-id1e39d08ed50e978f0b3e95104b86a45b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id1e39d08ed50e978f0b3e95104b86a45b">
      



  <li class="child level "><a href="/tsb/operations/telemetry/alerting-guidelines/">Alerting Guidelines</a></li>




  <li class="child level "><a href="/tsb/operations/users/oidc-azure/">Azure AD as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/postgresql/">Backup and restore PostgreSQL</a></li>




  <li class="child level "><a href="/tsb/operations/users/admin-password/">Change The Administrator Password</a></li>




  <li class="child level "><a href="/tsb/operations/features/enable-config-protection/">Config Protection</a></li>




  <li class="child level "><a href="/tsb/operations/configuration-promotion/">Configuration Promotion</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-cluster-external-addresses/">Configure cluster external addresses</a></li>




  <li class="child level "><a href="/tsb/operations/configure-log-levels/">Configure Log Levels</a></li>




  <li class="child level "><a href="/tsb/operations/multiple-iam-keys/">Configure multiple IAM token validation keys</a></li>




  <li class="child level "><a href="/tsb/operations/kube-customization/">Customizing TSB Kubernetes Components</a></li>




  <li class="child level "><a href="/tsb/operations/features/edge-dns-resolution/">DNS Resolution at Edge</a></li>




  <li class="child level "><a href="/tsb/operations/vault/elasticsearch/">Elasticsearch Credentials</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/elasticsearch-role/">Elasticsearch privileges</a></li>




  <li class="child level "><a href="/tsb/operations/elasticsearch/wipe-elastic/">Elasticsearch wipe procedure</a></li>




  <li class="child level "><a href="/tsb/operations/features/gateway-deletion-webhook/">Gateway Deletion Hold Webhook</a></li>




  <li class="child level "><a href="/tsb/operations/features/configure-gitops/">GitOps</a></li>




  <li class="child level "><a href="/tsb/operations/graceful-connection-drain/">Graceful Connection Drain of istio-proxy</a></li>




  <li class="child level "><a href="/tsb/operations/vault/istiod-ca/">Istio CA</a></li>




  <li class="child level "><a href="/tsb/operations/features/istio-cni/">Istio CNI</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/key-metrics/">Key Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/users/configuring-ldap/">LDAP as the Identity Provider</a></li>




  <li class="child level "><a href="/tsb/operations/lower-istio-resources/">Lower Istio Resource Consumption</a></li>




  <li class="child level "><a href="/tsb/operations/migrate-organization/">Move Data To A New Organization</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/new-relic/">New Relic integration</a></li>




  <li class="child level "><a href="/tsb/operations/vault/postgresql/">PostgreSQL Credentials</a></li>




  <li class="child level "><a href="/tsb/operations/users/roles-and-permissions/">Roles and Permissions</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/red-metrics/">Sidecar RED Metrics</a></li>




  <li class="child level "><a href="/tsb/operations/features/streaming-log/">Streaming Service Logs</a></li>




  <li class="child level "><a href="/tsb/operations/telemetry/telemetry-architecture/">Telemetry Architecture</a></li>




  <li class="child level "><a href="/tsb/operations/features/tier1-in-app-cluster/">Tier1 Gateway in an App Cluster</a></li>




  <li class="child level "><a href="/tsb/operations/users/user-synchronization/">User Synchronization</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id1545fcd4f1609551da975e2c615ad00b&#34;)" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/troubleshooting/">问题排查</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id1545fcd4f1609551da975e2c615ad00b" aria-expanded="false" aria-controls="id1545fcd4f1609551da975e2c615ad00b">
    
    <i class="fa-solid fa-angle-down" id="caret-id1545fcd4f1609551da975e2c615ad00b"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  show " id="id1545fcd4f1609551da975e2c615ad00b">
      



  <li class="child level active"><a href="/tsb/troubleshooting/troubleshooting/">Basic troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/cluster-onboarding/">Cluster onboarding troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/configuration-status/">Configuration status troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/identify-underperforming-services/">Identify Underperforming Services</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/gateway-troubleshooting/">Ingress Gateway troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/maximum-header-size-exceed/">Maximum Header Size Exceed</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/multiple-transfer-encoding-chunked/">Multiple Transfer Encoding Chunked</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/tsb-ui-metrics/">UI Metrics Troubleshooting</a></li>




  <li class="child level "><a href="/tsb/troubleshooting/debug-container/">Using The Debug Container</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-id0a05687586ea2ab4204a2561c9f624d0&#34;)" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/reference/">参考</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#id0a05687586ea2ab4204a2561c9f624d0" aria-expanded="false" aria-controls="id0a05687586ea2ab4204a2561c9f624d0">
    
        <i class="fa-solid fa-angle-right" id="caret-id0a05687586ea2ab4204a2561c9f624d0"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="id0a05687586ea2ab4204a2561c9f624d0">
      



  <li class="child level "><a href="/tsb/reference/k8s-api/tsb-crds-gen/"></a></li>




  <li class="child level "><a href="/tsb/reference/cli/">Getting Started</a></li>




  <li class="child level "><a href="/tsb/reference/grpc-api/guide/">gRPC API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/samples/httpbin/">Installing httpbin</a></li>




  <li class="child level "><a href="/tsb/reference/samples/opa/">Installing Open Policy Agent</a></li>




  <li class="child level "><a href="/tsb/reference/samples/sleep-service/">Installing sleep</a></li>




  <li class="child level "><a href="/tsb/reference/rest-api/guide/">REST API Guide</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/tctl/">tctl</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/apply/">tctl apply</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/collect/">tctl collect</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/completion/">tctl completion</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/config/">tctl config</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/delete/">tctl delete</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/edit/">tctl edit</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/experimental/">tctl experimental</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/get/">tctl get</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/install/">tctl install</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/login/">tctl login</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/ui/">tctl ui</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/validate/">tctl validate</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/version/">tctl version</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/whoami/">tctl whoami</a></li>




  <li class="child level "><a href="/tsb/reference/k8s-api/guide/">TSB CRD Reference</a></li>




  <li class="child level "><a href="/tsb/reference/cli/reference/workload-entry-annotations/">WorkloadEntry Annotations</a></li>




  <li class="child level "><a href="/tsb/reference/yaml-api/guide/">YAML API Guide</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-ide176d22749d73536e461f4fe09cdb7ae&#34;)" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/refs/">API</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#ide176d22749d73536e461f4fe09cdb7ae" aria-expanded="false" aria-controls="ide176d22749d73536e461f4fe09cdb7ae">
    
        <i class="fa-solid fa-angle-right" id="caret-ide176d22749d73536e461f4fe09cdb7ae"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="ide176d22749d73536e461f4fe09cdb7ae">
      



  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/access-bindings/">Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/agent-configuration/">Agent Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/api/">API</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/api-access-bindings/">API Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application/">Application</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/application-access-bindings/">Application Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/application-service/">Application Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/approvals-service/">Approvals Service</a></li>




  <li class="child level "><a href="/tsb/refs/audit/v1/audit/">Audit</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/auth/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/auth/">Auth</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/aws/v1alpha1/aws/">AWS Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/aws/v1alpha1/aws/">AWS Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster-service/">Cluster Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/cluster/">Clusters</a></li>




  <li class="child level "><a href="/tsb/refs/install/common/common-config/">Common Configuration Objects</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/types/v2/types/">Common Object Types</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/condition/">Condition</a></li>




  <li class="child level "><a href="/tsb/refs/install/controlplane/v1alpha1/spec/">Control Plane</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/core/v1alpha1/namespaced-name/">Core types</a></li>




  <li class="child level "><a href="/tsb/refs/install/dataplane/v1alpha1/spec/">Data Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/eastwest-gateway/">East/West Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/egress-gateway/">Egress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway/">Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/gateway-access-bindings/">Gateway Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-common/">Gateway Common Configuration Messages</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-group/">Gateway Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/gateway-service/">Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/hostinfo/">Host Info</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oauth-service/">IAM (OAuth)</a></li>




  <li class="child level "><a href="/tsb/refs/iam/v2/oidc-service/">IAM (OIDC)</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/info/">Info</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/ingress-gateway/">Ingress Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/common/v1alpha1/common/">install/helm/common/v1alpha1/common.proto</a></li>




  <li class="child level "><a href="/tsb/refs/install/helm/controlplane/v1alpha1/values/">install/helm/controlplane/v1alpha1/values.proto</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/istio-gateway-direct/">Istio Direct Mode Gateway Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/istio-security-direct/">Istio Direct Mode Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/istio-traffic-direct/">Istio Direct Mode Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/istio-internal-access-bindings/">Istio Internal Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-istiointernal-direct/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istiointernal-service/">Istio Internal Direct Mode Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/istiointernal/v2/istio-internal-group/">Istio internal Group</a></li>




  <li class="child level "><a href="/tsb/refs/istio.io/api/operator/v1alpha1/operator/">IstioOperator Options</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/jwt/v1alpha1/jwt/">JWT Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/jwt/v1alpha1/jwt/">JWT Identity Matcher</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/jwt-issuer/">JWT Issuer</a></li>




  <li class="child level "><a href="/tsb/refs/install/kubernetes/k8s/">Kubernetes</a></li>




  <li class="child level "><a href="/tsb/refs/install/managementplane/v1alpha1/spec/">Management Plane</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric/">Metric</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/metric-service/">Metric Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/agent/v1alpha1/onboarding-configuration/">Onboarding Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/authorization/v1alpha1/policy/">Onboarding Policy</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/application/v2/openapi-extensions/">OpenAPI Extensions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization/">Organization</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/organization-access-bindings/">Organization Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-setting/">Organization Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/organization-service/">Organizations Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/permissions/">Permissions</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/q/v2/permissions-service/">Permissions Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/binding/">Policy Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/policy-service/">Policy Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/service/">Registered Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role/">Role</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/role-service/">Role Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/security-access-bindings/">Security Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-group/">Security Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-service/">Security Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/security-setting/">Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/lookup-service/">Service Registry Lookup Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/service-route/">Service Route</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/service-security-setting/">Service Security Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/registry/v2/registration-service/">Servive Registry Registration Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source/">Source</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status/">Status</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/status-service/">Status Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team/">Teams and Users</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/team-service/">Teams Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/observability/telemetry/v2/source-service/">Telemetry Source Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant/">Tenant</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/tenant-access-bindings/">Tenant Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-service/">Tenant Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/tenant-setting/">Tenant Setting</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/gateway/v2/tier1-gateway/">Tier1 Gateway</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/traffic-access-bindings/">Traffic Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-group/">Traffic Group</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-service/">Traffic Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/traffic/v2/traffic-setting/">Traffic Setting</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/config/v1alpha1/transport-security/">Transport layer security config</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/security/v2/waf-settings/">WAF Settings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-extension/">WASM Extension</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/extension/v2/wasm-service/">WasmExtension Service</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/runtime/v1alpha1/registration/">Workload Auto Registration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/install/v1alpha1/workload-configuration/">Workload Configuration</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/identity/v1alpha1/identity/">Workload Identity</a></li>




  <li class="child level "><a href="/tsb/refs/onboarding/config/types/registration/v1alpha1/registration/">Workload Registration</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace/">Workspace</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/rbac/v2/workspace-access-bindings/">Workspace Access Bindings</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-service/">Workspace Service</a></li>




  <li class="child level "><a href="/tsb/refs/tsb/v2/workspace-setting/">Workspace Setting</a></li>

      
        </ul>
      
    

    
      </div>
    




  
    
    
    
    
      
    
    

    
    
    
    <div class="docs-toc-item has-child">
    <div class="parent-node d-flex justify-content-between" onClick="Collapse(&#34;caret-idd067b9f805c069b82516c7d6bafcc0b1&#34;)" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1" aria-hidden="false" data-toggle="collapse">
    
    <a class="d-inline docs-toc-link " href="/tsb/knowledge-base/">知识库和 FAQ</a>
    <a class="nav-toogle d-inline level" aria-hidden="false" data-toggle="collapse" href="#idd067b9f805c069b82516c7d6bafcc0b1" aria-expanded="false" aria-controls="idd067b9f805c069b82516c7d6bafcc0b1">
    
        <i class="fa-solid fa-angle-right" id="caret-idd067b9f805c069b82516c7d6bafcc0b1"></i>
    
    </a>
    
    </div>
    
      
      <ul class="nav docs-sidenav collapse  " id="idd067b9f805c069b82516c7d6bafcc0b1">
      



  <li class="child level "><a href="/tsb/knowledge-base/gitops/">Service Mesh and GitOps</a></li>




  <li class="child level "><a href="/tsb/knowledge-base/faq/">TSB 常见问题解答</a></li>

      
        </ul>
      
    

    
      </div>
    

      
    

    
      </ul>
    

  
</nav>

    </div>

    
    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
     
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">目录</a></li>
      </ul>
     

      <nav id="TableOfContents">
  <ul>
    <li><a href="#system-architecture">System architecture</a></li>
    <li><a href="#tier1-gateway-troubleshooting">Tier1 Gateway troubleshooting</a>
      <ul>
        <li><a href="#make-sure-nodeselector-annotations-have-been-applied">Make sure <code>nodeSelector</code> annotations have been applied</a></li>
        <li><a href="#check-the-tier1gateway-configuration">Check the <code>tier1gateway</code> configuration.</a></li>
        <li><a href="#check-permissions-for-communication-between-networks">Check permissions for communication between networks</a></li>
      </ul>
    </li>
    <li><a href="#tier2gateway-troubleshooting">Tier2Gateway troubleshooting</a></li>
    <li><a href="#xcp-troubleshooting">XCP troubleshooting</a></li>
  </ul>
</nav>

      
<div class="subscribe-module col-12 mt-1">
    <img src="/img/wechat.webp" alt="image" title="Jimmy Song的微信公众号"/>
    <p class="text-center pt-1">扫码联系站长</p>
    
    
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4029167986768912"
     crossorigin="anonymous"></script>
     <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4029167986768912"
       data-ad-slot="6856371908"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
    <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    
</div>



    </div>
    

    <main class="py-md-3 pl-md-3 docs-content col-xl-8" role="main">

      <article class="article">

          

          <h1>Basic troubleshooting</h1>

          <div class="article-style">
            <p>This document explains some possible ways to do basic troubleshooting in TSB in order to find misconfiguration issues for a given route or common causes for <code>50x</code> errors.</p>
<h2 id="system-architecture">System architecture</h2>
<p>In this document the following system architecture with Tier1-Tier2 setup:</p>
<p>There are two different clusters, <code>training-mp</code> which contains the management plane and a control plane configured as tier1, and <code>training-cp</code> which is configured as tier2 and contains <code>bookinfo</code> and <code>httpbin</code> applications.</p>
<p>















<figure  >
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="../assets/operations/troubleshooting-diagram.png" alt="" loading="lazy" data-zoomable /></div>
  </div></figure>
</p>
<h2 id="tier1-gateway-troubleshooting">Tier1 Gateway troubleshooting</h2>
<p>When a <code>50x</code> error is detected it is important to understand the error message, as it will point us to different sources.</p>
<p>For example, suppose you issued an HTTP request using <code>curl</code> to one of the services
controlled by TSB, and you observe an error like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Failed to connect to &lt;hostname&gt; port &lt;port&gt;: Connection refused
</span></span></code></pre></div><p>This usually means that there is no listener configured. This in turn would mean that
we are either:</p>
<ol>
<li>Missing the gateway object</li>
<li>Accessing the wrong port</li>
<li>The gateway is not correctly configured, or</li>
<li>The pod for the Tier1 Gateway is not running.</li>
</ol>
<p>To check if the listener exists you can use <code>istioctl</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl pc listener &lt;ingressgateway&gt;.&lt;namespace&gt;
</span></span></code></pre></div><p>If there is no listener or you want to check the current configuration, you need to review your gateway configuration. To fetch the Gateway object, use <code>kubectl</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl get gateway
</span></span></code></pre></div><p>If the gateway does not exist, you will need to troubleshoot why XCP is not creating the configurations.
In this case, locate the <code>mpc</code> pod in the management plane namespace, and look for webhook errors that could point to the wrong configuration.</p>
<p>If the gateway and virtual service are created, but you are still getting <code>50x</code> errors in your HTTP request such as the following, you will need to dig further for more information.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">HTTP/2 <span class="m">503</span>
</span></span></code></pre></div><p>In this case look at the <code>ingressgateway</code> logs. Because in this particular case the system is configured in a tier1-tier2 is setup, the first thing that should be checked is the <code>tier1gateway</code>.</p>
<p>Find the logs from the corresponding pod. Depending on the nature of the issue, you may have to enable trace logs for further investigation.</p>
<p>If you find an entry like the following, this means that there is no route to find the tier2 gateway.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">HTTP/2<span class="s2">&#34; 503 NR
</span></span></span></code></pre></div><p>If this is the case, try checking the following:</p>
<h3 id="make-sure-nodeselector-annotations-have-been-applied">Make sure <code>nodeSelector</code> annotations have been applied</h3>
<p>If using NodePort for your XCP-edge services, remember that you must add the following annotation in both tier1 and tier2:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">traffic.istio.io/nodeSelector: <span class="o">{</span><span class="s2">&#34;value&#34;</span>:<span class="s2">&#34;value&#34;</span><span class="o">}</span><span class="err">&#39;</span>
</span></span></code></pre></div><h3 id="check-the-tier1gateway-configuration">Check the <code>tier1gateway</code> configuration.</h3>
<p>Tier1 gateways can be configured to route traffic to a specific cluster name or use a label.
Make sure that the cluster or label names are correct by inspecting <code>spec.externalServers.name[x].clusters</code>
field in the <a href="https://docs.tetrate.io/service-bridge/latest/en-us/refs/tsb/gateway/v2/tier1_gateway" target="_blank" rel="noopener"><code>tier1gateway</code></a> configuration.</p>
<p>You might fetch the <code>tier1gateway</code> object by using the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl get t1 -w &lt;workspace&gt; -l &lt;gatewaygroup&gt; &lt;name&gt; -o yaml
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  …
</span></span><span class="line"><span class="cl">  externalServers:
</span></span><span class="line"><span class="cl">  - clusters:
</span></span><span class="line"><span class="cl">    - name: training-cp
</span></span><span class="line"><span class="cl">    hostname: bookinfo
</span></span><span class="line"><span class="cl">    …
</span></span><span class="line"><span class="cl">  - clusters:
</span></span><span class="line"><span class="cl">    - labels:
</span></span><span class="line"><span class="cl">        tier: tier2
</span></span><span class="line"><span class="cl">    hostname: httpbin
</span></span><span class="line"><span class="cl">    …
</span></span></code></pre></div><p>And compare this with the <a href="https://docs.tetrate.io/service-bridge/latest/en-us/refs/tsb/v2/cluster" target="_blank" rel="noopener">cluster</a> object:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl get cluster &lt;name&gt; -o yaml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">…
</span></span><span class="line"><span class="cl">metadata:
</span></span><span class="line"><span class="cl">  labels:
</span></span><span class="line"><span class="cl">    tier: tier2
</span></span><span class="line"><span class="cl">  name: training-cp
</span></span><span class="line"><span class="cl">…
</span></span></code></pre></div><h3 id="check-permissions-for-communication-between-networks">Check permissions for communication between networks</h3>
<p>If you have a <code>network</code> defined in your cluster object, and the participating clusters do not all share the same <code>network</code>, check if an <a href="https://docs.tetrate.io/service-bridge/latest/en-us/refs/tsb/v2/organization_setting" target="_blank" rel="noopener">organization setting</a> exists to allow communication between the different networks.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ tctl get os
</span></span></code></pre></div><p>Once this is fixed, you should see the service created in the namespace <code>xcp-multicluster</code>. This service entry is created for multi-cluster purposes along the destination rule in the application namespace to set mTLS.</p>
<p>If at this point you are still noticing 503 errors from the <code>tier1gateway</code>, check the <a href="https://www.envoyproxy.io/docs/envoy/latest/configuration/observability/access_log/usage" target="_blank" rel="noopener">error code</a> to better understand what might be causing the error.</p>
<hr>
<p>It&rsquo;s also useful to use <code>istioctl</code> command at this point, as most likely, in tier1 - tier2 scenarios, you will have some issue with the downstream.</p>
<p>First check if your <code>tier1gateway</code>&rsquo;s configuration has been synced by checking the presence of <code>SYNC</code> in the status.
You can verify that the configuration is being properly received from <code>istiod</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl ps
</span></span></code></pre></div><p>Verify that the route you are trying to access exists:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl pc route &lt;ingressgateway&gt;.&lt;namespace&gt;
</span></span></code></pre></div><p>If the route does not exist, you have a misconfiguration in the <code>tier1gateway</code> object.
If it does, check the <code>cluster</code> for the service:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl pc cluster &lt;ingressgateway&gt;.&lt;namespace&gt;
</span></span></code></pre></div><p>You should be able to see the subset and destination rule in the output of the above command. Check that the configuration of the destination rule is correct.</p>
<p>Finally, check the <code>endpoints</code>. Check the configuration to see if the downstream is healthy:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl pc endpoint &lt;ingressgateway&gt;.&lt;namespace&gt;
</span></span></code></pre></div><p>If all of the above seems correct, then it is likely that you have to look at the <code>tier2gateway</code>.</p>
<p>Check in the <code>tier1gateway</code> logs if you have an error resembling the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">HTTP/2<span class="s2">&#34; 503 LR,URX
</span></span></span></code></pre></div><p>This likely means that there is a timeout connecting from <code>tier1gateway</code> to <code>tier2gateway</code>. Check with <code>netcat</code> if you can access <code>tier2gateway</code>. If you are not successful at connecting to <code>tier2gateway</code>, there could be a misconfiguration or there could be a firewall in between blocking communication.</p>
<p>Another hint that you may be able to find is in the <code>ingressgateway</code> logs.
If you find an error message resembling the following, it means that the <a href="https://istio.io/latest/docs/tasks/security/cert-management/plugin-ca-cert/" target="_blank" rel="noopener"><code>cacert</code></a>
secret in <code>istio-system</code> namespace is not signed by the same root (or intermediate)
CA in both clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ HTTP/2<span class="s2">&#34; 503 UF,URX &#34;</span>-<span class="s2">&#34; &#34;</span>TLS error: 268435581:SSL routines:OPENSSL_internal:CERTIFICATE_VERIFY_FAILED<span class="s2">&#34;
</span></span></span></code></pre></div><p>If you make changes to the certificates, you will either need to restart all sidecars and gateways, or
wait for 30 minutes until the components pull the new certificates from <code>istiod</code>. The interval
between these updates can be configured, but the default value is 30 minutes.</p>
<h2 id="tier2gateway-troubleshooting">Tier2Gateway troubleshooting</h2>
<p>If debugging the <code>tier1gateway</code> was not been enough to fix the problem, you will have to
perform mostly similar exercise as you have done on <code>tier2gateway</code>, and understand
if your problem stems from a misconfiguration or a configuration propagation issue (i.e. <code>XCP</code>)</p>
<p>Check if the gateway has been created in the <code>tier2</code> namespace with <code>kubectl get gateway</code>.
If the gateways does not exist, check on the XCP side. From the <code>mpc</code> pod in the management plane namespace you can also see if there is any webhook issue.</p>
<p>If the gateway has been created, verify that the listeners are created properly.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl pc listener &lt;ingressgateway&gt;.&lt;namespace&gt;
</span></span></code></pre></div><p>A listener for port 15443 must also be included in the <a href="https://docs.tetrate.io/service-bridge/latest/en-us/refs/install/dataplane/v1alpha1/spec" target="_blank" rel="noopener"><code>ingressgateway</code></a> resource, as traffic from <code>tier1</code> to <code>tier2</code> will need to use this port. It is also important to check that port 15443 is specified as the first entry in the list of listeners, as some cloud vendors uses the first port for load balancer health checks.</p>
<p>If your problems still persist after you have checked that the listeners are created properly, you will need to check the <code>tier2gateway</code> logs. If you see <code>50x</code> errors in these logs, it is likely that there issues with the application itself or there are configuration propagation issues from <code>istiod</code> to <code>tier2gateway</code>.</p>
<p>If further troubleshooting is needed, then you will need to enable trace logs to be able to find the root cause:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl <span class="nb">exec</span> &lt;pod&gt; -c istio-proxy -- pilot-agent request POST ‘logging?level<span class="o">=</span>trace<span class="err">&#39;</span>
</span></span></code></pre></div><p>You can also check if configuration is being received from <code>istiod</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ istioctl ps
</span></span></code></pre></div><p>If the configuration have not been synced properly, check if there are any networking conditions between <code>istiod</code> and the <code>tier2gateway</code> that could block the communication.</p>
<p>Also verify if <code>istiod</code> pod in <code>istio-system</code> namespace is up and running. You might have resource issues that may prevent the configurations from being sent.</p>
<p>In case you want to verify all the configuration in the <code>tier2gateway</code> for a particular hostname, you can get the config dump:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl <span class="nb">exec</span> &lt;pod&gt; -c istio-proxy -- pilot-agent request GET config_dump &gt; config_dump.json
</span></span></code></pre></div><h2 id="xcp-troubleshooting">XCP troubleshooting</h2>
<p>If you notice that <code>XCP</code> is not creating the configurations that you expected,
check the <code>mpc</code> pod logs in the management plane namespace.</p>
<p>You may find validation errors in these logs, indicating problems transforming configurations from TSB to XCP API.
For example, you might see long entries that resembles the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl logs -n tsb &lt;mpc&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2022-03-02T13:58:26.153872Z     error   mpc/config      failed to convert TSB config into its XCP equivalent: no gateway object found <span class="k">for</span> reference <span class="s2">&#34;httpbin/httpbin-gw&#34;</span> in <span class="s2">&#34;organizations/&lt;org&gt;/tenants/&lt;tenant&gt;/workspaces/&lt;ws&gt;/gatewaygroups/&lt;gg&gt;/virtualservices/&lt;vs&gt;&#34;</span>
</span></span></code></pre></div><p>If there are no webhook errors in <code>mpc</code> then check the logs for <code>edge</code> pod in the control plane namespace of the cluster where the configuration should be created.</p>
<p>If things are working, you should be able to see all the configurations applied to the istio-system namespace:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl logs -n istio-system &lt;edge&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2022-03-09T11:17:25.492365Z     debug   <span class="nv">configapply</span>     <span class="o">===</span>BEGIN: Apply request <span class="k">for</span> &lt;n&gt; objects in istio-system namespace
</span></span></code></pre></div><p>If the object that you are looking for does not appear in this list, it could be an issue in either <code>XCP edge</code> or <code>XCP central</code>.</p>
<p>To enable debug logs for <code>XCP edge</code> you can modify the deployment as follows (this will restart the pod):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">kubectl edit deployment edge -n istio-system
</span></span></code></pre></div><p>Depending on what you want to troubleshoot, you may have to configure the loggers in more detail.
For example, if you want to configure each loggers to a different logging level, you could
use command like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">- --log_output_level
</span></span><span class="line"><span class="cl">default:info,transform:info,discovery-server:info,configapply:debug,translator:debug,model:debug,istiod-discovery:error,cluster-gen:error,stream:debug
</span></span></code></pre></div><p>Or you could set the log level for all loggers at once:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">- --log_output_level
</span></span><span class="line"><span class="cl">- default:debug
</span></span></code></pre></div><p>If you want permanently change the logging configuration for all future <code>XCP edge</code> components, you can create an overlay for the control plane operator:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">          overlays:
</span></span><span class="line"><span class="cl">          - apiVersion: install.xcp.tetrate.io/v1alpha1
</span></span><span class="line"><span class="cl">            kind: EdgeXcp
</span></span><span class="line"><span class="cl">            name: edge-xcp
</span></span><span class="line"><span class="cl">            patches:
</span></span><span class="line"><span class="cl">            - path: spec.logLevels
</span></span><span class="line"><span class="cl">              value: default:info,transform:info,discovery-server:info,configapply:debug,translator:debug,model:debug,istiod-discovery:error,cluster-gen:error,stream:debug
</span></span></code></pre></div><p>With XCP edge in debug mode, you should be able to see the error and determine if the root cause is in the cluster. If it is not in the cluster, you will have to perform the same exercise for <code>XCP cetnral</code>, located in the management plane namespace.</p>

          </div>

          

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/tsb/">TSB</a>
  
</div>



          
          
          <div class="article-widget">
            
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/tsb/troubleshooting/cluster-onboarding/" rel="prev">
    <div class="meta-nav">下一页</div>
    <p>Cluster onboarding troubleshooting</p></a>
  
</div>

          </div>
          

        <div class="body-footer">
          <p>最近更新于 2023-08-28</p>

          



          


  
  
  

  

  



          


        </div>

      </article>

      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2017-2023 jimmysong.io all rights reserved</p>
        </div>
    </div>
  </div>

</footer>


    </main>
  </div>
</div>

  </div>

  <div class="page-footer">
    
    
  </div>

  


<script src="/js/vendor-bundle.min.46271ef31da3f018e9cd1b59300aa265.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.24983018b0e5661cd5fe1822254286ea.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>
<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
